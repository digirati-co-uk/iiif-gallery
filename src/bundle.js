!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){n(1),n(299),e.exports=n(299)},function(e,t,n){(function(e){"use strict";function t(e,t,n){e[t]||Object[i](e,t,{writable:!0,configurable:!0,value:n})}if(n(2),n(294),n(296),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var i="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,n){n(3),n(52),n(53),n(54),n(55),n(57),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(70),n(72),n(74),n(76),n(79),n(80),n(81),n(85),n(87),n(89),n(93),n(94),n(95),n(96),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(106),n(107),n(108),n(110),n(111),n(112),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(132),n(133),n(137),n(138),n(139),n(140),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(160),n(161),n(167),n(168),n(170),n(171),n(172),n(176),n(177),n(178),n(179),n(180),n(182),n(183),n(184),n(185),n(188),n(190),n(191),n(192),n(194),n(196),n(198),n(199),n(200),n(202),n(203),n(204),n(205),n(211),n(214),n(215),n(217),n(218),n(221),n(222),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(245),n(246),n(247),n(248),n(249),n(250),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(261),n(262),n(264),n(265),n(266),n(267),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(292),n(293),e.exports=n(9)},function(e,t,n){"use strict";var i=n(4),r=n(5),o=n(6),s=n(8),a=n(18),l=n(22).KEY,u=n(7),c=n(23),h=n(24),f=n(19),d=n(25),p=n(26),g=n(27),v=n(29),m=n(42),y=n(45),w=n(12),x=n(32),S=n(16),b=n(17),_=n(46),T=n(49),E=n(51),P=n(11),R=n(30),O=E.f,C=P.f,k=T.f,I=i.Symbol,F=i.JSON,A=F&&F.stringify,M="prototype",D=d("_hidden"),B=d("toPrimitive"),L={}.propertyIsEnumerable,z=c("symbol-registry"),N=c("symbols"),H=c("op-symbols"),j=Object[M],V="function"==typeof I,W=i.QObject,U=!W||!W[M]||!W[M].findChild,$=o&&u(function(){return 7!=_(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=O(j,t);i&&delete j[t],C(e,t,n),i&&e!==j&&C(j,t,i)}:C,q=function(e){var t=N[e]=_(I[M]);return t._k=e,t},G=V&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Z=function(e,t,n){return e===j&&Z(H,t,n),w(e),t=S(t,!0),w(n),r(N,t)?(n.enumerable?(r(e,D)&&e[D][t]&&(e[D][t]=!1),n=_(n,{enumerable:b(0,!1)})):(r(e,D)||C(e,D,b(1,{})),e[D][t]=!0),$(e,t,n)):C(e,t,n)},X=function(e,t){w(e);for(var n,i=m(t=x(t)),r=0,o=i.length;o>r;)Z(e,n=i[r++],t[n]);return e},Y=function(e,t){return void 0===t?_(e):X(_(e),t)},Q=function(e){var t=L.call(this,e=S(e,!0));return this===j&&r(N,e)&&!r(H,e)?!1:t||!r(this,e)||!r(N,e)||r(this,D)&&this[D][e]?t:!0},K=function(e,t){if(e=x(e),t=S(t,!0),e!==j||!r(N,t)||r(H,t)){var n=O(e,t);return!n||!r(N,t)||r(e,D)&&e[D][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=k(x(e)),i=[],o=0;n.length>o;)r(N,t=n[o++])||t==D||t==l||i.push(t);return i},ee=function(e){for(var t,n=e===j,i=k(n?H:x(e)),o=[],s=0;i.length>s;)r(N,t=i[s++])&&(n?r(j,t):!0)&&o.push(N[t]);return o};V||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===j&&t.call(H,n),r(this,D)&&r(this[D],e)&&(this[D][e]=!1),$(this,e,b(1,n))};return o&&U&&$(j,e,{configurable:!0,set:t}),q(e)},a(I[M],"toString",function(){return this._k}),E.f=K,P.f=Z,n(50).f=T.f=J,n(44).f=Q,n(43).f=ee,o&&!n(28)&&a(j,"propertyIsEnumerable",Q,!0),p.f=function(e){return q(d(e))}),s(s.G+s.W+s.F*!V,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)d(te[ne++]);for(var te=R(d.store),ne=0;te.length>ne;)g(te[ne++]);s(s.S+s.F*!V,"Symbol",{"for":function(e){return r(z,e+="")?z[e]:z[e]=I(e)},keyFor:function(e){if(G(e))return v(z,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){U=!0},useSimple:function(){U=!1}}),s(s.S+s.F*!V,"Object",{create:Y,defineProperty:Z,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:ee}),F&&s(s.S+s.F*(!V||u(function(){var e=I();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!G(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return t=i[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){return n&&(t=n.call(this,e,t)),G(t)?void 0:t}),i[1]=t,A.apply(F,i)}}}),I[M][B]||n(10)(I[M],B,I[M].valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var i=n(4),r=n(9),o=n(10),s=n(18),a=n(20),l="prototype",u=function(e,t,n){var c,h,f,d,p=e&u.F,g=e&u.G,v=e&u.S,m=e&u.P,y=e&u.B,w=g?i:v?i[t]||(i[t]={}):(i[t]||{})[l],x=g?r:r[t]||(r[t]={}),S=x[l]||(x[l]={});g&&(n=t);for(c in n)h=!p&&w&&void 0!==w[c],f=(h?w:n)[c],d=y&&h?a(f,i):m&&"function"==typeof f?a(Function.call,f):f,w&&s(w,c,f,e&u.U),x[c]!=f&&o(x,c,d),m&&S[c]!=f&&(S[c]=f)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(11),r=n(17);e.exports=n(6)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(12),r=n(14),o=n(16),s=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(13);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(6)&&!n(7)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(13),r=n(4).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(13);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(4),r=n(10),o=n(5),s=n(19)("src"),a="toString",l=Function[a],u=(""+l).split(a);n(9).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,a){var l="function"==typeof n;l&&(o(n,"name")||r(n,"name",t)),e[t]!==n&&(l&&(o(n,s)||r(n,s,e[t]?""+e[t]:u.join(String(t)))),e===i?e[t]=n:a?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||l.call(this)})},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(21);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(19)("meta"),r=n(13),o=n(5),s=n(11).f,a=0,l=Object.isExtensible||function(){return!0},u=!n(7)(function(){return l(Object.preventExtensions({}))}),c=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},h=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},f=function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},d=function(e){return u&&p.NEED&&l(e)&&!o(e,i)&&c(e),e},p=e.exports={KEY:i,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(e,t,n){var i=n(4),r="__core-js_shared__",o=i[r]||(i[r]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){var i=n(11).f,r=n(5),o=n(25)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){var i=n(23)("wks"),r=n(19),o=n(4).Symbol,s="function"==typeof o,a=e.exports=function(e){return i[e]||(i[e]=s&&o[e]||(s?o:r)("Symbol."+e))};a.store=i},function(e,t,n){t.f=n(25)},function(e,t,n){var i=n(4),r=n(9),o=n(28),s=n(26),a=n(11).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t){e.exports=!1},function(e,t,n){var i=n(30),r=n(32);e.exports=function(e,t){for(var n,o=r(e),s=i(o),a=s.length,l=0;a>l;)if(o[n=s[l++]]===t)return n}},function(e,t,n){var i=n(31),r=n(41);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(5),r=n(32),o=n(36)(!1),s=n(40)("IE_PROTO");e.exports=function(e,t){var n,a=r(e),l=0,u=[];for(n in a)n!=s&&i(a,n)&&u.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var i=n(33),r=n(35);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(34);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(32),r=n(37),o=n(39);e.exports=function(e){return function(t,n,s){var a,l=i(t),u=r(l.length),c=o(s,u);if(e&&n!=n){for(;u>c;)if(a=l[c++],a!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(38),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(38),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),0>e?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(23)("keys"),r=n(19);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(30),r=n(43),o=n(44);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var s,a=n(e),l=o.f,u=0;a.length>u;)l.call(e,s=a[u++])&&t.push(s);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(34);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(12),r=n(47),o=n(41),s=n(40)("IE_PROTO"),a=function(){},l="prototype",u=function(){var e,t=n(15)("iframe"),i=o.length,r=">";for(t.style.display="none",n(48).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script"+r),e.close(),u=e.F;i--;)delete u[l][o[i]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[l]=i(e),n=new a,a[l]=null,n[s]=e):n=u(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(11),r=n(12),o=n(30);e.exports=n(6)?Object.defineProperties:function(e,t){r(e);for(var n,s=o(t),a=s.length,l=0;a>l;)i.f(e,n=s[l++],t[n]);return e}},function(e,t,n){e.exports=n(4).document&&document.documentElement},function(e,t,n){var i=n(32),r=n(50).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return r(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):r(i(e))}},function(e,t,n){var i=n(31),r=n(41).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(44),r=n(17),o=n(32),s=n(16),a=n(5),l=n(14),u=Object.getOwnPropertyDescriptor;t.f=n(6)?u:function(e,t){if(e=o(e),t=s(t,!0),l)try{return u(e,t)}catch(n){}return a(e,t)?r(!i.f.call(e,t),e[t]):void 0}},function(e,t,n){var i=n(8);i(i.S,"Object",{create:n(46)})},function(e,t,n){var i=n(8);i(i.S+i.F*!n(6),"Object",{defineProperty:n(11).f})},function(e,t,n){var i=n(8);i(i.S+i.F*!n(6),"Object",{defineProperties:n(47)})},function(e,t,n){var i=n(32),r=n(51).f;n(56)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){var i=n(8),r=n(9),o=n(7);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(e,t,n){var i=n(58),r=n(59);n(56)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(35);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(5),r=n(58),o=n(40)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var i=n(58),r=n(30);n(56)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){n(56)("getOwnPropertyNames",function(){return n(49).f})},function(e,t,n){var i=n(13),r=n(22).onFreeze;n(56)("freeze",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(13),r=n(22).onFreeze;n(56)("seal",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(13),r=n(22).onFreeze;n(56)("preventExtensions",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(13);n(56)("isFrozen",function(e){return function(t){return i(t)?e?e(t):!1:!0}})},function(e,t,n){var i=n(13);n(56)("isSealed",function(e){return function(t){return i(t)?e?e(t):!1:!0}})},function(e,t,n){var i=n(13);n(56)("isExtensible",function(e){return function(t){return i(t)?e?e(t):!0:!1}})},function(e,t,n){var i=n(8);i(i.S+i.F,"Object",{assign:n(69)})},function(e,t,n){"use strict";var i=n(30),r=n(43),o=n(44),s=n(58),a=n(33),l=Object.assign;e.exports=!l||n(7)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=s(e),l=arguments.length,u=1,c=r.f,h=o.f;l>u;)for(var f,d=a(arguments[u++]),p=c?i(d).concat(c(d)):i(d),g=p.length,v=0;g>v;)h.call(d,f=p[v++])&&(n[f]=d[f]);return n}:l},function(e,t,n){var i=n(8);i(i.S,"Object",{is:n(71)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var i=n(8);i(i.S,"Object",{setPrototypeOf:n(73).set})},function(e,t,n){var i=n(13),r=n(12),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(20)(Function.call,n(51).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){"use strict";var i=n(75),r={};r[n(25)("toStringTag")]="z",r+""!="[object z]"&&n(18)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(e,t,n){var i=n(34),r=n(25)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),r))?n:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var i=n(8);i(i.P,"Function",{bind:n(77)})},function(e,t,n){"use strict";var i=n(21),r=n(13),o=n(78),s=[].slice,a={},l=function(e,t,n){if(!(t in a)){for(var i=[],r=0;t>r;r++)i[r]="a["+r+"]";a[t]=Function("F,a","return new F("+i.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=s.call(arguments,1),a=function(){var i=n.concat(s.call(arguments));return this instanceof a?l(t,i.length,i):o(t,i,e)};return r(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(11).f,r=n(17),o=n(5),s=Function.prototype,a=/^\s*function ([^ (]*)/,l="name",u=Object.isExtensible||function(){return!0};l in s||n(6)&&i(s,l,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(a)[1];return o(e,l)||!u(e)||i(e,l,r(5,t)),t}catch(n){return""}}})},function(e,t,n){"use strict";var i=n(13),r=n(59),o=n(25)("hasInstance"),s=Function.prototype;o in s||n(11).f(s,o,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var i=n(8),r=n(82);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(e,t,n){var i=n(4).parseInt,r=n(83).trim,o=n(84),s=/^[\-+]?0[xX]/;e.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(s.test(n)?16:10))}:i},function(e,t,n){var i=n(8),r=n(35),o=n(7),s=n(84),a="["+s+"]",l="​",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),h=function(e,t,n){var r={},a=o(function(){return!!s[e]()||l[e]()!=l}),u=r[e]=a?t(f):s[e];n&&(r[n]=u),i(i.P+i.F*a,"String",r)},f=h.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=h},function(e,t){e.exports="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var i=n(8),r=n(86);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(e,t,n){var i=n(4).parseFloat,r=n(83).trim;e.exports=1/i(n(84)+"-0")!==-(1/0)?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},function(e,t,n){"use strict";var i=n(4),r=n(5),o=n(34),s=n(88),a=n(16),l=n(7),u=n(50).f,c=n(51).f,h=n(11).f,f=n(83).trim,d="Number",p=i[d],g=p,v=p.prototype,m=o(n(46)(v))==d,y="trim"in String.prototype,w=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():f(t,3);var n,i,r,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var s,l=t.slice(2),u=0,c=l.length;c>u;u++)if(s=l.charCodeAt(u),48>s||s>r)return NaN;return parseInt(l,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(m?l(function(){v.valueOf.call(n)}):o(n)!=d)?s(new g(w(t)),n,p):w(t)};for(var x,S=n(6)?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;S.length>b;b++)r(g,x=S[b])&&!r(p,x)&&h(p,x,c(g,x));p.prototype=v,v.constructor=p,n(18)(i,d,p)}},function(e,t,n){var i=n(13),r=n(73).set;e.exports=function(e,t,n){var o,s=t.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&i(o)&&r&&r(e,o),e}},function(e,t,n){"use strict";var i=n(8),r=(n(90),n(38)),o=n(91),s=n(92),a=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h="0",f=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*u[n],u[n]=i%1e7,i=l(i/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=l(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+s.call(h,7-n.length)+n}return t},g=function(e,t,n){return 0===t?n:t%2===1?g(e,t-1,n*e):g(e*e,t/2,n)},v=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!n(7)(function(){a.call({})})),"Number",{toFixed:function(e){var t,n,i,a,l=o(this,c),u=r(e),m="",y=h;if(0>u||u>20)throw RangeError(c);if(l!=l)return"NaN";if(-1e21>=l||l>=1e21)return String(l);if(0>l&&(m="-",l=-l),l>1e-21)if(t=v(l*g(2,69,1))-69,n=0>t?l*g(2,-t,1):l/g(2,t,1),n*=4503599627370496,t=52-t,t>0){for(f(0,n),i=u;i>=7;)f(1e7,0),i-=7;for(f(g(10,i,1),0),i=t-1;i>=23;)d(1<<23),i-=23;d(1<<i),f(1,1),d(2),y=p()}else f(0,n),f(1<<-t,0),y=p()+s.call(h,u);return u>0?(a=y.length,y=m+(u>=a?"0."+s.call(h,u-a)+y:y.slice(0,a-u)+"."+y.slice(a-u))):y=m+y,y}})},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(34);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var i=n(38),r=n(35);e.exports=function(e){var t=String(r(this)),n="",o=i(e);if(0>o||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){"use strict";var i=n(8),r=n(7),o=n(91),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},function(e,t,n){var i=n(8);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var i=n(8),r=n(4).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},function(e,t,n){var i=n(8);i(i.S,"Number",{isInteger:n(97)})},function(e,t,n){var i=n(13),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},function(e,t,n){var i=n(8);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(8),r=n(97),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&o(e)<=9007199254740991}})},function(e,t,n){var i=n(8);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var i=n(8);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var i=n(8),r=n(86);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(e,t,n){var i=n(8),r=n(82);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(e,t,n){var i=n(8),r=n(105),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:r(e-1+o(e-1)*o(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&1e-8>e?e-e*e/2:Math.log(1+e)}},function(e,t,n){function i(e){return isFinite(e=+e)&&0!=e?0>e?-i(-e):Math.log(e+Math.sqrt(e*e+1)):e}var r=n(8),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:i})},function(e,t,n){var i=n(8),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var i=n(8),r=n(109);i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},function(e,t,n){var i=n(8);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var i=n(8),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var i=n(8),r=n(113);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&1e-6>e?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var i=n(8),r=n(109),o=Math.pow,s=o(2,-52),a=o(2,-23),l=o(2,127)*(2-a),u=o(2,-126),c=function(e){return e+1/s-1/s};i(i.S,"Math",{fround:function(e){var t,n,i=Math.abs(e),o=r(e);return u>i?o*c(i/u/a)*u*a:(t=(1+a/s)*i,n=t-(t-i),n>l||n!=n?o*(1/0):o*n)}})},function(e,t,n){var i=n(8),r=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,o=0,s=0,a=arguments.length,l=0;a>s;)n=r(arguments[s++]),n>l?(i=l/n,o=o*i*i+1,l=n):n>0?(i=n/l,o+=i*i):o+=n;return l===1/0?1/0:l*Math.sqrt(o)}})},function(e,t,n){var i=n(8),r=Math.imul;i(i.S+i.F*n(7)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(e,t){var n=65535,i=+e,r=+t,o=n&i,s=n&r;return 0|o*s+((n&i>>>16)*s+o*(n&r>>>16)<<16>>>0)}})},function(e,t,n){var i=n(8);i(i.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){var i=n(8);i(i.S,"Math",{log1p:n(105)})},function(e,t,n){var i=n(8);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var i=n(8);i(i.S,"Math",{sign:n(109)})},function(e,t,n){var i=n(8),r=n(113),o=Math.exp;i(i.S+i.F*n(7)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var i=n(8),r=n(113),o=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var i=n(8);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var i=n(8),r=n(39),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(65536>t?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){var i=n(8),r=n(32),o=n(37);i(i.S,"String",{raw:function(e){for(var t=r(e.raw),n=o(t.length),i=arguments.length,s=[],a=0;n>a;)s.push(String(t[a++])),i>a&&s.push(String(arguments[a]));return s.join("")}})},function(e,t,n){"use strict";n(83)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var i=n(128)(!0);n(129)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(38),r=n(35);e.exports=function(e){return function(t,n){var o,s,a=String(r(t)),l=i(n),u=a.length;return 0>l||l>=u?e?"":void 0:(o=a.charCodeAt(l),55296>o||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):(o-55296<<10)+(s-56320)+65536)}}},function(e,t,n){"use strict";var i=n(28),r=n(8),o=n(18),s=n(10),a=n(5),l=n(130),u=n(131),c=n(24),h=n(59),f=n(25)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",g="keys",v="values",m=function(){return this};e.exports=function(e,t,n,y,w,x,S){u(n,t,y);var b,_,T,E=function(e){if(!d&&e in C)return C[e];switch(e){case g:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},P=t+" Iterator",R=w==v,O=!1,C=e.prototype,k=C[f]||C[p]||w&&C[w],I=k||E(w),F=w?R?E("entries"):I:void 0,A="Array"==t?C.entries||k:k;if(A&&(T=h(A.call(new e)),T!==Object.prototype&&(c(T,P,!0),i||a(T,f)||s(T,f,m))),R&&k&&k.name!==v&&(O=!0,I=function(){return k.call(this)}),i&&!S||!d&&!O&&C[f]||s(C,f,I),l[t]=I,l[P]=m,w)if(b={values:R?I:E(v),keys:x?I:E(g),entries:F},S)for(_ in b)_ in C||o(C,_,b[_]);else r(r.P+r.F*(d||O),t,b);return b}},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(46),r=n(17),o=n(24),s={};n(10)(s,n(25)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(s,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){"use strict";var i=n(8),r=n(128)(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(8),r=n(37),o=n(134),s="endsWith",a=""[s];i(i.P+i.F*n(136)(s),"String",{endsWith:function(e){var t=o(this,e,s),n=arguments.length>1?arguments[1]:void 0,i=r(t.length),l=void 0===n?i:Math.min(r(n),i),u=String(e);return a?a.call(t,u,l):t.slice(l-u.length,l)===u}})},function(e,t,n){var i=n(135),r=n(35);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){var i=n(13),r=n(34),o=n(25)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(25)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(r){}}return!0}},function(e,t,n){"use strict";var i=n(8),r=n(134),o="includes";i(i.P+i.F*n(136)(o),"String",{includes:function(e){return!!~r(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(8);i(i.P,"String",{repeat:n(92)})},function(e,t,n){"use strict";var i=n(8),r=n(37),o=n(134),s="startsWith",a=""[s];i(i.P+i.F*n(136)(s),"String",{startsWith:function(e){var t=o(this,e,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return a?a.call(t,i,n):t.slice(n,n+i.length)===i}})},function(e,t,n){"use strict";n(141)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){var i=n(8),r=n(7),o=n(35),s=/"/g,a=function(e,t,n,i){var r=String(o(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(a),i(i.P+i.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";n(141)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(141)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(141)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(141)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(141)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(141)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(141)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(141)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(141)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(141)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(141)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(141)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var i=n(8);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var i=n(8),r=n(58),o=n(16);i(i.P+i.F*n(7)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=r(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){"use strict";var i=n(8),r=n(7),o=Date.prototype.getTime,s=function(e){return e>9?e:"0"+e};i(i.P+i.F*(r(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");
var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=0>t?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}})},function(e,t,n){var i=Date.prototype,r="Invalid Date",o="toString",s=i[o],a=i.getTime;new Date(NaN)+""!=r&&n(18)(i,o,function(){var e=a.call(this);return e===e?s.call(this):r})},function(e,t,n){var i=n(25)("toPrimitive"),r=Date.prototype;i in r||n(10)(r,i,n(159))},function(e,t,n){"use strict";var i=n(12),r=n(16),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),e!=o)}},function(e,t,n){var i=n(8);i(i.S,"Array",{isArray:n(45)})},function(e,t,n){"use strict";var i=n(20),r=n(8),o=n(58),s=n(162),a=n(163),l=n(37),u=n(164),c=n(165);r(r.S+r.F*!n(166)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,h,f=o(e),d="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,m=0,y=c(f);if(v&&(g=i(g,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&a(y))for(t=l(f.length),n=new d(t);t>m;m++)u(n,m,v?g(f[m],m):f[m]);else for(h=y.call(f),n=new d;!(r=h.next()).done;m++)u(n,m,v?s(h,g,[r.value,m],!0):r.value);return n.length=m,n}})},function(e,t,n){var i=n(12);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(o){var s=e["return"];throw void 0!==s&&i(s.call(e)),o}}},function(e,t,n){var i=n(130),r=n(25)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){"use strict";var i=n(11),r=n(17);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(75),r=n(25)("iterator"),o=n(130);e.exports=n(9).getIteratorMethod=function(e){return void 0!=e?e[r]||e["@@iterator"]||o[i(e)]:void 0}},function(e,t,n){var i=n(25)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(s){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},e(o)}catch(a){}return n}},function(e,t,n){"use strict";var i=n(8),r=n(164);i(i.S+i.F*n(7)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var i=n(8),r=n(32),o=[].join;i(i.P+i.F*(n(33)!=Object||!n(169)(o)),"Array",{join:function(e){return o.call(r(this),void 0===e?",":e)}})},function(e,t,n){var i=n(7);e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";var i=n(8),r=n(48),o=n(34),s=n(39),a=n(37),l=[].slice;i(i.P+i.F*n(7)(function(){r&&l.call(r)}),"Array",{slice:function(e,t){var n=a(this.length),i=o(this);if(t=void 0===t?n:t,"Array"==i)return l.call(this,e,t);for(var r=s(e,n),u=s(t,n),c=a(u-r),h=Array(c),f=0;c>f;f++)h[f]="String"==i?this.charAt(r+f):this[r+f];return h}})},function(e,t,n){"use strict";var i=n(8),r=n(21),o=n(58),s=n(7),a=[].sort,l=[1,2,3];i(i.P+i.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!n(169)(a)),"Array",{sort:function(e){return void 0===e?a.call(o(this)):a.call(o(this),r(e))}})},function(e,t,n){"use strict";var i=n(8),r=n(173)(0),o=n(169)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(20),r=n(33),o=n(58),s=n(37),a=n(174);e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,h=6==e,f=5==e||h,d=t||a;return function(t,a,p){for(var g,v,m=o(t),y=r(m),w=i(a,p,3),x=s(y.length),S=0,b=n?d(t,x):l?d(t,0):void 0;x>S;S++)if((f||S in y)&&(g=y[S],v=w(g,S,m),e))if(n)b[S]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:b.push(g)}else if(c)return!1;return h?-1:u||c?c:b}}},function(e,t,n){var i=n(175);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(13),r=n(45),o=n(25)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){"use strict";var i=n(8),r=n(173)(1);i(i.P+i.F*!n(169)([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(8),r=n(173)(2);i(i.P+i.F*!n(169)([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(8),r=n(173)(3);i(i.P+i.F*!n(169)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(8),r=n(173)(4);i(i.P+i.F*!n(169)([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(8),r=n(181);i(i.P+i.F*!n(169)([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){var i=n(21),r=n(58),o=n(33),s=n(37);e.exports=function(e,t,n,a,l){i(t);var u=r(e),c=o(u),h=s(u.length),f=l?h-1:0,d=l?-1:1;if(2>n)for(;;){if(f in c){a=c[f],f+=d;break}if(f+=d,l?0>f:f>=h)throw TypeError("Reduce of empty array with no initial value")}for(;l?f>=0:h>f;f+=d)f in c&&(a=t(a,c[f],f,u));return a}},function(e,t,n){"use strict";var i=n(8),r=n(181);i(i.P+i.F*!n(169)([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var i=n(8),r=n(36)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n(169)(o)),"Array",{indexOf:function(e){return s?o.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(8),r=n(32),o=n(38),s=n(37),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(169)(a)),"Array",{lastIndexOf:function(e){if(l)return a.apply(this,arguments)||0;var t=r(this),n=s(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),0>i&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},function(e,t,n){var i=n(8);i(i.P,"Array",{copyWithin:n(186)}),n(187)("copyWithin")},function(e,t,n){"use strict";var i=n(58),r=n(39),o=n(37);e.exports=[].copyWithin||function(e,t){var n=i(this),s=o(n.length),a=r(e,s),l=r(t,s),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?s:r(u,s))-l,s-a),h=1;for(a>l&&l+c>a&&(h=-1,l+=c-1,a+=c-1);c-- >0;)l in n?n[a]=n[l]:delete n[a],a+=h,l+=h;return n}},function(e,t,n){var i=n(25)("unscopables"),r=Array.prototype;void 0==r[i]&&n(10)(r,i,{}),e.exports=function(e){r[i][e]=!0}},function(e,t,n){var i=n(8);i(i.P,"Array",{fill:n(189)}),n(187)("fill")},function(e,t,n){"use strict";var i=n(58),r=n(39),o=n(37);e.exports=function(e){for(var t=i(this),n=o(t.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,u=void 0===l?n:r(l,n);u>a;)t[a++]=e;return t}},function(e,t,n){"use strict";var i=n(8),r=n(173)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(187)(o)},function(e,t,n){"use strict";var i=n(8),r=n(173)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(187)(o)},function(e,t,n){n(193)("Array")},function(e,t,n){"use strict";var i=n(4),r=n(11),o=n(6),s=n(25)("species");e.exports=function(e){var t=i[e];o&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var i=n(187),r=n(195),o=n(130),s=n(32);e.exports=n(129)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(4),r=n(88),o=n(11).f,s=n(50).f,a=n(135),l=n(197),u=i.RegExp,c=u,h=u.prototype,f=/a/g,d=/a/g,p=new u(f)!==f;if(n(6)&&(!p||n(7)(function(){return d[n(25)("match")]=!1,u(f)!=f||u(d)==d||"/a/i"!=u(f,"i")}))){u=function(e,t){var n=this instanceof u,i=a(e),o=void 0===t;return!n&&i&&e.constructor===u&&o?e:r(p?new c(i&&!o?e.source:e,t):c((i=e instanceof u)?e.source:e,i&&o?l.call(e):t),n?this:h,u)};for(var g=(function(e){e in u||o(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})}),v=s(c),m=0;v.length>m;)g(v[m++]);h.constructor=u,u.prototype=h,n(18)(i,"RegExp",u)}n(193)("RegExp")},function(e,t,n){"use strict";var i=n(12);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";n(199);var i=n(12),r=n(197),o=n(6),s="toString",a=/./[s],l=function(e){n(18)(RegExp.prototype,s,e,!0)};n(7)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?l(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?r.call(e):void 0)}):a.name!=s&&l(function(){return a.call(this)})},function(e,t,n){n(6)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(197)})},function(e,t,n){n(201)("match",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},function(e,t,n){"use strict";var i=n(10),r=n(18),o=n(7),s=n(35),a=n(25);e.exports=function(e,t,n){var l=a(e),u=n(s,l,""[e]),c=u[0],h=u[1];o(function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})&&(r(String.prototype,e,c),i(RegExp.prototype,l,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},function(e,t,n){n(201)("replace",2,function(e,t,n){return[function(i,r){"use strict";var o=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},function(e,t,n){n(201)("search",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},function(e,t,n){n(201)("split",2,function(e,t,i){"use strict";var r=n(135),o=i,s=[].push,a="split",l="length",u="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[l]||2!="ab"[a](/(?:ab)*/)[l]||4!="."[a](/(.?)(.?)/)[l]||"."[a](/()()/)[l]>1||""[a](/.?/)[l]){var c=void 0===/()??/.exec("")[1];i=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return o.call(n,e,t);var i,a,h,f,d,p=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,m=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,g+"g");for(c||(i=new RegExp("^"+y.source+"$(?!\\s)",g));(a=y.exec(n))&&(h=a.index+a[0][l],!(h>v&&(p.push(n.slice(v,a.index)),!c&&a[l]>1&&a[0].replace(i,function(){for(d=1;d<arguments[l]-2;d++)void 0===arguments[d]&&(a[d]=void 0)}),a[l]>1&&a.index<n[l]&&s.apply(p,a.slice(1)),f=a[0][l],v=h,p[l]>=m)));)y[u]===a.index&&y[u]++;return v===n[l]?!f&&y.test("")||p.push(""):p.push(n.slice(v)),p[l]>m?p.slice(0,m):p}}else"0"[a](void 0,0)[l]&&(i=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(n,r){var o=e(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},i]})},function(e,t,n){"use strict";var i,r,o,s=n(28),a=n(4),l=n(20),u=n(75),c=n(8),h=n(13),f=(n(12),n(21)),d=n(90),p=n(206),g=(n(73).set,n(207)),v=n(208).set,m=n(209)(),y="Promise",w=a.TypeError,x=a.process,S=a[y],x=a.process,b="process"==u(x),_=function(){},T=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[n(25)("species")]=function(e){e(_,_)};return(b||"function"==typeof PromiseRejectionEvent)&&e.then(_)instanceof t}catch(i){}}(),E=function(e,t){return e===t||e===S&&t===o},P=function(e){var t;return h(e)&&"function"==typeof(t=e.then)?t:!1},R=function(e){return E(S,e)?new O(e):new r(e)},O=r=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw w("Bad Promise constructor");t=e,n=i}),this.resolve=f(t),this.reject=f(n)},C=function(e){try{e()}catch(t){return{error:t}}},k=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var i=e._v,r=1==e._s,o=0,s=function(t){var n,o,s=r?t.ok:t.fail,a=t.resolve,l=t.reject,u=t.domain;try{s?(r||(2==e._h&&A(e),e._h=1),s===!0?n=i:(u&&u.enter(),n=s(i),u&&u.exit()),n===t.promise?l(w("Promise-chain cycle")):(o=P(n))?o.call(n,a,l):a(n)):l(i)}catch(c){l(c)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){v.call(a,function(){var t,n,i,r=e._v;if(F(e)&&(t=C(function(){b?x.emit("unhandledRejection",r,e):(n=a.onunhandledrejection)?n({promise:e,reason:r}):(i=a.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=b||F(e)?2:1),e._a=void 0,t)throw t.error})},F=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;)if(t=n[i++],t.fail||!F(t.promise))return!1;return!0},A=function(e){v.call(a,function(){var t;b?x.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),k(t,!0))},D=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=P(e))?m(function(){var i={_w:n,_d:!1};try{t.call(e,l(D,i,1),l(M,i,1))}catch(r){M.call(i,r)}}):(n._v=e,n._s=1,k(n,!1))}catch(i){M.call({_w:n,_d:!1},i)}}};T||(S=function(e){d(this,S,y,"_h"),f(e),i.call(this);try{e(l(D,this,1),l(M,this,1))}catch(t){M.call(this,t)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(210)(S.prototype,{then:function(e,t){var n=R(g(this,S));return n.ok="function"==typeof e?e:!0,n.fail="function"==typeof t&&t,n.domain=b?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),O=function(){var e=new i;this.promise=e,this.resolve=l(D,e,1),this.reject=l(M,e,1)}),c(c.G+c.W+c.F*!T,{Promise:S}),n(24)(S,y),n(193)(y),o=n(9)[y],c(c.S+c.F*!T,y,{reject:function(e){var t=R(this),n=t.reject;return n(e),t.promise}}),c(c.S+c.F*(s||!T),y,{resolve:function(e){if(e instanceof S&&E(e.constructor,this))return e;var t=R(this),n=t.resolve;return n(e),t.promise}}),c(c.S+c.F*!(T&&n(166)(function(e){S.all(e)["catch"](_)})),y,{all:function(e){var t=this,n=R(t),i=n.resolve,r=n.reject,o=C(function(){var n=[],o=0,s=1;p(e,!1,function(e){var a=o++,l=!1;n.push(void 0),s++,t.resolve(e).then(function(e){l||(l=!0,n[a]=e,--s||i(n))},r)}),--s||i(n)});return o&&r(o.error),n.promise},race:function(e){var t=this,n=R(t),i=n.reject,r=C(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(e,t,n){var i=n(20),r=n(162),o=n(163),s=n(12),a=n(37),l=n(165),u={},c={},t=e.exports=function(e,t,n,h,f){var d,p,g,v,m=f?function(){return e}:l(e),y=i(n,h,t?2:1),w=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(d=a(e.length);d>w;w++)if(v=t?y(s(p=e[w])[0],p[1]):y(e[w]),v===u||v===c)return v}else for(g=m.call(e);!(p=g.next()).done;)if(v=r(g,y,p.value,t),v===u||v===c)return v};t.BREAK=u,t.RETURN=c},function(e,t,n){var i=n(12),r=n(21),o=n(25)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||void 0==(n=i(s)[o])?t:r(n)}},function(e,t,n){var i,r,o,s=n(20),a=n(78),l=n(48),u=n(15),c=n(4),h=c.process,f=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,g=0,v={},m="onreadystatechange",y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},w=function(e){y.call(e.data)};f&&d||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++g]=function(){a("function"==typeof e?e:Function(e),t)},i(g),g},d=function(e){delete v[e]},"process"==n(34)(h)?i=function(e){h.nextTick(s(y,e,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=w,i=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",w,!1)):i=m in u("script")?function(e){l.appendChild(u("script"))[m]=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(s(y,e,1),0)}),e.exports={set:f,clear:d}},function(e,t,n){var i=n(4),r=n(208).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,l="process"==n(34)(s);e.exports=function(){var e,t,n,u=function(){var i,r;for(l&&(i=s.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(o){throw e?n():t=void 0,o}}t=void 0,i&&i.enter()};if(l)n=function(){s.nextTick(u)};else if(o){var c=!0,h=document.createTextNode("");new o(u).observe(h,{characterData:!0}),n=function(){h.data=c=!c}}else if(a&&a.resolve){var f=a.resolve();n=function(){f.then(u)}}else n=function(){r.call(i,u)};return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){var i=n(18);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){"use strict";var i=n(212);e.exports=n(213)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var i=n(11).f,r=n(46),o=(n(10),n(210)),s=n(20),a=n(90),l=n(35),u=n(206),c=n(129),h=n(195),f=n(193),d=n(6),p=n(22).fastKey,g=d?"_s":"size",v=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var h=e(function(e,i){a(e,h,t,"_i"),e._i=r(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=i&&u(i,n,e[c],e)});return o(h.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[g]=0},"delete":function(e){var t=this,n=v(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t._f==n&&(t._f=i),t._l==n&&(t._l=r),t[g]--}return!!n},forEach:function(e){a(this,h,"forEach");for(var t,n=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!v(this,e)}}),d&&i(h.prototype,"size",{get:function(){return l(this[g])}}),h},def:function(e,t,n){var i,r,o=v(e,t);return o?o.v=n:(e._l=o={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[g]++,"F"!==r&&(e._i[r]=o)),e},getEntry:v,setStrong:function(e,t,n){c(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?h(0,n.k):"values"==t?h(0,n.v):h(0,[n.k,n.v]):(e._t=void 0,h(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var i=n(4),r=n(8),o=n(18),s=n(210),a=n(22),l=n(206),u=n(90),c=n(13),h=n(7),f=n(166),d=n(24),p=n(88);e.exports=function(e,t,n,g,v,m){var y=i[e],w=y,x=v?"set":"add",S=w&&w.prototype,b={},_=function(e){var t=S[e];o(S,e,"delete"==e?function(e){return m&&!c(e)?!1:t.call(this,0===e?0:e)}:"has"==e?function(e){return m&&!c(e)?!1:t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof w&&(m||S.forEach&&!h(function(){(new w).entries().next()}))){var T=new w,E=T[x](m?{}:-0,1)!=T,P=h(function(){T.has(1)}),R=f(function(e){new w(e)}),O=!m&&h(function(){for(var e=new w,t=5;t--;)e[x](t,t);return!e.has(-0)});R||(w=t(function(t,n){u(t,w,e);var i=p(new y,t,w);return void 0!=n&&l(n,v,i[x],i),i}),w.prototype=S,S.constructor=w),(P||O)&&(_("delete"),_("has"),v&&_("get")),(O||E)&&_(x),m&&S.clear&&delete S.clear}else w=g.getConstructor(t,e,v,x),s(w.prototype,n),a.NEED=!0;return d(w,e),b[e]=w,r(r.G+r.W+r.F*(w!=y),b),m||g.setStrong(w,e,v),w}},function(e,t,n){"use strict";var i=n(212);e.exports=n(213)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(this,e=0===e?0:e,e)}},i)},function(e,t,n){"use strict";var i,r=n(173)(0),o=n(18),s=n(22),a=n(69),l=n(216),u=n(13),c=(n(5),s.getWeak),h=Object.isExtensible,f=l.ufstore,d={},p=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(u(e)){var t=c(e);return t===!0?f(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(this,e,t)}},v=e.exports=n(213)("WeakMap",p,g,l,!0,!0);7!=(new v).set((Object.freeze||Object)(d),7).get(d)&&(i=l.getConstructor(p),a(i.prototype,g),s.NEED=!0,r(["delete","has","get","set"],function(e){var t=v.prototype,n=t[e];o(t,e,function(t,r){if(u(t)&&!h(t)){this._f||(this._f=new i);var o=this._f[e](t,r);return"set"==e?this:o}return n.call(this,t,r)})}))},function(e,t,n){"use strict";var i=n(210),r=n(22).getWeak,o=n(12),s=n(13),a=n(90),l=n(206),u=n(173),c=n(5),h=u(5),f=u(6),d=0,p=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return h(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=v(this,e);return t?t[1]:void 0},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},"delete":function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e(function(e,i){a(e,u,t,"_i"),e._i=d++,e._l=void 0,void 0!=i&&l(i,n,e[o],e)});return i(u.prototype,{"delete":function(e){if(!s(e))return!1;var t=r(e);return t===!0?p(this)["delete"](e):t&&c(t,this._i)&&delete t[this._i]},has:function(e){if(!s(e))return!1;var t=r(e);return t===!0?p(this).has(e):t&&c(t,this._i)}}),u},def:function(e,t,n){var i=r(o(t),!0);return i===!0?p(e).set(t,n):i[e._i]=n,e},ufstore:p}},function(e,t,n){"use strict";var i=n(216);n(213)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(this,e,!0)}},i,!1,!0)},function(e,t,n){"use strict";var i=n(8),r=n(219),o=n(220),s=n(12),a=n(39),l=n(37),u=n(13),c=(n(25)("typed_array"),n(4).ArrayBuffer),h=n(207),f=o.ArrayBuffer,d=o.DataView,p=r.ABV&&c.isView,g=f.prototype.slice,v=r.VIEW,m="ArrayBuffer";i(i.G+i.W+i.F*(c!==f),{ArrayBuffer:f}),i(i.S+i.F*!r.CONSTR,m,{isView:function(e){return p&&p(e)||u(e)&&v in e}}),i(i.P+i.U+i.F*n(7)(function(){return!new f(2).slice(1,void 0).byteLength}),m,{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(s(this),e);for(var n=s(this).byteLength,i=a(e,n),r=a(void 0===t?n:t,n),o=new(h(this,f))(l(r-i)),u=new d(this),c=new d(o),p=0;r>i;)c.setUint8(p++,u.getUint8(i++));return o}}),n(193)(m)},function(e,t,n){for(var i,r=n(4),o=n(10),s=n(19),a=s("typed_array"),l=s("view"),u=!(!r.ArrayBuffer||!r.DataView),c=u,h=0,f=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f>h;)(i=r[d[h++]])?(o(i.prototype,a,!0),o(i.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:a,VIEW:l}},function(e,t,n){"use strict";var i=n(4),r=n(6),o=n(28),s=n(219),a=n(10),l=n(210),u=n(7),c=n(90),h=n(38),f=n(37),d=n(50).f,p=n(11).f,g=n(189),v=n(24),m="ArrayBuffer",y="DataView",w="prototype",x="Wrong length!",S="Wrong index!",b=i[m],_=i[y],T=i.Math,E=(i.parseInt,i.RangeError),P=i.Infinity,R=b,O=T.abs,C=T.pow,k=(T.min,T.floor),I=T.log,F=T.LN2,A="buffer",M="byteLength",D="byteOffset",B=r?"_b":A,L=r?"_l":M,z=r?"_o":D,N=function(e,t,n){var i,r,o,s=Array(n),a=8*n-t-1,l=(1<<a)-1,u=l>>1,c=23===t?C(2,-24)-C(2,-77):0,h=0,f=0>e||0===e&&0>1/e?1:0;for(e=O(e),e!=e||e===P?(r=e!=e?1:0,i=l):(i=k(I(e)/F),e*(o=C(2,-i))<1&&(i--,o*=2),e+=i+u>=1?c/o:c*C(2,1-u),e*o>=2&&(i++,o/=2),i+u>=l?(r=0,i=l):i+u>=1?(r=(e*o-1)*C(2,t),i+=u):(r=e*C(2,u-1)*C(2,t),i=0));t>=8;s[h++]=255&r,r/=256,t-=8);for(i=i<<t|r,a+=t;a>0;s[h++]=255&i,i/=256,a-=8);return s[--h]|=128*f,s},H=function(e,t,n){var i,r=8*n-t-1,o=(1<<r)-1,s=o>>1,a=r-7,l=n-1,u=e[l--],c=127&u;for(u>>=7;a>0;c=256*c+e[l],l--,a-=8);for(i=c&(1<<-a)-1,c>>=-a,a+=t;a>0;i=256*i+e[l],l--,a-=8);if(0===c)c=1-s;else{if(c===o)return i?NaN:u?-P:P;i+=C(2,t),c-=s}return(u?-1:1)*i*C(2,c-t)},j=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},V=function(e){return[255&e]},W=function(e){return[255&e,e>>8&255]},U=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},$=function(e){return N(e,52,8)},q=function(e){return N(e,23,4)},G=function(e,t,n){p(e[w],t,{get:function(){return this[n]}})},Z=function(e,t,n,i){var r=+n,o=h(r);if(r!=o||0>o||o+t>e[L])throw E(S);var s=e[B]._b,a=o+e[z],l=s.slice(a,a+t);return i?l:l.reverse()},X=function(e,t,n,i,r,o){var s=+n,a=h(s);if(s!=a||0>a||a+t>e[L])throw E(S);for(var l=e[B]._b,u=a+e[z],c=i(+r),f=0;t>f;f++)l[u+f]=c[o?f:t-f-1]},Y=function(e,t){c(e,b,m);var n=+t,i=f(n);if(n!=i)throw E(x);return i};if(s.ABV){if(!u(function(){new b})||!u(function(){new b(.5)})){b=function(e){return new R(Y(this,e))};for(var Q,K=b[w]=R[w],J=d(R),ee=0;J.length>ee;)(Q=J[ee++])in b||a(b,Q,R[Q]);o||(K.constructor=b)}var te=new _(new b(2)),ne=_[w].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||l(_[w],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else b=function(e){var t=Y(this,e);this._b=g.call(Array(t),0),this[L]=t},_=function(e,t,n){c(this,_,y),c(e,b,y);var i=e[L],r=h(t);if(0>r||r>i)throw E("Wrong offset!");if(n=void 0===n?i-r:f(n),r+n>i)throw E(x);this[B]=e,this[z]=r,this[L]=n},r&&(G(b,M,"_l"),G(_,A,"_b"),G(_,M,"_l"),G(_,D,"_o")),l(_[w],{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return j(Z(this,4,e,arguments[1]))},getUint32:function(e){return j(Z(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return H(Z(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return H(Z(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){X(this,1,e,V,t)},setUint8:function(e,t){X(this,1,e,V,t)},setInt16:function(e,t){X(this,2,e,W,t,arguments[2])},setUint16:function(e,t){X(this,2,e,W,t,arguments[2])},setInt32:function(e,t){X(this,4,e,U,t,arguments[2])},setUint32:function(e,t){X(this,4,e,U,t,arguments[2])},setFloat32:function(e,t){X(this,4,e,q,t,arguments[2])},setFloat64:function(e,t){X(this,8,e,$,t,arguments[2])}});v(b,m),v(_,y),a(_[w],s.VIEW,!0),t[m]=b,t[y]=_},function(e,t,n){var i=n(8);i(i.G+i.W+i.F*!n(219).ABV,{DataView:n(220).DataView})},function(e,t,n){n(223)("Int8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){"use strict";if(n(6)){var i=n(28),r=n(4),o=n(7),s=n(8),a=n(219),l=n(220),u=n(20),c=n(90),h=n(17),f=n(10),d=n(210),p=(n(97),n(38)),g=n(37),v=n(39),m=n(16),y=n(5),w=n(71),x=n(75),S=n(13),b=n(58),_=n(163),T=n(46),E=n(59),P=n(50).f,R=(n(224),n(165)),O=n(19),C=n(25),k=n(173),I=n(36),F=n(207),A=n(194),M=n(130),D=n(166),B=n(193),L=n(189),z=n(186),N=n(11),H=n(51),j=N.f,V=H.f,W=r.RangeError,U=r.TypeError,$=r.Uint8Array,q="ArrayBuffer",G="Shared"+q,Z="BYTES_PER_ELEMENT",X="prototype",Y=Array[X],Q=l.ArrayBuffer,K=l.DataView,J=k(0),ee=k(2),te=k(3),ne=k(4),ie=k(5),re=k(6),oe=I(!0),se=I(!1),ae=A.values,le=A.keys,ue=A.entries,ce=Y.lastIndexOf,he=Y.reduce,fe=Y.reduceRight,de=Y.join,pe=Y.sort,ge=Y.slice,ve=Y.toString,me=Y.toLocaleString,ye=C("iterator"),we=C("toStringTag"),xe=O("typed_constructor"),Se=O("def_constructor"),be=a.CONSTR,_e=a.TYPED,Te=a.VIEW,Ee="Wrong length!",Pe=k(1,function(e,t){return Fe(F(e,e[Se]),t)}),Re=o(function(){return 1===new $(new Uint16Array([1]).buffer)[0]}),Oe=!!$&&!!$[X].set&&o(function(){new $(1).set({})}),Ce=function(e,t){if(void 0===e)throw U(Ee);var n=+e,i=g(e);if(t&&!w(n,i))throw W(Ee);return i},ke=function(e,t){var n=p(e);if(0>n||n%t)throw W("Wrong offset!");return n},Ie=function(e){if(S(e)&&_e in e)return e;throw U(e+" is not a typed array!")},Fe=function(e,t){if(!(S(e)&&xe in e))throw U("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return Me(F(e,e[Se]),t)},Me=function(e,t){for(var n=0,i=t.length,r=Fe(e,i);i>n;)r[n]=t[n++];return r},De=function(e,t,n){j(e,t,{get:function(){return this._d[n]}})},Be=function(e){var t,n,i,r,o,s,a=b(e),l=arguments.length,c=l>1?arguments[1]:void 0,h=void 0!==c,f=R(a);if(void 0!=f&&!_(f)){for(s=f.call(a),i=[],t=0;!(o=s.next()).done;t++)i.push(o.value);a=i}for(h&&l>2&&(c=u(c,arguments[2],2)),t=0,n=g(a.length),r=Fe(this,n);n>t;t++)r[t]=h?c(a[t],t):a[t];return r},Le=function(){for(var e=0,t=arguments.length,n=Fe(this,t);t>e;)n[e]=arguments[e++];return n},ze=!!$&&o(function(){me.call(new $(1))}),Ne=function(){return me.apply(ze?ge.call(Ie(this)):Ie(this),arguments)},He={copyWithin:function(e,t){return z.call(Ie(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return ne(Ie(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return L.apply(Ie(this),arguments)},filter:function(e){return Ae(this,ee(Ie(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ie(Ie(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return re(Ie(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){J(Ie(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return se(Ie(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return oe(Ie(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return de.apply(Ie(this),arguments)},lastIndexOf:function(e){return ce.apply(Ie(this),arguments)},map:function(e){return Pe(Ie(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return he.apply(Ie(this),arguments)},reduceRight:function(e){return fe.apply(Ie(this),arguments)},reverse:function(){for(var e,t=this,n=Ie(t).length,i=Math.floor(n/2),r=0;i>r;)e=t[r],t[r++]=t[--n],t[n]=e;return t},some:function(e){return te(Ie(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return pe.call(Ie(this),e)},subarray:function(e,t){var n=Ie(this),i=n.length,r=v(e,i);return new(F(n,n[Se]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,g((void 0===t?i:v(t,i))-r))}},je=function(e,t){return Ae(this,ge.call(Ie(this),e,t))},Ve=function(e){Ie(this);var t=ke(arguments[1],1),n=this.length,i=b(e),r=g(i.length),o=0;if(r+t>n)throw W(Ee);for(;r>o;)this[t+o]=i[o++]},We={entries:function(){return ue.call(Ie(this))},keys:function(){return le.call(Ie(this))},values:function(){return ae.call(Ie(this))}},Ue=function(e,t){return S(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},$e=function(e,t){return Ue(e,t=m(t,!0))?h(2,e[t]):V(e,t)},qe=function(e,t,n){return!(Ue(e,t=m(t,!0))&&S(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};be||(H.f=$e,N.f=qe),s(s.S+s.F*!be,"Object",{getOwnPropertyDescriptor:$e,defineProperty:qe}),o(function(){ve.call({})})&&(ve=me=function(){return de.call(this)});var Ge=d({},He);d(Ge,We),f(Ge,ye,We.values),d(Ge,{slice:je,set:Ve,constructor:function(){},toString:ve,toLocaleString:Ne}),De(Ge,"buffer","b"),De(Ge,"byteOffset","o"),De(Ge,"byteLength","l"),De(Ge,"length","e"),j(Ge,we,{get:function(){return this[_e]}}),e.exports=function(e,t,n,l){l=!!l;var u=e+(l?"Clamped":"")+"Array",h="Uint8Array"!=u,d="get"+e,p="set"+e,v=r[u],m=v||{},y=v&&E(v),w=!v||!a.ABV,b={},_=v&&v[X],R=function(e,n){var i=e._d;return i.v[d](n*t+i.o,Re)},O=function(e,n,i){var r=e._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*t+r.o,i,Re)},C=function(e,t){j(e,t,{get:function(){return R(this,t)},set:function(e){return O(this,t,e)},enumerable:!0})};w?(v=n(function(e,n,i,r){c(e,v,u,"_d");var o,s,a,l,h=0,d=0;if(S(n)){if(!(n instanceof Q||(l=x(n))==q||l==G))return _e in n?Me(v,n):Be.call(v,n);o=n,d=ke(i,t);var p=n.byteLength;if(void 0===r){if(p%t)throw W(Ee);if(s=p-d,0>s)throw W(Ee)}else if(s=g(r)*t,s+d>p)throw W(Ee);a=s/t}else a=Ce(n,!0),s=a*t,o=new Q(s);for(f(e,"_d",{b:o,o:d,l:s,e:a,v:new K(o)});a>h;)C(e,h++)}),_=v[X]=T(Ge),f(_,"constructor",v)):D(function(e){new v(null),new v(e)},!0)||(v=n(function(e,n,i,r){c(e,v,u);var o;return S(n)?n instanceof Q||(o=x(n))==q||o==G?void 0!==r?new m(n,ke(i,t),r):void 0!==i?new m(n,ke(i,t)):new m(n):_e in n?Me(v,n):Be.call(v,n):new m(Ce(n,h));
}),J(y!==Function.prototype?P(m).concat(P(y)):P(m),function(e){e in v||f(v,e,m[e])}),v[X]=_,i||(_.constructor=v));var k=_[ye],I=!!k&&("values"==k.name||void 0==k.name),F=We.values;f(v,xe,!0),f(_,_e,u),f(_,Te,!0),f(_,Se,v),(l?new v(1)[we]==u:we in _)||j(_,we,{get:function(){return u}}),b[u]=v,s(s.G+s.W+s.F*(v!=m),b),s(s.S,u,{BYTES_PER_ELEMENT:t,from:Be,of:Le}),Z in _||f(_,Z,t),s(s.P,u,He),B(u),s(s.P+s.F*Oe,u,{set:Ve}),s(s.P+s.F*!I,u,We),s(s.P+s.F*(_.toString!=ve),u,{toString:ve}),s(s.P+s.F*o(function(){new v(1).slice()}),u,{slice:je}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),u,{toLocaleString:Ne}),M[u]=I?k:F,i||I||f(_,ye,F)}}else e.exports=function(){}},function(e,t,n){var i=n(75),r=n(25)("iterator"),o=n(130);e.exports=n(9).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(i(t))}},function(e,t,n){n(223)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(223)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}},!0)},function(e,t,n){n(223)("Int16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(223)("Uint16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(223)("Int32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(223)("Uint32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(223)("Float32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(223)("Float64",8,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){var i=n(8),r=n(21),o=n(12),s=Function.apply;i(i.S,"Reflect",{apply:function(e,t,n){return s.call(r(e),t,o(n))}})},function(e,t,n){var i=n(8),r=n(46),o=n(21),s=n(12),a=n(13),l=n(77);i(i.S+i.F*n(7)(function(){function e(){}return!(Reflect.construct(function(){},[],e)instanceof e)}),"Reflect",{construct:function(e,t){o(e),s(t);var n=arguments.length<3?e:o(arguments[2]);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(l.apply(e,i))}var u=n.prototype,c=r(a(u)?u:Object.prototype),h=Function.apply.call(e,c,t);return a(h)?h:c}})},function(e,t,n){var i=n(11),r=n(8),o=n(12),s=n(16);r(r.S+r.F*n(7)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=s(t,!0),o(n);try{return i.f(e,t,n),!0}catch(r){return!1}}})},function(e,t,n){var i=n(8),r=n(51).f,o=n(12);i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(o(e),t);return n&&!n.configurable?!1:delete e[t]}})},function(e,t,n){"use strict";var i=n(8),r=n(12),o=function(e){this._t=r(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(131)(o,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){function i(e,t){var n,a,c=arguments.length<3?e:arguments[2];return u(e)===c?e[t]:(n=r.f(e,t))?s(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:l(a=o(e))?i(a,t,c):void 0}var r=n(51),o=n(59),s=n(5),a=n(8),l=n(13),u=n(12);a(a.S,"Reflect",{get:i})},function(e,t,n){var i=n(51),r=n(8),o=n(12);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(o(e),t)}})},function(e,t,n){var i=n(8),r=n(59),o=n(12);i(i.S,"Reflect",{getPrototypeOf:function(e){return r(o(e))}})},function(e,t,n){var i=n(8);i(i.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var i=n(8),r=n(12),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),o?o(e):!0}})},function(e,t,n){var i=n(8);i(i.S,"Reflect",{ownKeys:n(244)})},function(e,t,n){var i=n(50),r=n(43),o=n(12),s=n(4).Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(8),r=n(12),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return o&&o(e),!0}catch(t){return!1}}})},function(e,t,n){function i(e,t,n){var l,f,d=arguments.length<4?e:arguments[3],p=o.f(c(e),t);if(!p){if(h(f=s(e)))return i(f,t,n,d);p=u(0)}return a(p,"value")?p.writable!==!1&&h(d)?(l=o.f(d,t)||u(0),l.value=n,r.f(d,t,l),!0):!1:void 0===p.set?!1:(p.set.call(d,n),!0)}var r=n(11),o=n(51),s=n(59),a=n(5),l=n(8),u=n(17),c=n(12),h=n(13);l(l.S,"Reflect",{set:i})},function(e,t,n){var i=n(8),r=n(73);r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(n){return!1}}})},function(e,t,n){"use strict";var i=n(8),r=n(36)(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(187)("includes")},function(e,t,n){"use strict";var i=n(8),r=n(128)(!0);i(i.P,"String",{at:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(8),r=n(251);i(i.P,"String",{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){var i=n(37),r=n(92),o=n(35);e.exports=function(e,t,n,s){var a=String(o(e)),l=a.length,u=void 0===n?" ":String(n),c=i(t);if(l>=c||""==u)return a;var h=c-l,f=r.call(u,Math.ceil(h/u.length));return f.length>h&&(f=f.slice(0,h)),s?f+a:a+f}},function(e,t,n){"use strict";var i=n(8),r=n(251);i(i.P,"String",{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(83)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(83)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var i=n(8),r=n(35),o=n(37),s=n(135),a=n(197),l=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(131)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),i(i.P,"String",{matchAll:function(e){if(r(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in l?String(e.flags):a.call(e),i=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=o(e.lastIndex),new u(i,t)}})},function(e,t,n){n(27)("asyncIterator")},function(e,t,n){n(27)("observable")},function(e,t,n){var i=n(8),r=n(244),o=n(32),s=n(51),a=n(164);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=o(e),i=s.f,l=r(n),u={},c=0;l.length>c;)a(u,t=l[c++],i(n,t));return u}})},function(e,t,n){var i=n(8),r=n(260)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var i=n(30),r=n(32),o=n(44).f;e.exports=function(e){return function(t){for(var n,s=r(t),a=i(s),l=a.length,u=0,c=[];l>u;)o.call(s,n=a[u++])&&c.push(e?[n,s[n]]:s[n]);return c}}},function(e,t,n){var i=n(8),r=n(260)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},function(e,t,n){"use strict";var i=n(8),r=n(58),o=n(21),s=n(11);n(6)&&i(i.P+n(263),"Object",{__defineGetter__:function(e,t){s.f(r(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){e.exports=n(28)||!n(7)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(4)[e]})},function(e,t,n){"use strict";var i=n(8),r=n(58),o=n(21),s=n(11);n(6)&&i(i.P+n(263),"Object",{__defineSetter__:function(e,t){s.f(r(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var i=n(8),r=n(58),o=n(16),s=n(59),a=n(51).f;n(6)&&i(i.P+n(263),"Object",{__lookupGetter__:function(e){var t,n=r(this),i=o(e,!0);do if(t=a(n,i))return t.get;while(n=s(n))}})},function(e,t,n){"use strict";var i=n(8),r=n(58),o=n(16),s=n(59),a=n(51).f;n(6)&&i(i.P+n(263),"Object",{__lookupSetter__:function(e){var t,n=r(this),i=o(e,!0);do if(t=a(n,i))return t.set;while(n=s(n))}})},function(e,t,n){var i=n(8);i(i.P+i.R,"Map",{toJSON:n(268)("Map")})},function(e,t,n){var i=n(75),r=n(269);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(206);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){var i=n(8);i(i.P+i.R,"Set",{toJSON:n(268)("Set")})},function(e,t,n){var i=n(8);i(i.S,"System",{global:n(4)})},function(e,t,n){var i=n(8),r=n(34);i(i.S,"Error",{isError:function(e){return"Error"===r(e)}})},function(e,t,n){var i=n(8);i(i.S,"Math",{iaddh:function(e,t,n,i){var r=e>>>0,o=t>>>0,s=n>>>0;return o+(i>>>0)+((r&s|(r|s)&~(r+s>>>0))>>>31)|0}})},function(e,t,n){var i=n(8);i(i.S,"Math",{isubh:function(e,t,n,i){var r=e>>>0,o=t>>>0,s=n>>>0;return o-(i>>>0)-((~r&s|~(r^s)&r-s>>>0)>>>31)|0}})},function(e,t,n){var i=n(8);i(i.S,"Math",{imulh:function(e,t){var n=65535,i=+e,r=+t,o=i&n,s=r&n,a=i>>16,l=r>>16,u=(a*s>>>0)+(o*s>>>16);return a*l+(u>>16)+((o*l>>>0)+(u&n)>>16)}})},function(e,t,n){var i=n(8);i(i.S,"Math",{umulh:function(e,t){var n=65535,i=+e,r=+t,o=i&n,s=r&n,a=i>>>16,l=r>>>16,u=(a*s>>>0)+(o*s>>>16);return a*l+(u>>>16)+((o*l>>>0)+(u&n)>>>16)}})},function(e,t,n){var i=n(278),r=n(12),o=i.key,s=i.set;i.exp({defineMetadata:function(e,t,n,i){s(e,t,r(n),o(i))}})},function(e,t,n){var i=n(211),r=n(8),o=n(23)("metadata"),s=o.store||(o.store=new(n(215))),a=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}return o},l=function(e,t,n){var i=a(t,n,!1);return void 0===i?!1:i.has(e)},u=function(e,t,n){var i=a(t,n,!1);return void 0===i?void 0:i.get(e)},c=function(e,t,n,i){a(n,i,!0).set(e,t)},h=function(e,t){var n=a(e,t,!1),i=[];return n&&n.forEach(function(e,t){i.push(t)}),i},f=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},d=function(e){r(r.S,"Reflect",e)};e.exports={store:s,map:a,has:l,get:u,set:c,keys:h,key:f,exp:d}},function(e,t,n){var i=n(278),r=n(12),o=i.key,s=i.map,a=i.store;i.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),i=s(r(t),n,!1);if(void 0===i||!i["delete"](e))return!1;if(i.size)return!0;var l=a.get(t);return l["delete"](n),!!l.size||a["delete"](t)}})},function(e,t,n){var i=n(278),r=n(12),o=n(59),s=i.has,a=i.get,l=i.key,u=function(e,t,n){var i=s(e,t,n);if(i)return a(e,t,n);var r=o(t);return null!==r?u(e,r,n):void 0};i.exp({getMetadata:function(e,t){return u(e,r(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,n){var i=n(214),r=n(269),o=n(278),s=n(12),a=n(59),l=o.keys,u=o.key,c=function(e,t){var n=l(e,t),o=a(e);if(null===o)return n;var s=c(o,t);return s.length?n.length?r(new i(n.concat(s))):s:n};o.exp({getMetadataKeys:function(e){return c(s(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){var i=n(278),r=n(12),o=i.get,s=i.key;i.exp({getOwnMetadata:function(e,t){return o(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var i=n(278),r=n(12),o=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(e){return o(r(e),arguments.length<2?void 0:s(arguments[1]))}})},function(e,t,n){var i=n(278),r=n(12),o=n(59),s=i.has,a=i.key,l=function(e,t,n){var i=s(e,t,n);if(i)return!0;var r=o(t);return null!==r?l(e,r,n):!1};i.exp({hasMetadata:function(e,t){return l(e,r(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var i=n(278),r=n(12),o=i.has,s=i.key;i.exp({hasOwnMetadata:function(e,t){return o(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var i=n(278),r=n(12),o=n(21),s=i.key,a=i.set;i.exp({metadata:function(e,t){return function(n,i){a(e,t,(void 0!==i?r:o)(n),s(i))}}})},function(e,t,n){var i=n(8),r=n(209)(),o=n(4).process,s="process"==n(34)(o);i(i.G,{asap:function(e){var t=s&&o.domain;r(t?t.bind(e):e)}})},function(e,t,n){"use strict";var i=n(8),r=n(4),o=n(9),s=n(209)(),a=n(25)("observable"),l=n(21),u=n(12),c=n(90),h=n(210),f=n(10),d=n(206),p=d.RETURN,g=function(e){return null==e?void 0:l(e)},v=function(e){var t=e._c;t&&(e._c=void 0,t())},m=function(e){return void 0===e._o},y=function(e){m(e)||(e._o=void 0,v(e))},w=function(e,t){u(e),this._c=void 0,this._o=e,e=new x(this);try{var n=t(e),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:l(n),this._c=n)}catch(r){return void e.error(r)}m(this)&&v(this)};w.prototype=h({},{unsubscribe:function(){y(this)}});var x=function(e){this._s=e};x.prototype=h({},{next:function(e){var t=this._s;if(!m(t)){var n=t._o;try{var i=g(n.next);if(i)return i.call(n,e)}catch(r){try{y(t)}finally{throw r}}}},error:function(e){var t=this._s;if(m(t))throw e;var n=t._o;t._o=void 0;try{var i=g(n.error);if(!i)throw e;e=i.call(n,e)}catch(r){try{v(t)}finally{throw r}}return v(t),e},complete:function(e){var t=this._s;if(!m(t)){var n=t._o;t._o=void 0;try{var i=g(n.complete);e=i?i.call(n,e):void 0}catch(r){try{v(t)}finally{throw r}}return v(t),e}}});var S=function(e){c(this,S,"Observable","_f")._f=l(e)};h(S.prototype,{subscribe:function(e){return new w(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||r.Promise)(function(n,i){l(e);var r=t.subscribe({next:function(t){try{return e(t)}catch(n){i(n),r.unsubscribe()}},error:i,complete:n})})}}),h(S,{from:function(e){var t="function"==typeof this?this:S,n=g(u(e)[a]);if(n){var i=u(n.call(e));return i.constructor===t?i:new t(function(e){return i.subscribe(e)})}return new t(function(t){var n=!1;return s(function(){if(!n){try{if(d(e,!1,function(e){return t.next(e),n?p:void 0})===p)return}catch(i){if(n)throw i;return void t.error(i)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);t>e;)n[e]=arguments[e++];return new("function"==typeof this?this:S)(function(e){var t=!1;return s(function(){if(!t){for(var i=0;i<n.length;++i)if(e.next(n[i]),t)return;e.complete()}}),function(){t=!0}})}}),f(S.prototype,a,function(){return this}),i(i.G,{Observable:S}),n(193)("Observable")},function(e,t,n){var i=n(4),r=n(8),o=n(78),s=n(290),a=i.navigator,l=!!a&&/MSIE .\./.test(a.userAgent),u=function(e){return l?function(t,n){return e(o(s,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};r(r.G+r.B+r.F*l,{setTimeout:u(i.setTimeout),setInterval:u(i.setInterval)})},function(e,t,n){"use strict";var i=n(291),r=n(78),o=n(21);e.exports=function(){for(var e=o(this),t=arguments.length,n=Array(t),s=0,a=i._,l=!1;t>s;)(n[s]=arguments[s++])===a&&(l=!0);return function(){var i,o=this,s=arguments.length,u=0,c=0;if(!l&&!s)return r(e,n,o);if(i=n.slice(),l)for(;t>u;u++)i[u]===a&&(i[u]=arguments[c++]);for(;s>c;)i.push(arguments[c++]);return r(e,i,o)}}},function(e,t,n){e.exports=n(4)},function(e,t,n){var i=n(8),r=n(208);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){for(var i=n(194),r=n(18),o=n(4),s=n(10),a=n(130),l=n(25),u=l("iterator"),c=l("toStringTag"),h=a.Array,f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;5>d;d++){var p,g=f[d],v=o[g],m=v&&v.prototype;if(m){m[u]||s(m,u,h),m[c]||s(m,c,g),a[g]=h;for(p in i)m[p]||r(m,p,i[p],!0)}}},function(e,t,n){(function(t,n){!function(t){"use strict";function i(e,t,n,i){var r=Object.create((t||o).prototype),s=new p(i||[]);return r._invoke=h(e,n,s),r}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}function o(){}function s(){}function a(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){this.arg=e}function c(e){function t(n,i,o,s){var a=r(e[n],e,i);if("throw"!==a.type){var l=a.arg,c=l.value;return c instanceof u?Promise.resolve(c.arg).then(function(e){t("next",e,o,s)},function(e){t("throw",e,o,s)}):Promise.resolve(c).then(function(e){l.value=e,o(l)},s)}s(a.arg)}function i(e,n){function i(){return new Promise(function(i,r){t(e,n,i,r)})}return o=o?o.then(i,i):i()}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var o;this._invoke=i}function h(e,t,n){var i=T;return function(o,s){if(i===P)throw new Error("Generator is already running");if(i===R){if("throw"===o)throw s;return v()}for(;;){var a=n.delegate;if(a){if("return"===o||"throw"===o&&a.iterator[o]===m){n.delegate=null;var l=a.iterator["return"];if(l){var u=r(l,a.iterator,s);if("throw"===u.type){o="throw",s=u.arg;continue}}if("return"===o)continue}var u=r(a.iterator[o],a.iterator,s);if("throw"===u.type){n.delegate=null,o="throw",s=u.arg;continue}o="next",s=m;var c=u.arg;if(!c.done)return i=E,c;n[a.resultName]=c.value,n.next=a.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=s;else if("throw"===o){if(i===T)throw i=R,s;n.dispatchException(s)&&(o="next",s=m)}else"return"===o&&n.abrupt("return",s);i=P;var u=r(e,t,n);if("normal"===u.type){i=n.done?R:E;var c={value:u.arg,done:n.done};if(u.arg!==O)return c;n.delegate&&"next"===o&&(s=m)}else"throw"===u.type&&(i=R,o="throw",s=u.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function g(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(y.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=m,r.done=!0,r};return i.next=i}}return{next:v}}function v(){return{value:m,done:!0}}var m,y=Object.prototype.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},x=w.iterator||"@@iterator",S=w.toStringTag||"@@toStringTag",b="object"==typeof e,_=t.regeneratorRuntime;if(_)return void(b&&(e.exports=_));_=t.regeneratorRuntime=b?e.exports:{},_.wrap=i;var T="suspendedStart",E="suspendedYield",P="executing",R="completed",O={},C=a.prototype=o.prototype;s.prototype=C.constructor=a,a.constructor=s,a[S]=s.displayName="GeneratorFunction",_.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===s||"GeneratorFunction"===(t.displayName||t.name):!1},_.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(C),e},_.awrap=function(e){return new u(e)},l(c.prototype),_.async=function(e,t,n,r){var o=new c(i(e,t,n,r));return _.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},l(C),C[x]=function(){return this},C[S]="Generator",C.toString=function(){return"[object Generator]"},_.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},_.values=g,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,n.next=t,!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=y.call(r,"catchLoc"),a=y.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&y.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?this.next=r.finallyLoc:this.complete(o),O},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),O}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;d(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:g(e),resultName:t,nextLoc:n},O}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),n(295))},function(e,t){function n(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&i())}function i(){if(!u){var e=setTimeout(n);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function o(){}var s,a=e.exports={},l=[],u=!1,c=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new r(e,t)),1!==l.length||u||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){n(297),e.exports=n(9).RegExp.escape},function(e,t,n){var i=n(8),r=n(298)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(e){return r(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(300),o=(i(r),n(301)),s=(i(o),n(305)),a=i(s),l=n(316),u=(i(l),n(307),n(318)),c=new a["default"]({id:"player"});(0,u.multipleChoiceBehaviour)(c),(0,u.queryStringBehaviour)(c),(0,u.clipBoardBehaviour)(c),(0,u.dragDropBehaviour)(c)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;//! openseadragon 2.2.0
//! Built on 2016-05-26
//! Git commit: v2.2.0-1-a81f3a9
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
window.OpenSeadragon=window.OpenSeadragon||function(e){return new OpenSeadragon.Viewer(e)},__WEBPACK_AMD_DEFINE_RESULT__=function(){return window.OpenSeadragon}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),function(e){e.version={versionStr:"2.2.0",major:parseInt("2",10),minor:parseInt("2",10),revision:parseInt("0",10)};var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,i=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.type=function(e){return null===e||void 0===e?String(e):t[n.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==OpenSeadragon.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!i.call(t,"constructor")&&!i.call(t.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var r in t)n=r;return void 0===n||i.call(t,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=function(){var t=document.createElement("canvas");return!(!e.isFunction(t.getContext)||!t.getContext("2d"))}(),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(n){t=!0}return t},e.pixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}return 1}()}(OpenSeadragon),function($){function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}$.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=arguments.length,l=!1,u=1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},u=2),"object"==typeof s||OpenSeadragon.isFunction(s)||(s={}),a===u&&(s=this,--u);a>u;u++)if(e=arguments[u],null!==e||void 0!==e)for(t in e)n=s[t],i=e[t],s!==i&&(l&&i&&(OpenSeadragon.isPlainObject(i)||(r=OpenSeadragon.isArray(i)))?(r?(r=!1,o=n&&OpenSeadragon.isArray(n)?n:[]):o=n&&OpenSeadragon.isPlainObject(n)?n:{},s[t]=OpenSeadragon.extend(l,o,i)):void 0!==i&&(s[t]=i));return s},$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,pixelsPerWheelLine:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,degrees:0,opacity:1,compositeOperation:null,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var n=arguments;return void 0===n&&(n=[]),t.apply(e,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,n,i=new $.Point;for(e=$.getElement(e),t="fixed"==$.getElementStyle(e).position,n=getOffsetParent(e,t);n;)i.x+=e.offsetLeft,i.y+=e.offsetTop,t&&(i=i.plus($.getPageScroll())),e=n,t="fixed"==$.getElementStyle(e).position,n=getOffsetParent(e,t);return i},getElementOffset:function(e){e=$.getElement(e);var t,n,i=e&&e.ownerDocument,r={top:0,left:0};return i?(t=i.documentElement,"undefined"!=typeof e.getBoundingClientRect&&(r=e.getBoundingClientRect()),n=i==i.window?i:9===i.nodeType?i.defaultView||i.parentWindow:!1,new $.Point(r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0),r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return e=$.getElement(e),e.currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},getCssPropertyWithVendorPrefix:function(e){var t={};return $.getCssPropertyWithVendorPrefix=function(e){if(void 0!==t[e])return t[e];var n=document.createElement("div").style,i=null;if(void 0!==n[e])i=e;else for(var r=["Webkit","Moz","MS","O","webkit","moz","ms","o"],o=$.capitalizeFirstLetter(e),s=0;s<r.length;s++){var a=r[s]+o;if(void 0!==n[a]){i=a;break}}return t[e]=i,i},$.getCssPropertyWithVendorPrefix(e)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},pointInElement:function(e,t){e=$.getElement(e);var n=$.getElementOffset(e),i=$.getElementSize(e);return t.x>=n.x&&t.x<n.x+i.x&&t.y<n.y+i.y&&t.y>=n.y},getEvent:function(e){return e?$.getEvent=function(e){return e}:$.getEvent=function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if("undefined"!=typeof window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var n=$.getPageScroll();if(n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,n=$.getPageScroll(),n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(e){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),n=t.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),n=null;return n=$.makeNeutralElement("span"),n.style.display="inline-block",t.onload=function(){n.style.width=n.style.width||t.width+"px",n.style.height=n.style.height||t.height+"px",t.onload=null,t=null},t.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",n}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,n){var i,r;e=$.getElement(e),n&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=1>t?t:"":1>t?(i=Math.round(100*t),r="alpha(opacity="+i+")",e.style.filter=r):e.style.filter=""},setElementTouchActionNone:function(e){e=$.getElement(e),"undefined"!=typeof e.style.touchAction?e.style.touchAction="none":"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){e=$.getElement(e),e.className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var i,r,o=n?n:0;if(!e)throw new TypeError;if(r=e.length,0===r||o>=r)return-1;for(0>o&&(o=r-Math.abs(o)),i=o;r>i;i++)if(e[i]===t)return i;return-1},this.indexOf(e,t,n)},removeClass:function(e,t){var n,i,r=[];for(e=$.getElement(e),n=e.className.split(/\s+/),i=0;i<n.length;i++)n[i]&&n[i]!==t&&r.push(n[i]);e.className=r.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,n,i){e=$.getElement(e),e.addEventListener(t,n,i)};if(window.attachEvent)return function(e,t,n,i){e=$.getElement(e),e.attachEvent("on"+t,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,n,i){e=$.getElement(e),e.removeEventListener(t,n,i)};if(window.detachEvent)return function(e,t,n,i){e=$.getElement(e),e.detachEvent("on"+t,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){e=$.getEvent(e),e.preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){e=$.getEvent(e),e.cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){e=$.getEvent(e),e.stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){e=$.getEvent(e),e.cancelBubble=!0},$.stopEvent(e)},createCallback:function(e,t){var n,i=[];for(n=2;n<arguments.length;n++)i.push(arguments[n]);return function(){var n,r=i.concat([]);for(n=0;n<arguments.length;n++)r.push(arguments[n]);return t.apply(e,r)}},getUrlParameter:function(e){var t=URLPARAMS[e];return t?t:null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(n){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,t,n){var i;$.isPlainObject(e)&&(t=e.success,n=e.error,i=e.withCredentials,e=e.url);var r=$.getUrlProtocol(e),o=$.createAjaxRequest("file:"===r);if(!$.isFunction(t))throw new Error("makeAjaxRequest requires a success callback");o.onreadystatechange=function(){4==o.readyState&&(o.onreadystatechange=function(){},200===o.status||0===o.status&&"http:"!==r&&"https:"!==r?t(o):($.console.log("AJAX request returned %d: %s",o.status,e),$.isFunction(n)&&n(o)))},i&&(o.withCredentials=!0);try{o.open("GET",e,!0),o.send(null)}catch(s){var a=s.message,l=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(l&&"undefined"!=typeof s.number&&-2147024891==s.number&&(a+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",s.name,a),o.onreadystatechange=function(){},window.XDomainRequest){var u=new XDomainRequest;if(u){u.onload=function(e){$.isFunction(t)&&t({responseText:u.responseText,status:200,statusText:"OK"})},u.onerror=function(e){$.isFunction(n)&&n({responseText:u.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{u.open("GET",e),u.send()}catch(c){$.isFunction(n)&&n(o,s)}}}else $.isFunction(n)&&n(o,s)}},jsonp:function(e){var t,n=e.url,i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=e.callbackName||"openseadragon"+$.now(),o=window[r],s="$1"+r+"$2",a=e.param||"callback",l=e.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,s),n+=(/\?/.test(n)?"&":"?")+a+"="+r,window[r]=function(e){if(o)window[r]=o;else try{delete window[r]}catch(t){}l&&$.isFunction(l)&&l(e)},t=document.createElement("script"),void 0===e.async&&!1===e.async||(t.async="async"),e.scriptCharset&&(t.charset=e.scriptCharset),t.src=n,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,i&&t.parentNode&&i.removeChild(t),t=void 0)},i.insertBefore(t,i.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){var t,n=null;return t=new DOMParser,n=t.parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return e=e?e:"",!!FILEFORMATS[e.toLowerCase()]}}),$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};!function(){var e,t=(navigator.appName,navigator.appVersion),n=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(n.substring(n.indexOf("MSIE")+5,n.indexOf(";",n.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(n.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(n.substring(n.indexOf("Firefox")+8))):n.indexOf("Safari")>=0?($.Browser.vendor=n.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(n.substring(n.substring(0,n.indexOf("Safari")).lastIndexOf("/")+1,n.indexOf("Safari")))):(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(t)}var i,r,o,s=window.location.search.substring(1),a=s.split("&");for(o=0;o<a.length;o++)i=a[o],r=i.indexOf("="),r>0&&(URLPARAMS[i.substring(0,r)]=decodeURIComponent(i.substring(r+1)));$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}();var nullfunction=function(e){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&n)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return n.apply(e,arguments)};else{var i,r=[],o=[],s=0;$.requestAnimationFrame=function(e){return r.push([++s,e]),i||(i=setInterval(function(){if(r.length){var e=$.now(),t=o;for(o=r,r=t;o.length;)o.shift()[1](e)}else clearInterval(i),i=void 0},20)),s},$.cancelAnimationFrame=function(e){var t,n;for(t=0,n=r.length;n>t;t+=1)if(r[t][0]===e)return void r.splice(t,1);for(t=0,n=o.length;n>t;t+=1)if(o[t][0]===e)return void o.splice(t,1)}}}(window)}(OpenSeadragon),function(e){var t={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.fullscreenElement},t.requestFullScreen=function(e){return e.requestFullscreen()},t.exitFullScreen=function(){document.exitFullscreen()},t.fullScreenEventName="fullscreenchange",t.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.msFullscreenElement},t.requestFullScreen=function(e){return e.msRequestFullscreen()},t.exitFullScreen=function(){document.msExitFullscreen()},t.fullScreenEventName="MSFullscreenChange",t.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitFullscreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullscreen()},t.exitFullScreen=function(){document.webkitExitFullscreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullScreen()},t.exitFullScreen=function(){document.webkitCancelFullScreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.mozFullScreenElement},t.requestFullScreen=function(e){return e.mozRequestFullScreen()},t.exitFullScreen=function(){document.mozCancelFullScreen()},t.fullScreenEventName="mozfullscreenchange",t.fullScreenErrorEventName="mozfullscreenerror"),t.isFullScreen=function(){return null!==t.getFullScreenElement()},t.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),t.exitFullScreen()},e.extend(e,t)}(OpenSeadragon),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(e,t,n,i){var r=this;i=i||1;var o=0,s=function(n){o++,o===i&&r.removeHandler(e,s),t(n)};this.addHandler(e,s,n)},addHandler:function(t,n,i){var r=this.events[t];r||(this.events[t]=r=[]),n&&e.isFunction(n)&&(r[r.length]={handler:n,userData:i||null})},removeHandler:function(t,n){var i,r=this.events[t],o=[];if(r&&e.isArray(r)){for(i=0;i<r.length;i++)r[i].handler!==n&&o.push(r[i]);this.events[t]=o}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,n){var i,r=t.length;for(i=0;r>i;i++)t[i]&&(n.eventSource=e,n.userData=t[i].userData,t[i].handler(n))}):null},raiseEvent:function(e,t){var n=this.getHandler(e);n&&(t||(t={}),n(this,t))}}}(OpenSeadragon),function(e){function t(t){var n,i=ge[t.hash],r=i.activePointersLists.length;for(n=0;r>n;n++)i.activePointersLists[n].captureCount>0&&(e.removeEvent(e.MouseTracker.captureElement,"mousemove",i.mousemovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"mouseup",i.mouseupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",i.pointermovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",i.pointerupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchmove",i.touchmovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchend",i.touchendcaptured,!0),i.activePointersLists[n].captureCount=0);for(n=0;r>n;n++)i.activePointersLists.pop()}function n(n){var i,r,o=ge[n.hash];if(!o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)i=e.MouseTracker.subscribeEvents[r],e.addEvent(n.element,i,o[i],!1);t(n),o.tracking=!0}}function i(n){var i,r,o=ge[n.hash];if(o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)i=e.MouseTracker.subscribeEvents[r],e.removeEvent(n.element,i,o[i],!1);t(n),o.tracking=!1}}function r(t,n){var i=ge[t.hash];if("pointerevent"===n)return{upName:e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:i.pointerupcaptured,moveName:e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:i.pointermovecaptured};if("mouse"===n)return{upName:"mouseup",upHandler:i.mouseupcaptured,moveName:"mousemove",moveHandler:i.mousemovecaptured};if("touch"===n)return{upName:"touchend",upHandler:i.touchendcaptured,moveName:"touchmove",moveHandler:i.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function o(t,n,i){var o,s=t.getActivePointersListByType(n);s.captureCount+=i||1,1===s.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.setCapture(!0):(o=r(t,e.MouseTracker.havePointerEvents?"pointerevent":n),ve&&de(window.top)&&e.addEvent(window.top,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0)))}function s(t,n,i){var o,s=t.getActivePointersListByType(n);s.captureCount-=i||1,0===s.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.releaseCapture():(o=r(t,e.MouseTracker.havePointerEvents?"pointerevent":n),ve&&de(window.top)&&e.removeEvent(window.top,o.upName,o.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0)))}function a(t){var n;if(e.MouseTracker.unprefixedPointerEvents)n=t.pointerType;else switch(t.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function l(t){return e.getMousePosition(t)}function u(e,t){return c(l(e),t)}function c(t,n){var i=e.getElementOffset(n);return t.minus(i)}function h(t,n){return new e.Point((t.x+n.x)/2,(t.y+n.y)/2)}function f(t,n){t.clickHandler&&e.cancelEvent(n)}function d(t,n){t.dblClickHandler&&e.cancelEvent(n)}function p(t,n){var i;t.keyDownHandler&&(n=e.getEvent(n),i=t.keyDownHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function g(t,n){var i;t.keyUpHandler&&(n=e.getEvent(n),i=t.keyUpHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function v(t,n){var i;t.keyHandler&&(n=e.getEvent(n),i=t.keyHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function m(t,n){var i;t.focusHandler&&(n=e.getEvent(n),i=t.focusHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i===!1&&e.cancelEvent(n))}function y(t,n){var i;t.blurHandler&&(n=e.getEvent(n),i=t.blurHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i===!1&&e.cancelEvent(n))}function w(e,t){S(e,t,t)}function x(t,n){n=e.getEvent(n);var i={target:n.target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==e.MouseTracker.wheelEventName?i.deltaY=-1/e.DEFAULT_SETTINGS.pixelsPerWheelLine*n.wheelDelta:i.deltaY=n.detail,S(t,i,n)}function S(t,n,i){var r,o=0;o=n.deltaY<0?1:-1,t.scrollHandler&&(r=t.scrollHandler({eventSource:t,pointerType:"mouse",position:u(n,t.element),scroll:o,shift:n.shiftKey,isTouchEvent:!1,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),r===!1&&e.cancelEvent(i))}function b(e,t){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e}function _(t,n){n=e.getEvent(n),E(t,n)}function T(t,n){n=e.getEvent(n),n.currentTarget===n.relatedTarget||b(n.currentTarget,n.relatedTarget)||E(t,n)}function E(t,n){var i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()};se(t,n,[i])}function P(t,n){n=e.getEvent(n),O(t,n)}function R(t,n){n=e.getEvent(n),n.currentTarget===n.relatedTarget||b(n.currentTarget,n.relatedTarget)||O(t,n)}function O(t,n){var i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()};ae(t,n,[i])}function C(t){return e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?1===t?0:2===t?2:4===t?1:-1:t}function k(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()},le(t,n,[i],C(n.button))&&(e.stopEvent(n),o(t,"mouse")),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler)&&e.cancelEvent(n)}function I(e,t){A(e,t)}function F(t,n){A(t,n),e.stopEvent(n)}function A(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()},ue(t,n,[i],C(n.button))&&s(t,"mouse")}function M(e,t){B(e,t)}function D(t,n){B(t,n),e.stopEvent(n)}function B(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()},ce(t,n,[i])}function L(e,t,n){var i,r=n.getLength(),o=[];for(i=0;r>i;i++)o.push(n.getByIndex(i));o.length>0&&(ue(e,t,o,0),n.captureCount=1,s(e,"touch"),ae(e,t,o))}function z(t,n){var i,r,s,a,u=n.changedTouches.length,c=[],h=t.getActivePointersListByType("touch");for(i=e.now(),h.getLength()>n.touches.length-u&&(e.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),L(t,n,h)),r=0;u>r;r++)c.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:l(n.changedTouches[r]),currentTime:i});for(se(t,n,c),r=0;r<pe.length;r++)if(pe[r]!==t&&pe[r].isTracking()&&b(pe[r].element,t.element)){for(a=[],s=0;u>s;s++)a.push({id:n.changedTouches[s].identifier,type:"touch",currentPos:l(n.changedTouches[s]),currentTime:i});se(pe[r],n,a)}le(t,n,c,0)&&(e.stopEvent(n),o(t,"touch",u)),e.cancelEvent(n)}function N(e,t){j(e,t)}function H(t,n){j(t,n),e.stopEvent(n)}function j(t,n){var i,r,o,a,u=n.changedTouches.length,c=[];for(i=e.now(),r=0;u>r;r++)c.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:l(n.changedTouches[r]),currentTime:i});for(ue(t,n,c,0)&&s(t,"touch",u),ae(t,n,c),r=0;r<pe.length;r++)if(pe[r]!==t&&pe[r].isTracking()&&b(pe[r].element,t.element)){for(a=[],o=0;u>o;o++)a.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:l(n.changedTouches[o]),currentTime:i});ae(pe[r],n,a)}e.cancelEvent(n)}function V(e,t){U(e,t)}function W(t,n){U(t,n),e.stopEvent(n)}function U(t,n){var i,r=n.changedTouches.length,o=[];for(i=0;r>i;i++)o.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:l(n.changedTouches[i]),currentTime:e.now()});ce(t,n,o),e.cancelEvent(n)}function $(e,t){var n=(t.changedTouches.length,e.getActivePointersListByType("touch"));L(e,t,n)}function q(e,t){return t.stopPropagation(),t.preventDefault(),!1}function G(e,t){return t.stopPropagation(),t.preventDefault(),!1}function Z(t,n){var i;n.currentTarget===n.relatedTarget||b(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},se(t,n,[i]))}function X(t,n){var i;n.currentTarget===n.relatedTarget||b(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},ae(t,n,[i]))}function Y(t,n){var i;i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},le(t,n,[i],n.button)&&(e.stopEvent(n),o(t,i.type)),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.cancelEvent(n)}function Q(e,t){J(e,t)}function K(t,n){var i=t.getActivePointersListByType(a(n));i.getById(n.pointerId)&&J(t,n),e.stopEvent(n)}function J(t,n){var i;i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()
},ue(t,n,[i],n.button)&&s(t,i.type)}function ee(e,t){ne(e,t)}function te(t,n){var i=t.getActivePointersListByType(a(n));i.getById(n.pointerId)&&ne(t,n),e.stopEvent(n)}function ne(t,n){var i;i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},ce(t,n,[i])}function ie(e,t){var n;n={id:t.pointerId,type:a(t)},he(e,t,[n])}function re(e,t){return t.hasOwnProperty("isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function oe(e,t){var n,i;return e.getById(t.id)?(n=e.removeById(t.id),t.hasOwnProperty("isPrimary")||(i=e.getPrimary(),i||(i=e.getByIndex(0),i&&(i.isPrimary=!0)))):n=e.getLength(),n}function se(t,n,i){var r,o,s,a,l=t.getActivePointersListByType(i[0].type),u=i.length;for(r=0;u>r;r++)o=i[r],s=l.getById(o.id),s?(s.insideElement=!0,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime,o=s):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,re(l,o)),t.enterHandler&&(a=t.enterHandler({eventSource:t,pointerType:o.type,position:c(o.currentPos,t.element),buttons:l.buttons,pointers:t.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==l.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),a===!1&&e.cancelEvent(n))}function ae(t,n,i){var r,o,s,a,l=(ge[t.hash],t.getActivePointersListByType(i[0].type)),u=i.length;for(r=0;u>r;r++)o=i[r],s=l.getById(o.id),s&&(s.captured?(s.insideElement=!1,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime):oe(l,s),o=s),t.exitHandler&&(a=t.exitHandler({eventSource:t,pointerType:o.type,position:c(o.currentPos,t.element),buttons:l.buttons,pointers:t.getActivePointerCount(),insideElementPressed:s?s.insideElementPressed:!1,buttonDownAny:0!==l.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),a===!1&&e.cancelEvent(n))}function le(t,n,i,r){var o,s,a,l,u=ge[t.hash],f=t.getActivePointersListByType(i[0].type),d=i.length;if("undefined"!=typeof n.buttons?f.buttons=n.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===r?f.buttons+=1:1===r?f.buttons+=4:2===r?f.buttons+=2:3===r?f.buttons+=8:4===r?f.buttons+=16:5===r&&(f.buttons+=32):0===r?f.buttons|=1:1===r?f.buttons|=4:2===r?f.buttons|=2:3===r?f.buttons|=8:4===r?f.buttons|=16:5===r&&(f.buttons|=32),0!==r)return t.nonPrimaryPressHandler&&(o=t.nonPrimaryPressHandler({eventSource:t,pointerType:i[0].type,position:c(i[0].currentPos,t.element),button:r,buttons:f.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),!1;for(s=0;d>s;s++)a=i[s],l=f.getById(a.id),l?(l.captured=!0,l.insideElementPressed=!0,l.insideElement=!0,l.contactPos=a.currentPos,l.contactTime=a.currentTime,l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=a.currentPos,l.currentTime=a.currentTime,a=l):(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,re(f,a)),f.contacts++,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,a),1===f.contacts?t.pressHandler&&(o=t.pressHandler({eventSource:t,pointerType:a.type,position:c(a.contactPos,t.element),buttons:f.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)):2===f.contacts&&t.pinchHandler&&"touch"===a.type&&(u.pinchGPoints=f.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=h(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos));return!0}function ue(t,n,i,r){var o,s,a,l,u,f,d,p=ge[t.hash],g=t.getActivePointersListByType(i[0].type),v=i.length,m=!1,y=!1;if("undefined"!=typeof n.buttons?g.buttons=n.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===r?g.buttons-=1:1===r?g.buttons-=4:2===r?g.buttons-=2:3===r?g.buttons-=8:4===r?g.buttons-=16:5===r&&(g.buttons-=32):0===r?g.buttons^=-2:1===r?g.buttons^=-5:2===r?g.buttons^=-3:3===r?g.buttons^=-9:4===r?g.buttons^=-17:5===r&&(g.buttons^=-33),0!==r)return t.nonPrimaryReleaseHandler&&(o=t.nonPrimaryReleaseHandler({eventSource:t,pointerType:i[0].type,position:c(i[0].currentPos,t.element),button:r,buttons:g.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),!1;for(l=0;v>l;l++)u=i[l],f=g.getById(u.id),f&&(f.captured&&(f.captured=!1,m=!0,y=!0),f.lastPos=f.currentPos,f.lastTime=f.currentTime,f.currentPos=u.currentPos,f.currentTime=u.currentTime,f.insideElement||oe(g,f),s=f.currentPos,a=f.currentTime,y?(g.contacts--,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,f),0===g.contacts?(t.releaseHandler&&(o=t.releaseHandler({eventSource:t,pointerType:f.type,position:c(s,t.element),buttons:g.buttons,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElement,isTouchEvent:"touch"===f.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),t.dragEndHandler&&!f.currentPos.equals(f.contactPos)&&(o=t.dragEndHandler({eventSource:t,pointerType:f.type,position:c(f.currentPos,t.element),speed:f.speed,direction:f.direction,shift:n.shiftKey,isTouchEvent:"touch"===f.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),(t.clickHandler||t.dblClickHandler)&&f.insideElement&&(d=a-f.contactTime<=t.clickTimeThreshold&&f.contactPos.distanceTo(s)<=t.clickDistThreshold,t.clickHandler&&(o=t.clickHandler({eventSource:t,pointerType:f.type,position:c(f.currentPos,t.element),quick:d,shift:n.shiftKey,isTouchEvent:"touch"===f.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),t.dblClickHandler&&d&&(g.clicks++,1===g.clicks?(p.lastClickPos=s,p.dblClickTimeOut=setTimeout(function(){g.clicks=0},t.dblClickTimeThreshold)):2===g.clicks&&(clearTimeout(p.dblClickTimeOut),g.clicks=0,p.lastClickPos.distanceTo(s)<=t.dblClickDistThreshold&&(o=t.dblClickHandler({eventSource:t,pointerType:f.type,position:c(f.currentPos,t.element),shift:n.shiftKey,isTouchEvent:"touch"===f.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),p.lastClickPos=null)))):2===g.contacts&&t.pinchHandler&&"touch"===f.type&&(p.pinchGPoints=g.asArray(),p.lastPinchDist=p.currentPinchDist=p.pinchGPoints[0].currentPos.distanceTo(p.pinchGPoints[1].currentPos),p.lastPinchCenter=p.currentPinchCenter=h(p.pinchGPoints[0].currentPos,p.pinchGPoints[1].currentPos))):t.releaseHandler&&(o=t.releaseHandler({eventSource:t,pointerType:f.type,position:c(s,t.element),buttons:g.buttons,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElement,isTouchEvent:"touch"===f.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)));return m}function ce(t,n,i){var r,o,s,a,l,u,f=ge[t.hash],d=t.getActivePointersListByType(i[0].type),p=i.length;for("undefined"!=typeof n.buttons&&(d.buttons=n.buttons),r=0;p>r;r++)o=i[r],s=d.getById(o.id),s?(o.hasOwnProperty("isPrimary")&&(s.isPrimary=o.isPrimary),s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,re(d,o));t.stopHandler&&"mouse"===i[0].type&&(clearTimeout(t.stopTimeOut),t.stopTimeOut=setTimeout(function(){fe(t,n,i[0].type)},t.stopDelay)),0===d.contacts?t.moveHandler&&(u=t.moveHandler({eventSource:t,pointerType:i[0].type,position:c(i[0].currentPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n)):1===d.contacts?(t.moveHandler&&(s=d.asArray()[0],u=t.moveHandler({eventSource:t,pointerType:s.type,position:c(s.currentPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n)),t.dragHandler&&(s=d.asArray()[0],l=s.currentPos.minus(s.lastPos),u=t.dragHandler({eventSource:t,pointerType:s.type,position:c(s.currentPos,t.element),buttons:d.buttons,delta:l,speed:s.speed,direction:s.direction,shift:n.shiftKey,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n))):2===d.contacts&&(t.moveHandler&&(a=d.asArray(),u=t.moveHandler({eventSource:t,pointerType:a[0].type,position:c(h(a[0].currentPos,a[1].currentPos),t.element),buttons:d.buttons,isTouchEvent:"touch"===a[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n)),t.pinchHandler&&"touch"===i[0].type&&(l=f.pinchGPoints[0].currentPos.distanceTo(f.pinchGPoints[1].currentPos),l!=f.currentPinchDist&&(f.lastPinchDist=f.currentPinchDist,f.currentPinchDist=l,f.lastPinchCenter=f.currentPinchCenter,f.currentPinchCenter=h(f.pinchGPoints[0].currentPos,f.pinchGPoints[1].currentPos),u=t.pinchHandler({eventSource:t,pointerType:"touch",gesturePoints:f.pinchGPoints,lastCenter:c(f.lastPinchCenter,t.element),center:c(f.currentPinchCenter,t.element),lastDistance:f.lastPinchDist,distance:f.currentPinchDist,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n))))}function he(e,t,n){ue(e,t,n,0),ae(e,t,n)}function fe(e,t,n){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:u(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:t,preventDefaultAction:!1,userData:e.userData})}function de(e){try{return e.addEventListener&&e.removeEventListener}catch(t){return!1}}var pe=[],ge={};e.MouseTracker=function(t){pe.push(this);var n=arguments;e.isPlainObject(t)||(t={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=e.getElement(t.element),this.clickTimeThreshold=t.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=t.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=t.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=t.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=t.userData||null,this.stopDelay=t.stopDelay||50,this.enterHandler=t.enterHandler||null,this.exitHandler=t.exitHandler||null,this.pressHandler=t.pressHandler||null,this.nonPrimaryPressHandler=t.nonPrimaryPressHandler||null,this.releaseHandler=t.releaseHandler||null,this.nonPrimaryReleaseHandler=t.nonPrimaryReleaseHandler||null,this.moveHandler=t.moveHandler||null,this.scrollHandler=t.scrollHandler||null,this.clickHandler=t.clickHandler||null,this.dblClickHandler=t.dblClickHandler||null,this.dragHandler=t.dragHandler||null,this.dragEndHandler=t.dragEndHandler||null,this.pinchHandler=t.pinchHandler||null,this.stopHandler=t.stopHandler||null,this.keyDownHandler=t.keyDownHandler||null,this.keyUpHandler=t.keyUpHandler||null,this.keyHandler=t.keyHandler||null,this.focusHandler=t.focusHandler||null,this.blurHandler=t.blurHandler||null;var i=this;ge[this.hash]={click:function(e){f(i,e)},dblclick:function(e){d(i,e)},keydown:function(e){p(i,e)},keyup:function(e){g(i,e)},keypress:function(e){v(i,e)},focus:function(e){m(i,e)},blur:function(e){y(i,e)},wheel:function(e){w(i,e)},mousewheel:function(e){x(i,e)},DOMMouseScroll:function(e){x(i,e)},MozMousePixelScroll:function(e){x(i,e)},mouseenter:function(e){_(i,e)},mouseleave:function(e){P(i,e)},mouseover:function(e){T(i,e)},mouseout:function(e){R(i,e)},mousedown:function(e){k(i,e)},mouseup:function(e){I(i,e)},mouseupcaptured:function(e){F(i,e)},mousemove:function(e){M(i,e)},mousemovecaptured:function(e){D(i,e)},touchstart:function(e){z(i,e)},touchend:function(e){N(i,e)},touchendcaptured:function(e){H(i,e)},touchmove:function(e){V(i,e)},touchmovecaptured:function(e){W(i,e)},touchcancel:function(e){$(i,e)},gesturestart:function(e){q(i,e)},gesturechange:function(e){G(i,e)},pointerover:function(e){Z(i,e)},MSPointerOver:function(e){Z(i,e)},pointerout:function(e){X(i,e)},MSPointerOut:function(e){X(i,e)},pointerdown:function(e){Y(i,e)},MSPointerDown:function(e){Y(i,e)},pointerup:function(e){Q(i,e)},MSPointerUp:function(e){Q(i,e)},pointermove:function(e){ee(i,e)},MSPointerMove:function(e){ee(i,e)},pointercancel:function(e){ie(i,e)},MSPointerCancel:function(e){ie(i,e)},pointerupcaptured:function(e){K(i,e)},pointermovecaptured:function(e){te(i,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},t.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(i(this),this.element=null,e=0;e<pe.length;e++)if(pe[e]===this){pe.splice(e,1);break}ge[this.hash]=null,delete ge[this.hash]},isTracking:function(){return ge[this.hash].tracking},setTracking:function(e){return e?n(this):i(this),this},getActivePointersListByType:function(t){var n,i,r=ge[this.hash],o=r.activePointersLists.length;for(n=0;o>n;n++)if(r.activePointersLists[n].type===t)return r.activePointersLists[n];return i=new e.MouseTracker.GesturePointList(t),r.activePointersLists.push(i),i},getActivePointerCount:function(){var e,t=ge[this.hash],n=t.activePointersLists.length,i=0;for(e=0;n>e;e++)i+=t.activePointersLists[e].getLength();return i},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},e.MouseTracker.gesturePointVelocityTracker=function(){var t=[],n=0,i=0,r=function(e,t){return e.hash.toString()+t.type+t.id.toString()},o=function(){var n,r,o,s,a,l,u=t.length,c=e.now();for(s=c-i,i=c,n=0;u>n;n++)r=t[n],o=r.gPoint,o.direction=Math.atan2(o.currentPos.y-r.lastPos.y,o.currentPos.x-r.lastPos.x),a=r.lastPos.distanceTo(o.currentPos),r.lastPos=o.currentPos,l=1e3*a/(s+1),o.speed=.75*l+.25*o.speed},s=function(s,a){var l=r(s,a);t.push({guid:l,gPoint:a,lastPos:a.currentPos}),1===t.length&&(i=e.now(),n=window.setInterval(o,50))},a=function(e,i){var o,s=r(e,i),a=t.length;for(o=0;a>o;o++)if(t[o].guid===s){t.splice(o,1),a--,0===a&&window.clearInterval(n);break}};return{addPoint:s,removePoint:a}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor==e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.supportsMouseCapture=function(){var t=document.createElement("div");return e.isFunction(t.setCapture)&&e.isFunction(t.releaseCapture)}(),e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",e.MouseTracker.wheelEventName],"DOMMouseScroll"==e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||e.Browser.vendor!==e.BROWSERS.IE)?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),e.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):(e.MouseTracker.havePointerEvents=!1,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?(e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),e.MouseTracker.haveMouseEnter=!0):(e.MouseTracker.subscribeEvents.push("mouseover","mouseout"),e.MouseTracker.haveMouseEnter=!1),e.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.maxTouchPoints=10),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;n>t;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;n>t;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,n=this._gPoints.length;for(t=0;n>t;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null}};var ve=function(){try{return window.self!==window.top}catch(e){return!0}}()}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,n,i){var r=t.parentNode;"number"==typeof n&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer="undefined"==typeof n.attachToViewer?!0:n.attachToViewer,this.autoFade="undefined"==typeof n.autoFade?!0:n.autoFade,this.element=t,this.anchor=n.anchor,this.container=i,this.anchor==e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==e.ControlAnchor.TOP_RIGHT||this.anchor==e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor==e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor==e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(OpenSeadragon),function(e){function t(e,t){var n,i=e.controls;for(n=i.length-1;n>=0;n--)if(i[n].element==t)return n;return-1}e.ControlDock=function(t){var n,i,r=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;i<r.length;i++)n=r[i],this.controls[n]=e.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,i){n=e.getElement(n);var r=null;if(!(t(this,n)>=0)){switch(i.anchor){case e.ControlAnchor.TOP_RIGHT:r=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:r=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:r=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case e.ControlAnchor.NONE:r=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new e.Control(n,i,r)),n.style.display="inline-block"}},removeControl:function(n){n=e.getElement(n);var i=t(this,n);return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(OpenSeadragon),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(e){function t(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function n(t,n,i,r){function o(e,t){e.ready?i(e):(e.addHandler("ready",function(){i(e)}),e.addHandler("open-failed",function(e){r({message:e.message,source:t})}))}var s=t;"string"==e.type(n)&&(n.match(/\s*<.*/)?n=e.parseXml(n):n.match(/\s*[\{\[].*/)&&(n=e.parseJSON(n))),setTimeout(function(){if("string"==e.type(n))n=new e.TileSource({url:n,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,useCanvas:t.useCanvas,success:function(e){i(e.tileSource)}}),n.addHandler("open-failed",function(e){r(e)});else if(e.isPlainObject(n)||n.nodeType)if(!n.crossOriginPolicy&&t.crossOriginPolicy&&(n.crossOriginPolicy=t.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=t.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=t.useCanvas),e.isFunction(n.getTileUrl)){var a=new e.TileSource(n);a.getTileUrl=n.getTileUrl,i(a)}else{var l=e.TileSource.determineType(s,n);if(!l)return void r({message:"Unable to load TileSource",source:n});var u=l.prototype.configure.apply(s,[n]);o(new l(u),n)}else o(n,n)})}function i(t,n){if(n instanceof e.Overlay)return n;var i=null;if(n.element)i=e.getElement(n.element);else{var r=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());i=e.getElement(n.id),i||(i=document.createElement("a"),i.href="#/overlay/"+r),i.id=r,e.addClass(i,n.className?n.className:"openseadragon-overlay")}var o=n.location,s=n.width,a=n.height;if(!o){var l=n.x,u=n.y;if(void 0!==n.px){var c=t.viewport.imageToViewportRectangle(new e.Rect(n.px,n.py,s||0,a||0));l=c.x,u=c.y,s=void 0!==s?c.width:void 0,a=void 0!==a?c.height:void 0}o=new e.Point(l,u)}var h=n.placement;return h&&"string"===e.type(h)&&(h=e.Placement[n.placement.toUpperCase()]),new e.Overlay({element:i,location:o,placement:h,onDraw:n.onDraw,checkResize:n.checkResize,width:s,height:a,rotationMode:n.rotationMode})}function r(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n].element===t)return n;return-1}function o(t,n){return e.requestAnimationFrame(function(){n(t)})}function s(t){e.requestAnimationFrame(function(){l(t)})}function a(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout(function(){s(t)},t.controlsFadeDelay))}function l(t){var n,i,r,o;if(t.controlsShouldFade){for(n=e.now(),i=n-t.controlsFadeBeginTime,r=1-i/t.controlsFadeLength,r=Math.min(1,r),r=Math.max(0,r),o=t.controls.length-1;o>=0;o--)t.controls[o].autoFade&&t.controls[o].setOpacity(r);r>0&&s(t)}}function u(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function c(){u(this)}function h(){a(this)}function f(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints(),!1;case 40:return t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints(),!1;case 37:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints(),!1;case 39:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function d(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints(),!1;case 115:case 83:return t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints(),!1;case 97:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints(),!1;case 100:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function p(e){var t,n=document.activeElement==this.canvas;n||this.canvas.focus(),!e.preventDefaultAction&&this.viewport&&e.quick&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-click",{tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent})}function g(e){var t;!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-double-click",{tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent})}function v(e){var t;!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled),this.constrainDuringPan&&this.viewport.applyConstraints()),this.raiseEvent("canvas-drag",{tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent})}function m(t){if(!t.preventDefaultAction&&this.viewport){var n=this.gestureSettingsByDeviceType(t.pointerType);if(n.flickEnabled&&t.speed>=n.flickMinSpeed){var i=0;this.panHorizontal&&(i=n.flickMomentum*t.speed*Math.cos(t.direction));var r=0;this.panVertical&&(r=n.flickMomentum*t.speed*Math.sin(t.direction));var o=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),s=this.viewport.pointFromPixel(new e.Point(o.x-i,o.y-r));this.viewport.panTo(s,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function y(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function w(e){this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function x(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function S(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function b(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function _(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function T(e){var t,n,i,r;if(!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.pinchToZoom&&(n=this.viewport.pointFromPixel(e.center,!0),i=this.viewport.pointFromPixel(e.lastCenter,!0),r=i.minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),this.viewport.panBy(r,!0),this.viewport.applyConstraints()),t.pinchRotate)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),s=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);
this.viewport.setRotation(this.viewport.getRotation()+(o-s)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function E(t){var n,i,r,o;if(r=e.now(),o=r-this._lastScrollTime,o>this.minScrollDeltaTime){if(this._lastScrollTime=r,!t.preventDefaultAction&&this.viewport&&(n=this.gestureSettingsByDeviceType(t.pointerType),n.scrollToZoom&&(i=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(i,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),n&&n.scrollToZoom)return!1}else if(n=this.gestureSettingsByDeviceType(t.pointerType),n&&n.scrollToZoom)return!1}function P(e){q[this.hash].mouseInside=!0,u(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function R(e){e.pointers<1&&(q[this.hash].mouseInside=!1,q[this.hash].animating||a(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function O(e){C(e),e.isOpen()?e._updateRequestId=o(e,O):e._updateRequestId=!1}function C(e){if(!e._opening){if(e.autoResize){var n=t(e.container),i=q[e.hash].prevContainerSize;if(!n.equals(i)){var r=e.viewport;if(e.preserveImageSizeOnResize){var o=i.x/n.x,s=r.getZoom()*o,l=r.getCenter();r.resize(n,!1),r.zoomTo(s,null,!0),r.panTo(l,!0)}else{var c=r.getBounds();r.resize(n,!0),r.fitBoundsWithConstraints(c,!0)}q[e.hash].prevContainerSize=n,q[e.hash].forceRedraw=!0}}var h=e.viewport.update(),f=e.world.update()||h;h&&e.raiseEvent("viewport-change"),e.referenceStrip&&(f=e.referenceStrip.update(e.viewport)||f),!q[e.hash].animating&&f&&(e.raiseEvent("animation-start"),u(e)),(f||q[e.hash].forceRedraw||e.world.needsDraw())&&(k(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),q[e.hash].forceRedraw=!1,f&&e.raiseEvent("animation")),q[e.hash].animating&&!f&&(e.raiseEvent("animation-finish"),q[e.hash].mouseInside||a(e)),q[e.hash].animating=f}}function k(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}function I(e,t){return e?e+t:t}function F(){q[this.hash].lastZoomTime=e.now(),q[this.hash].zoomFactor=this.zoomPerSecond,q[this.hash].zooming=!0,D(this)}function A(){q[this.hash].lastZoomTime=e.now(),q[this.hash].zoomFactor=1/this.zoomPerSecond,q[this.hash].zooming=!0,D(this)}function M(){q[this.hash].zooming=!1}function D(t){e.requestAnimationFrame(e.delegate(t,B))}function B(){var t,n,i;q[this.hash].zooming&&this.viewport&&(t=e.now(),n=t-q[this.hash].lastZoomTime,i=Math.pow(q[this.hash].zoomFactor,n/1e3),this.viewport.zoomBy(i),this.viewport.applyConstraints(),q[this.hash].lastZoomTime=t,D(this))}function L(){this.viewport&&(q[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function z(){this.viewport&&(q[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function N(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function H(){this.viewport&&this.viewport.goHome()}function j(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function V(){if(this.viewport){var e=this.viewport.getRotation();0===e?e=270:e-=90,this.viewport.setRotation(e)}}function W(){if(this.viewport){var e=this.viewport.getRotation();270===e?e=0:e+=90,this.viewport.setRotation(e)}}function U(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&0>e&&(e+=this.tileSources.length),this.goToPage(e)}function $(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}var q={},G=1;e.Viewer=function(n){var i,r=arguments,s=this;if(e.isPlainObject(n)||(n={id:r[0],xmlPath:r.length>1?r[1]:void 0,prefixUrl:r.length>2?r[2]:void 0,controls:r.length>3?r[3]:void 0,overlays:r.length>4?r[4]:void 0}),n.config&&(e.extend(!0,n,n.config),delete n.config),e.extend(!0,this,{id:n.id,hash:n.hash||G++,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,n),"undefined"==typeof this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for("undefined"!=typeof q[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),q[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(t){var n=e.getString("Errors.OpenFailed",t.eventSource,t.message);s._showMessage(n)}),e.ControlDock.call(this,n),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(e){e.width="100%",e.height="100%",e.overflow="hidden",e.position="absolute",e.top="0px",e.left="0px"}(this.canvas.style),e.setElementTouchActionNone(this.canvas),""!==n.tabIndex&&(this.canvas.tabIndex=void 0===n.tabIndex?0:n.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:e.delegate(this,f),keyHandler:e.delegate(this,d),clickHandler:e.delegate(this,p),dblClickHandler:e.delegate(this,g),dragHandler:e.delegate(this,v),dragEndHandler:e.delegate(this,m),enterHandler:e.delegate(this,y),exitHandler:e.delegate(this,w),pressHandler:e.delegate(this,x),releaseHandler:e.delegate(this,S),nonPrimaryPressHandler:e.delegate(this,b),nonPrimaryReleaseHandler:e.delegate(this,_),scrollHandler:e.delegate(this,E),pinchHandler:e.delegate(this,T)}),this.outerTracker=new e.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,P),exitHandler:e.delegate(this,R)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),q[this.hash].prevContainerSize=t(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(e){s.source=s.world.getItemAt(0).source,q[s.hash].forceRedraw=!0,s._updateRequestId||(s._updateRequestId=o(s,O))}),this.world.addHandler("remove-item",function(e){s.world.getItemCount()?s.source=s.world.getItemAt(0).source:s.source=null,q[s.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(e){s.viewport&&s.viewport._setContentBounds(s.world.getHomeBounds(),s.world.getContentFactor())}),this.world.addHandler("item-index-change",function(e){s.source=s.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:q[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(i=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(i,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(i=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(i,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),i=0;i<this.customControls.length;i++)this.addControl(this.customControls[i].id,{anchor:this.customControls[i].anchor});e.requestAnimationFrame(function(){a(s)})},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},open:function(t){var n=this;if(this.close(),t){if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}))),void this._updateSequenceButtons(this._sequenceIndex);if(e.isArray(t)||(t=[t]),t.length){this._opening=!0;for(var r,o=t.length,s=0,a=0,l=function(){if(s+a===o)if(s){!n._firstOpen&&n.preserveViewport||(n.viewport.goHome(!0),n.viewport.update()),n._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),n.overlays&&!n.preserveOverlays)for(var l=0;l<n.overlays.length;l++)n.currentOverlays[l]=i(n,n.overlays[l]);n._drawOverlays(),n._opening=!1,n.raiseEvent("open",{source:e})}else n._opening=!1,n.raiseEvent("open-failed",r)},u=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var i=t.success;t.success=function(e){if(s++,t.tileSource.overlays)for(var r=0;r<t.tileSource.overlays.length;r++)n.addOverlay(t.tileSource.overlays[r]);i&&i(e),l()};var o=t.error;t.error=function(e){a++,r||(r=e),o&&o(e),l()},n.addTiledImage(t)},c=0;c<t.length;c++)u(t[c]);return this}}},close:function(){return q[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),q[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(q[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),q[this.hash]=null,delete q[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisibile();return t},setControlsEnabled:function(e){return e?u(this):a(this),this.raiseEvent("controls-enabled",{enabled:e}),this},isFullPage:function(){return q[this.hash].fullPage},setFullPage:function(t){var n,i,r=document.body,o=r.style,s=document.documentElement.style,a=this;if(t==this.isFullPage())return this;var l={fullPage:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",l),l.preventDefaultAction)return this;if(t){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=o.margin,this.docMargin=s.margin,o.margin="0",s.margin="0",this.bodyPadding=o.padding,this.docPadding=s.padding,o.padding="0",s.padding="0",this.bodyWidth=o.width,this.docWidth=s.width,o.width="100%",s.width="100%",this.bodyHeight=o.height,this.docHeight=s.height,o.height="100%",s.height="100%",this.previousBody=[],q[this.hash].prevElementParent=this.element.parentNode,q[this.hash].prevNextSibling=this.element.nextSibling,q[this.hash].prevElementWidth=this.element.style.width,q[this.hash].prevElementHeight=this.element.style.height,n=r.childNodes.length,i=0;n>i;i++)this.previousBody.push(r.childNodes[0]),r.removeChild(r.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,r.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),r.appendChild(this.element),this.element.style.height=e.getWindowSize().y+"px",this.element.style.width=e.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),q[this.hash].fullPage=!0,e.delegate(this,P)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,o.margin=this.bodyMargin,s.margin=this.docMargin,o.padding=this.bodyPadding,s.padding=this.docPadding,o.width=this.bodyWidth,s.width=this.docWidth,o.height=this.bodyHeight,s.height=this.docHeight,r.removeChild(this.element),n=this.previousBody.length,i=0;n>i;i++)r.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),q[this.hash].prevElementParent.insertBefore(this.element,q[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(r.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=q[this.hash].prevElementWidth,this.element.style.height=q[this.hash].prevElementHeight;var u=0,c=function(){e.setPageScroll(a.pageScroll);var t=e.getPageScroll();u++,(10>u&&t.x!==a.pageScroll.x||t.y!==a.pageScroll.y)&&e.requestAnimationFrame(c)};e.requestAnimationFrame(c),q[this.hash].fullPage=!1,e.delegate(this,R)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:t}),this},setFullScreen:function(t){var n=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var i={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",i),i.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var r=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,r),e.removeEvent(document,e.fullScreenErrorEventName,r),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&n.navigator.update(n.viewport),n.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,r),e.addEvent(document,e.fullScreenErrorEventName,r),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){function i(e){for(var n=0;n<o._loadQueue.length;n++)if(o._loadQueue[n]===s){o._loadQueue.splice(n,1);break}0===o._loadQueue.length&&r(s),o.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function r(e){o.collectionMode&&(o.world.arrange({immediately:e.options.collectionImmediately,rows:o.collectionRows,columns:o.collectionColumns,layout:o.collectionLayout,tileSize:o.collectionTileSize,tileMargin:o.collectionTileMargin}),o.world.setAutoRefigureSizes(!0))}e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var o=this;t.replace&&(t.replaceItem=o.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation);var s={options:t};return e.isArray(t.tileSource)?void setTimeout(function(){i({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})}):(this._loadQueue.push(s),void n(this,t.tileSource,function(t){s.tileSource=t;for(var n,i,a;o._loadQueue.length&&(n=o._loadQueue[0],n.tileSource);){if(o._loadQueue.splice(0,1),n.options.replace){var l=o.world.getIndexOfItem(n.options.replaceItem);-1!=l&&(n.options.index=l),o.world.removeItem(n.options.replaceItem)}i=new e.TiledImage({viewer:o,source:n.tileSource,viewport:o.viewport,drawer:o.drawer,tileCache:o.tileCache,imageLoader:o.imageLoader,x:n.options.x,y:n.options.y,width:n.options.width,height:n.options.height,fitBounds:n.options.fitBounds,fitBoundsPlacement:n.options.fitBoundsPlacement,clip:n.options.clip,placeholderFillStyle:n.options.placeholderFillStyle,opacity:n.options.opacity,compositeOperation:n.options.compositeOperation,springStiffness:o.springStiffness,animationTime:o.animationTime,minZoomImageRatio:o.minZoomImageRatio,wrapHorizontal:o.wrapHorizontal,wrapVertical:o.wrapVertical,immediateRender:o.immediateRender,blendTime:o.blendTime,alwaysBlend:o.alwaysBlend,minPixelRatio:o.minPixelRatio,smoothTileEdgesMinZoom:o.smoothTileEdgesMinZoom,crossOriginPolicy:o.crossOriginPolicy,debugMode:o.debugMode}),o.collectionMode&&o.world.setAutoRefigureSizes(!1),o.world.addItem(i,{index:n.options.index}),0===o._loadQueue.length&&r(n),1!==o.world.getItemCount()||o.preserveViewport||o.viewport.goHome(!0),o.navigator&&(a=e.extend({},n.options,{replace:!1,originalTiledImage:i,tileSource:n.tileSource}),o.navigator.addTiledImage(a)),n.options.success&&n.options.success({item:i})}},function(e){e.options=t,i(e)}))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var n=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete n.url,this.addTiledImage(n)},addLayer:function(t){var n=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var i=e.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(i),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,n){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,n)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return q[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=e.delegate(this,c),n=e.delegate(this,h),i=e.delegate(this,$),r=e.delegate(this,U),o=this.navImages,s=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(s=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:I(this.prefixUrl,o.previous.REST),srcGroup:I(this.prefixUrl,o.previous.GROUP),srcHover:I(this.prefixUrl,o.previous.HOVER),srcDown:I(this.prefixUrl,o.previous.DOWN),onRelease:r,onFocus:t,onBlur:n}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:I(this.prefixUrl,o.next.REST),srcGroup:I(this.prefixUrl,o.next.GROUP),srcHover:I(this.prefixUrl,o.next.HOVER),srcDown:I(this.prefixUrl,o.next.DOWN),onRelease:i,onFocus:t,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),s&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,F),n=e.delegate(this,M),i=e.delegate(this,L),r=e.delegate(this,A),o=e.delegate(this,z),s=e.delegate(this,H),a=e.delegate(this,j),l=e.delegate(this,V),u=e.delegate(this,W),f=e.delegate(this,c),d=e.delegate(this,h),p=this.navImages,g=[],v=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton)&&(v=!1),this.showZoomControl&&(g.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:I(this.prefixUrl,p.zoomIn.REST),srcGroup:I(this.prefixUrl,p.zoomIn.GROUP),srcHover:I(this.prefixUrl,p.zoomIn.HOVER),srcDown:I(this.prefixUrl,p.zoomIn.DOWN),onPress:t,onRelease:n,onClick:i,onEnter:t,onExit:n,onFocus:f,onBlur:d})),g.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:I(this.prefixUrl,p.zoomOut.REST),srcGroup:I(this.prefixUrl,p.zoomOut.GROUP),srcHover:I(this.prefixUrl,p.zoomOut.HOVER),srcDown:I(this.prefixUrl,p.zoomOut.DOWN),onPress:r,onRelease:n,onClick:o,onEnter:r,onExit:n,onFocus:f,onBlur:d}))),this.showHomeControl&&g.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:I(this.prefixUrl,p.home.REST),srcGroup:I(this.prefixUrl,p.home.GROUP),srcHover:I(this.prefixUrl,p.home.HOVER),srcDown:I(this.prefixUrl,p.home.DOWN),onRelease:s,onFocus:f,onBlur:d})),this.showFullPageControl&&g.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:I(this.prefixUrl,p.fullpage.REST),srcGroup:I(this.prefixUrl,p.fullpage.GROUP),srcHover:I(this.prefixUrl,p.fullpage.HOVER),srcDown:I(this.prefixUrl,p.fullpage.DOWN),onRelease:a,onFocus:f,onBlur:d})),this.showRotationControl&&(g.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:I(this.prefixUrl,p.rotateleft.REST),srcGroup:I(this.prefixUrl,p.rotateleft.GROUP),srcHover:I(this.prefixUrl,p.rotateleft.HOVER),srcDown:I(this.prefixUrl,p.rotateleft.DOWN),onRelease:l,onFocus:f,onBlur:d})),g.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:I(this.prefixUrl,p.rotateright.REST),srcGroup:I(this.prefixUrl,p.rotateright.GROUP),srcHover:I(this.prefixUrl,p.rotateright.HOVER),srcDown:I(this.prefixUrl,p.rotateright.DOWN),onRelease:u,onFocus:f,onBlur:d}))),v&&(this.buttons=new e.ButtonGroup({buttons:g,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",e.delegate(this,N)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this.raiseEvent("page",{page:e}),this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e)),this},addOverlay:function(t,n,o,s){var a;if(a=e.isPlainObject(t)?t:{element:t,location:n,placement:o,onDraw:s},t=e.getElement(a.element),r(this.currentOverlays,t)>=0)return this;var l=i(this,a);return this.currentOverlays.push(l),l.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:a.location,placement:a.placement}),this},updateOverlay:function(t,n,i){var o;return t=e.getElement(t),o=r(this.currentOverlays,t),o>=0&&(this.currentOverlays[o].update(n,i),q[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:t,location:n,placement:i})),this},removeOverlay:function(t){var n;return t=e.getElement(t),n=r(this.currentOverlays,t),n>=0&&(this.currentOverlays[n].destroy(),this.currentOverlays.splice(n,1),q[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:t})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return q[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var n;return t=e.getElement(t),n=r(this.currentOverlays,t),n>=0?this.currentOverlays[n]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var n=e.makeNeutralElement("div");n.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(n),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;t>e;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]}})}(OpenSeadragon),function(e){function t(e){e.quick&&this.viewer.viewport&&(this.viewer.viewport.panTo(this.viewport.pointFromPixel(e.position)),this.viewer.viewport.applyConstraints())}function n(e){this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)))}function i(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function o(e,t){e.style.webkitTransform="rotate("+t+"deg)",e.style.mozTransform="rotate("+t+"deg)",e.style.msTransform="rotate("+t+"deg)",e.style.oTransform="rotate("+t+"deg)",e.style.transform="rotate("+t+"deg)"}e.Navigator=function(s){function a(e){o(h.displayRegionContainer,e),o(h.displayRegion,-e),h.viewport.setRotation(e)}var l,u,c=s.viewer,h=this;if(s.id?(this.element=document.getElementById(s.id),s.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),s.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:s.autoFade},s.position&&("BOTTOM_RIGHT"==s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"==s.position&&(s.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,
s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",s=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:s.autoResize,minZoomImageRatio:1}),s.minPixelRatio=this.minPixelRatio=c.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!=e.ControlAnchor.NONE&&!function(e,t){e.margin="0px",e.border=t+"px solid #555",e.padding="0px",e.background="#000",e.opacity=.8,e.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid #900",e.margin="0px",e.padding="0px",e.background="transparent",e["float"]="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",c.addControl(this.element,s.controlOptions),this._resizeWithViewer=s.controlOptions.anchor!=e.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!=e.ControlAnchor.NONE,this._resizeWithViewer&&(s.width&&s.height?(this.element.style.height="number"==typeof s.height?s.height+"px":s.height,this.element.style.width="number"==typeof s.width?s.width+"px":s.width):(l=e.getElementSize(c.element),this.element.style.height=Math.round(l.y*s.sizeRatio)+"px",this.element.style.width=Math.round(l.x*s.sizeRatio)+"px",this.oldViewerSize=l),u=e.getElementSize(this.element),this.elementArea=u.x*u.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),s.navigatorRotate){var f=s.viewer.viewport?s.viewer.viewport.getRotation():s.viewer.degrees||0;a(f),s.viewer.addHandler("rotate",function(e){a(e.degrees)})}this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,i),scrollHandler:e.delegate(this,r)}),this.addHandler("reset-size",function(){h.viewport&&h.viewport.goHome(!0)}),c.world.addHandler("item-index-change",function(e){var t=h.world.getItemAt(e.previousIndex);h.world.setItemIndex(t,e.newIndex)}),c.world.addHandler("remove-item",function(e){var t=e.item,n=h._getMatchingItem(t);n&&h.world.removeItem(n)}),this.update(c.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},update:function(t){var n,i,r,o,s,a;if(n=e.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(i=n.x*this.sizeRatio,r=n.y*this.sizeRatio):(i=Math.sqrt(this.elementArea*(n.x/n.y)),r=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=i*r),this.updateSize()),t&&this.viewport){o=t.getBoundsNoRotate(!0),s=this.viewport.pixelFromPointNoRotate(o.getTopLeft(),!1),a=this.viewport.pixelFromPointNoRotate(o.getBottomRight(),!1).minus(this.totalBorderWidths);var l=this.displayRegion.style;l.display=this.world.getItemCount()?"block":"none",l.top=Math.round(s.y)+"px",l.left=Math.round(s.x)+"px";var u=Math.abs(s.x-a.x),c=Math.abs(s.y-a.y);l.width=Math.round(Math.max(u,0))+"px",l.height=Math.round(Math.max(c,0))+"px"}},addTiledImage:function(t){var n=this,i=t.originalTiledImage;delete t.original;var r=e.extend({},t,{success:function(e){var t=e.item;t._originalForNavigator=i,n._matchBounds(t,i,!0),i.addHandler("bounds-change",function(){n._matchBounds(t,i)})}});return e.Viewer.prototype.addTiledImage.apply(this,[r])},_getMatchingItem:function(e){for(var t,n=this.world.getItemCount(),i=0;n>i;i++)if(t=this.world.getItemAt(i),t._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var i=t.getBounds();e.setPosition(i.getTopLeft(),n),e.setWidth(i.width,n)}})}(OpenSeadragon),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};e.extend(e,{getString:function(n){var i,r=n.split("."),o=null,s=arguments,a=t;for(i=0;i<r.length-1;i++)a=a[r[i]]||{};return o=a[r[i]],"string"!=typeof o&&(e.console.debug("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<s.length?s[t]:""})},setString:function(e,n){var i,r=e.split("."),o=t;for(i=0;i<r.length-1;i++)o[r[i]]||(o[r[i]]={}),o=o[r[i]];o[r[i]]=n}})}(OpenSeadragon),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,n){n=n||new e.Point(0,0);var i,r;if(t%90===0){var o=t%360;switch(0>o&&(o+=360),o){case 0:i=1,r=0;break;case 90:i=0,r=1;break;case 180:i=-1,r=0;break;case 270:i=0,r=-1}}else{var s=t*Math.PI/180;i=Math.cos(s),r=Math.sin(s)}var a=i*(this.x-n.x)-r*(this.y-n.y)+n.x,l=r*(this.x-n.x)+i*(this.y-n.y)+n.y;return new e.Point(a,l)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){function t(t){var n,i,r=t.responseText,o=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw o=t.status,n=404==o?"Not Found":t.statusText,new Error(e.getString("Errors.Status",o,n));if(r.match(/\s*<.*/))try{i=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(r)}catch(s){i=t.responseText}else i=r.match(/\s*[\{\[].*/)?e.parseJSON(r):r;return i}e.TileSource=function(t,n,i,r,o,s){var a,l,u=this,c=arguments;if(a=e.isPlainObject(t)?t:{width:c[0],height:c[1],tileSize:c[2],tileOverlap:c[3],minLevel:c[4],maxLevel:c[5]},e.EventSource.call(this),e.extend(!0,this,a),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",function(e){u.success(e)}),"string"==e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new e.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated.Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,n={};for(t=0;t<=this.maxLevel;t++)n[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return n[e]},this.getLevelScale(e)},getNumTiles:function(t){var n=this.getLevelScale(t),i=Math.ceil(n*this.dimensions.x/this.getTileWidth(t)),r=Math.ceil(n*this.dimensions.y/this.getTileHeight(t));return new e.Point(i,r)},getPixelRatio:function(t){var n=this.dimensions.times(this.getLevelScale(t)),i=1/n.x,r=1/n.y;return new e.Point(i,r)},getClosestLevel:function(t){var n,i,r;for(n=this.minLevel;n<this.maxLevel&&(r=this.getNumTiles(n),i=new e.Point(Math.floor(t.x/this.getTileWidth(n)),Math.floor(t.y/this.getTileHeight(n))),!(r.x+1>=i.x&&r.y+1>=i.y));n++);return Math.max(0,n-1)},getTileAtPoint:function(t,n){var i=n.times(this.dimensions.x).times(this.getLevelScale(t)),r=Math.floor(i.x/this.getTileWidth(t)),o=Math.floor(i.y/this.getTileHeight(t));return new e.Point(r,o)},getTileBounds:function(t,n,i){var r=this.dimensions.times(this.getLevelScale(t)),o=this.getTileWidth(t),s=this.getTileHeight(t),a=0===n?0:o*n-this.tileOverlap,l=0===i?0:s*i-this.tileOverlap,u=o+(0===n?1:2)*this.tileOverlap,c=s+(0===i?1:2)*this.tileOverlap,h=1/r.x;return u=Math.min(u,r.x-a),c=Math.min(c,r.y-l),new e.Rect(a*h,l*h,u*h,c*h)},getImageInfo:function(n){var i,r,o,s,a,l,u,c=this;n&&(a=n.split("/"),l=a[a.length-1],u=l.lastIndexOf("."),u>-1&&(a[a.length-1]=l.slice(0,u))),r=function(t){"string"==typeof t&&(t=e.parseXml(t));var i=e.TileSource.determineType(c,t,n);return i?(s=i.prototype.configure.apply(c,[t,n]),void 0===s.ajaxWithCredentials&&(s.ajaxWithCredentials=c.ajaxWithCredentials),o=new i(s),c.ready=!0,void c.raiseEvent("ready",{tileSource:o})):void c.raiseEvent("open-failed",{message:"Unable to load TileSource",source:n})},n.match(/\.js$/)?(i=n.split("/").pop().replace(".js",""),e.jsonp({url:n,async:!1,callbackName:i,callback:r})):e.makeAjaxRequest({url:n,withCredentials:this.ajaxWithCredentials,success:function(e){var n=t(e);r(n)},error:function(e,t){var i;try{i="HTTP "+e.status+" attempting to load TileSource"}catch(r){var o;o="undefined"!=typeof t&&t.toString?t.toString():"Unknown error",i=o+" attempting to load TileSource"}c.raiseEvent("open-failed",{message:i,source:n})}})},supports:function(e,t){return!1},configure:function(e,t){throw new Error("Method not implemented.")},getTileUrl:function(e,t,n){throw new Error("Method not implemented.")},tileExists:function(e,t,n){var i=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&n>=0&&t<i.x&&n<i.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,n,i){var r;for(r in OpenSeadragon)if(r.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[r])&&e.isFunction(OpenSeadragon[r].prototype.supports)&&OpenSeadragon[r].prototype.supports.call(t,n,i))return OpenSeadragon[r];e.console.error("No TileSource was able to open %s %s",i,n)}}(OpenSeadragon),function(e){function t(t,i){if(!i||!i.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s,a,l,u=i.documentElement,c=u.localName||u.tagName,h=i.documentElement.namespaceURI,f=null,d=[];if("Image"==c)try{if(a=u.getElementsByTagName("Size")[0],void 0===a&&(a=u.getElementsByTagNameNS(h,"Size")[0]),f={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:u.getAttribute("Url"),Format:u.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(u.getAttribute("Overlap"),10),TileSize:parseInt(u.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!e.imageFormatSupported(f.Image.Format))throw new Error(e.getString("Errors.ImageFormat",f.Image.Format.toUpperCase()));for(r=u.getElementsByTagName("DisplayRect"),void 0===r&&(r=u.getElementsByTagNameNS(h,"DisplayRect")[0]),l=0;l<r.length;l++)o=r[l],s=o.getElementsByTagName("Rect")[0],void 0===s&&(s=o.getElementsByTagNameNS(h,"Rect")[0]),d.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return d.length&&(f.Image.DisplayRect=d),n(t,f)}catch(p){throw p instanceof Error?p:new Error(e.getString("Errors.Dzi"))}else{if("Collection"==c)throw new Error(e.getString("Errors.Dzc"));if("Error"==c){var g=u.getElementsByTagName("Message")[0],v=g.firstChild.nodeValue;throw new Error(v)}}throw new Error(e.getString("Errors.Dzi"))}function n(t,n){var i,r,o=n.Image,s=o.Url,a=o.Format,l=o.Size,u=o.DisplayRect||[],c=parseInt(l.Width,10),h=parseInt(l.Height,10),f=parseInt(o.TileSize,10),d=parseInt(o.Overlap,10),p=[];for(r=0;r<u.length;r++)i=u[r].Rect,p.push(new e.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return e.extend(!0,{width:c,height:h,tileSize:f,tileOverlap:d,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:p},n)}e.DziTileSource=function(t,n,i,r,o,s,a,l,u){var c,h,f,d;if(d=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=d.tilesUrl,this.fileFormat=d.fileFormat,this.displayRects=d.displayRects,this.displayRects)for(c=this.displayRects.length-1;c>=0;c--)for(h=this.displayRects[c],f=h.minLevel;f<=h.maxLevel;f++)this._levelRects[f]||(this._levelRects[f]=[]),this._levelRects[f].push(h);e.TileSource.apply(this,[d])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var n;return e.Image?n=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(n=e.documentElement.namespaceURI)),"http://schemas.microsoft.com/deepzoom/2008"==n||"http://schemas.microsoft.com/deepzoom/2009"==n},configure:function(i,r){var o;return o=e.isPlainObject(i)?n(this,i):t(this,i),r&&!o.tilesUrl&&(o.tilesUrl=r.replace(/([^\/]+?)(\.(dzi|xml|js))?\/?(\?.*)?$/,"$1_files/"),-1!=r.search(/\.(dzi|xml|js)\?/)?o.queryParams=r.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var i,r,o,s,a,l,u,c=this._levelRects[e];if(!c||!c.length)return!0;for(u=c.length-1;u>=0;u--)if(i=c[u],!(e<i.minLevel||e>i.maxLevel)&&(r=this.getLevelScale(e),o=i.x*r,s=i.y*r,a=o+i.width*r,l=s+i.height*r,o=Math.floor(o/this.tileSize),s=Math.floor(s/this.tileSize),a=Math.ceil(a/this.tileSize),l=Math.ceil(l/this.tileSize),t>=o&&a>t&&n>=s&&l>n))return!0;return!1}})}(OpenSeadragon),function(e){function t(e){var t=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json"],n=-1!=t.indexOf(e[0]);return!n||-1!=e.indexOf("sizeByW")}function n(e){for(var t=[],n=0;n<e.sizes.length;n++)t.push({url:e["@id"]+"/full/"+e.sizes[n].width+",/0/default.jpg",width:e.sizes[n].width,height:e.sizes[n].height});return t.sort(function(e,t){return e.width-t.width})}function i(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var n=t.documentElement,i=n.tagName,o=null;if("info"==i)try{return o={},r(n,o),o}catch(s){throw s instanceof Error?s:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}function r(t,n,i){var o,s;if(3==t.nodeType&&i)s=t.nodeValue.trim(),s.match(/^\d*$/)&&(s=Number(s)),n[i]?(e.isArray(n[i])||(n[i]=[n[i]]),n[i].push(s)):n[i]=s;else if(1==t.nodeType)for(o=0;o<t.childNodes.length;o++)r(t.childNodes[o],n,t.nodeName)}e.IIIFTileSource=function(i){if(e.extend(!0,this,i),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(i.tileSizePerScaleFactor={},this.tile_width&&this.tile_height)i.tileWidth=this.tile_width,i.tileHeight=this.tile_height;else if(this.tile_width)i.tileSize=this.tile_width;else if(this.tile_height)i.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)i.tileWidth=this.tiles[0].width,i.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var r=0;r<this.tiles.length;r++)for(var o=0;o<this.tiles[r].scaleFactors.length;o++){var s=this.tiles[r].scaleFactors[o];this.scale_factors.push(s),i.tileSizePerScaleFactor[s]={width:this.tiles[r].width,height:this.tiles[r].height||this.tiles[r].width}}}else if(t(i.profile)){for(var a=Math.min(this.height,this.width),l=[256,512,1024],u=[],c=0;c<l.length;c++)l[c]<=a&&u.push(l[c]);u.length>0?i.tileSize=Math.max.apply(null,u):i.tileSize=a}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,i.levels=n(this),e.extend(!0,i,{width:i.levels[i.levels.length-1].width,height:i.levels[i.levels.length-1].height,tileSize:Math.max(i.height,i.width),tileOverlap:0,minLevel:0,maxLevel:i.levels.length-1}),this.levels=i.levels):e.console.error("Nothing in the info.json to construct image pyramids from");i.maxLevel||this.emulateLegacyImagePyramid||(this.scale_factors?i.maxLevel=Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):i.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)))),e.TileSource.apply(this,[i])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.protocol&&"http://iiif.io/api/image"==e.protocol?!0:!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=e["@context"]&&"http://iiif.io/api/image/1/context.json"!=e["@context"]?e.profile&&0===e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")?!0:e.identifier&&e.width&&e.height?!0:!(!e.documentElement||"info"!=e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=e.documentElement.namespaceURI):!0},configure:function(t,n){if(e.isPlainObject(t))return t["@context"]?t:(t["@context"]="http://iiif.io/api/image/1.0/context.json",t["@id"]=n.replace("/info.json",""),t);var r=i(t);return r["@context"]="http://iiif.io/api/image/1.0/context.json",r["@id"]=n.replace("/info.xml",""),r},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var n=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var n=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(n=this.levels[t].width/this.levels[this.maxLevel].width),n}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){if(this.emulateLegacyImagePyramid){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)}return e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,n){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,t,n)},getTileUrl:function(e,t,n){if(this.emulateLegacyImagePyramid){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}var r,o,s,a,l,u,c,h,f,d,p,g,v="0",m=Math.pow(.5,this.maxLevel-e),y=Math.ceil(this.width*m),w=Math.ceil(this.height*m);return r=this.getTileWidth(e),o=this.getTileHeight(e),s=Math.ceil(r/m),a=Math.ceil(o/m),p=this["@context"].indexOf("/1.0/context.json")>-1||this["@context"].indexOf("/1.1/context.json")>-1||this["@context"].indexOf("/1/context.json")>-1?"native.jpg":"default.jpg",r>y&&o>w?(d=y+",",l="full"):(u=t*s,c=n*a,h=Math.min(s,this.width-u),f=Math.min(a,this.height-c),d=Math.ceil(h*m)+",",l=[u,c,h,f].join(",")),g=[this["@id"],l,d,v,p].join("/")}})}(OpenSeadragon),function(e){e.OsmTileSource=function(t,n,i,r,o){var s;s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},s.width&&s.height||(s.width=65572864,s.height=65572864),s.tileSize||(s.tileSize=256,s.tileOverlap=0),s.tilesUrl||(s.tilesUrl="http://tile.openstreetmap.org/"),s.minLevel=8,e.TileSource.apply(this,[s])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(t,n,i,r,o){var s;s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,l=256*Math.ceil(s.width/256),u=256*Math.ceil(s.height/256);a=l>u?l/256:u/256,s.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,s.tileSize=256,s.width=l,s.height=u,e.TileSource.apply(this,[s])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var i=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(i-n)+".png"}})}(OpenSeadragon),function(e){function t(t){var n,i,r=[];for(i=0;i<t.length;i++)n=t[i],n.height&&n.width&&n.url&&(n.url.toLowerCase().match(/^.*\.(png|jpg|jpeg|gif)(?:\?.*)?$/)||n.mimetype&&n.mimetype.toLowerCase().match(/^.*\/(png|jpg|jpeg|gif)$/))?r.push({url:n.url,width:Number(n.width),height:Number(n.height)}):e.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return r.sort(function(e,t){return e.height-t.height})}function n(t,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s=n.documentElement,a=s.tagName,l=null,u=[];if("image"==a)try{for(l={type:s.getAttribute("type"),levels:[]},u=s.getElementsByTagName("level"),o=0;o<u.length;o++)r=u[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return i(t,l)}catch(c){throw c instanceof Error?c:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw new Error("Error: "+n)}throw new Error("Unknown element "+a)}function i(e,t){return t.levels}e.LegacyTileSource=function(n){var i,r,o;e.isArray(n)&&(i={type:"legacy-image-pyramid",levels:n}),i.levels=t(i.levels),i.levels.length>0?(r=i.levels[i.levels.length-1].width,o=i.levels[i.levels.length-1].height):(r=0,o=0,e.console.error("No supported image formats found")),e.extend(!0,i,{width:r,height:o,tileSize:Math.max(o,r),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),e.TileSource.apply(this,[i]),this.levels=i.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(t,r){var o;return o=e.isPlainObject(t)?i(this,t):n(this,t)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)},getTileAtPoint:function(t,n){return new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}})}(OpenSeadragon),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t){return e},getImageInfo:function(t){var n=this._image=new Image,i=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",function(){i.width=n.naturalWidth,i.height=n.naturalHeight,i.aspectRatio=i.width/i.height,i.dimensions=new e.Point(i.width,i.height),i._tileWidth=i.width,i._tileHeight=i.height,i.tileOverlap=0,i.minLevel=0,i.levels=i._buildLevels(),i.maxLevel=i.levels.length-1,i.ready=!0,i.raiseEvent("ready",{tileSource:i})}),e.addEvent(n,"error",function(){i.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})}),n.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)},getTileAtPoint:function(t,n){return new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i},getContext2D:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].context2D),i},_buildLevels:function(){var t=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var n=this._image.naturalWidth,i=this._image.naturalHeight,r=document.createElement("canvas"),o=r.getContext("2d");if(r.width=n,r.height=i,o.drawImage(this._image,0,0,n,i),t[0].context2D=o,delete this._image,e.isCanvasTainted(r))return t;for(;n>=2&&i>=2;){n=Math.floor(n/2),i=Math.floor(i/2);var s=document.createElement("canvas"),a=s.getContext("2d");s.width=n,s.height=i,a.drawImage(r,0,0,n,i),t.splice(0,0,{context2D:a,width:n,height:i}),r=s,o=a}return t}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(t,n,i,r){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function t(t){e.requestAnimationFrame(function(){n(t)})}function n(n){var i,r,o;n.shouldFade&&(i=e.now(),r=i-n.fadeBeginTime,o=1-r/n.fadeLength,o=Math.min(1,o),o=Math.max(0,o),n.imgGroup&&e.setElementOpacity(n.imgGroup,o,!0),o>0&&t(n))}function i(n){n.shouldFade=!0,n.fadeBeginTime=e.now()+n.fadeDelay,window.setTimeout(function(){t(n)},n.fadeDelay)}function r(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}function o(t,n){t.element.disabled||(n>=e.ButtonState.GROUP&&t.currentState==e.ButtonState.REST&&(r(t),t.currentState=e.ButtonState.GROUP),n>=e.ButtonState.HOVER&&t.currentState==e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),n>=e.ButtonState.DOWN&&t.currentState==e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function s(t,n){t.element.disabled||(n<=e.ButtonState.HOVER&&t.currentState==e.ButtonState.DOWN&&(t.imgDown&&(t.imgDown.style.visibility="hidden"),t.currentState=e.ButtonState.HOVER),n<=e.ButtonState.GROUP&&t.currentState==e.ButtonState.HOVER&&(t.imgHover&&(t.imgHover.style.visibility="hidden"),t.currentState=e.ButtonState.GROUP),n<=e.ButtonState.REST&&t.currentState==e.ButtonState.GROUP&&(i(t),t.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var n=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor==e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(o(n,e.ButtonState.DOWN),n.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||o(n,e.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),n.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(t){s(n,e.ButtonState.GROUP),t.insideElementPressed&&n.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){this.exitHandler(e),n.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){o(n,e.ButtonState.DOWN),n.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(s(n,e.ButtonState.HOVER),n.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?s(n,e.ButtonState.GROUP):o(n,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&n.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13===e.keyCode?(n.raiseEvent("click",{originalEvent:e.originalEvent}),n.raiseEvent("release",{originalEvent:e.originalEvent}),!1):!0}}),s(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{
notifyGroupEnter:function(){o(this,e.ButtonState.GROUP)},notifyGroupExit:function(){s(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var n,i=this.buttons.concat([]),r=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.label=e.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),n=0;n<i.length;n++)this.element.appendChild(i[n].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(e){e.Rect=function(e,t,n,i,r){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.width="number"==typeof n?n:0,this.height="number"==typeof i?i:0,this.degrees="number"==typeof r?r:0,this.degrees=this.degrees%360,this.degrees<0&&(this.degrees+=360);var o,s;this.degrees>=270?(o=this.getTopRight(),this.x=o.x,this.y=o.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=270):this.degrees>=180?(o=this.getBottomRight(),this.x=o.x,this.y=o.y,this.degrees-=180):this.degrees>=90&&(o=this.getBottomLeft(),this.x=o.x,this.y=o.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=90)},e.Rect.fromSummits=function(t,n,i){var r=t.distanceTo(n),o=t.distanceTo(i),s=n.minus(t),a=Math.atan(s.y/s.x);return s.x<0?a+=Math.PI:s.y<0&&(a+=2*Math.PI),new e.Rect(t.x,t.y,r,o,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var n=this.getBoundingBox(),i=t.getBoundingBox(),r=Math.min(n.x,i.x),o=Math.min(n.y,i.y),s=Math.max(n.x+n.width,i.x+i.width),a=Math.max(n.y+n.height,i.y+i.height);return new e.Rect(r,o,s-r,a-o)},intersection:function(t){function n(t,n,r,o){var s=n.minus(t),a=o.minus(r),l=-a.x*s.y+s.x*a.y;if(0===l)return null;var u=(s.x*(t.y-r.y)-s.y*(t.x-r.x))/l,c=(a.x*(t.y-r.y)-a.y*(t.x-r.x))/l;return u>=-i&&1-i>=u&&c>=-i&&1-i>=c?new e.Point(t.x+c*s.x,t.y+c*s.y):null}var i=1e-10,r=[],o=this.getTopLeft();t.containsPoint(o,i)&&r.push(o);var s=this.getTopRight();t.containsPoint(s,i)&&r.push(s);var a=this.getBottomLeft();t.containsPoint(a,i)&&r.push(a);var l=this.getBottomRight();t.containsPoint(l,i)&&r.push(l);var u=t.getTopLeft();this.containsPoint(u,i)&&r.push(u);var c=t.getTopRight();this.containsPoint(c,i)&&r.push(c);var h=t.getBottomLeft();this.containsPoint(h,i)&&r.push(h);var f=t.getBottomRight();this.containsPoint(f,i)&&r.push(f);for(var d=this._getSegments(),p=t._getSegments(),g=0;g<d.length;g++)for(var v=d[g],m=0;m<p.length;m++){var y=p[m],w=n(v[0],v[1],y[0],y[1]);w&&r.push(w)}if(0===r.length)return null;for(var x=r[0].x,S=r[0].x,b=r[0].y,_=r[0].y,T=1;T<r.length;T++){var E=r[T];E.x<x&&(x=E.x),E.x>S&&(S=E.x),E.y<b&&(b=E.y),E.y>_&&(_=E.y)}return new e.Rect(x,b,S-x,_-b)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),i=this.getBottomRight();return[[e,t],[t,i],[i,n],[n,e]]},rotate:function(t,n){if(t%=360,0===t)return this.clone();0>t&&(t+=360),n=n||this.getCenter();var i=this.getTopLeft().rotate(t,n),r=this.getTopRight().rotate(t,n),o=r.minus(i),s=Math.atan(o.y/o.x);return o.x<0?s+=Math.PI:o.y<0&&(s+=2*Math.PI),new e.Rect(i.x,i.y,this.width,this.height,s/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),n=this.getTopRight(),i=this.getBottomLeft(),r=this.getBottomRight(),o=Math.min(t.x,n.x,i.x,r.x),s=Math.max(t.x,n.x,i.x,r.x),a=Math.min(t.y,n.y,i.y,r.y),l=Math.max(t.y,n.y,i.y,r.y);return new e.Rect(o,a,s-o,l-a)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),n=Math.floor(t.x),i=Math.floor(t.y),r=Math.ceil(t.width+t.x-n),o=Math.ceil(t.height+t.y-i);return new e.Rect(n,i,r,o)},containsPoint:function(e,t){t=t||0;var n=this.getTopLeft(),i=this.getTopRight(),r=this.getBottomLeft(),o=i.minus(n),s=r.minus(n);return(e.x-n.x)*o.x+(e.y-n.y)*o.y>=-t&&(e.x-i.x)*o.x+(e.y-i.y)*o.y<=t&&(e.x-n.x)*s.x+(e.y-n.y)*s.y>=-t&&(e.x-r.x)*s.x+(e.y-r.y)*s.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){function t(t){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-t.delta.x>0?n>-(o-a.x)&&(this.element.style.marginLeft=n+2*t.delta.x+"px",i(this,a.x,n+2*t.delta.x)):-t.delta.x<0&&0>n&&(this.element.style.marginLeft=n+2*t.delta.x+"px",i(this,a.x,n+2*t.delta.x)):-t.delta.y>0?r>-(s-a.y)&&(this.element.style.marginTop=r+2*t.delta.y+"px",i(this,a.y,r+2*t.delta.y)):-t.delta.y<0&&0>r&&(this.element.style.marginTop=r+2*t.delta.y+"px",i(this,a.y,r+2*t.delta.y))),!1}function n(t){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?t.scroll>0?n>-(o-a.x)&&(this.element.style.marginLeft=n-60*t.scroll+"px",i(this,a.x,n-60*t.scroll)):t.scroll<0&&0>n&&(this.element.style.marginLeft=n-60*t.scroll+"px",i(this,a.x,n-60*t.scroll)):t.scroll<0?r>a.y-s&&(this.element.style.marginTop=r+60*t.scroll+"px",i(this,a.y,r+60*t.scroll)):t.scroll>0&&0>r&&(this.element.style.marginTop=r+60*t.scroll+"px",i(this,a.y,r+60*t.scroll))),!1}function i(t,n,i){var r,o,s,a,l,u,c;for(r="horizontal"==t.scroll?t.panelWidth:t.panelHeight,o=Math.ceil(n/r)+5,s=Math.ceil((Math.abs(i)+n)/r)+1,o=s-o,o=0>o?0:o,u=o;s>u&&u<t.panels.length;u++)c=t.panels[u],c.activePanel||(a=new e.Viewer({id:c.id,tileSources:[t.viewer.tileSources[u]],element:c,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),a.displayRegion=e.makeNeutralElement("div"),a.displayRegion.id=c.id+"-displayregion",a.displayRegion.className="displayregion",l=a.displayRegion.style,l.position="relative",l.top="0px",l.left="0px",l.fontSize="0px",l.overflow="hidden",l["float"]="left",l.cssFloat="left",l.styleFloat="left",l.zIndex=999999999,l.cursor="default",l.width=t.panelWidth-4+"px",l.height=t.panelHeight-4+"px",a.displayRegion.innerTracker=new e.MouseTracker({element:a.displayRegion,startDisabled:!0}),c.getElementsByTagName("div")[0].appendChild(a.displayRegion),c.activePanel=!0)}function r(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function o(t){var n=t.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+e.getElementSize(n).y/2+"px":n.style.marginLeft="-"+e.getElementSize(n).x/2+"px",!1}function s(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function a(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}var l={};e.ReferenceStrip=function(u){var c,h,f,d=this,p=u.viewer,g=e.getElementSize(p.element);for(u.id||(u.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=u.id,this.element.className="referencestrip"),u=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},u,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),e.extend(this,u),l[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,h=this.element.style,h.marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=p,this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,t),scrollHandler:e.delegate(this,n),enterHandler:e.delegate(this,r),exitHandler:e.delegate(this,o),keyDownHandler:e.delegate(this,s),keyHandler:e.delegate(this,a)}),u.width&&u.height?(this.element.style.width=u.width+"px",this.element.style.height=u.height+"px",p.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"==u.scroll?(this.element.style.width=g.x*u.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.height=g.y*u.sizeRatio+"px",p.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=g.y*u.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.width=g.x*u.sizeRatio+"px",p.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=g.x*this.sizeRatio+8,this.panelHeight=g.y*this.sizeRatio+8,this.panels=[],f=0;f<p.tileSources.length;f++)c=e.makeNeutralElement("div"),c.id=this.element.id+"-"+f,c.style.width=d.panelWidth+"px",c.style.height=d.panelHeight+"px",c.style.display="inline",c.style["float"]="left",c.style.cssFloat="left",c.style.styleFloat="left",c.style.padding="2px",e.setElementTouchActionNone(c),c.innerTracker=new e.MouseTracker({element:c,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(t){t.eventSource.dragging=e.now()},releaseHandler:function(t){var n=t.eventSource,i=n.element.id,r=Number(i.split("-")[2]),o=e.now();t.insideElementPressed&&t.insideElementReleased&&n.dragging&&o-n.dragging<n.clickTimeThreshold&&(n.dragging=null,p.goToPage(r))}}),this.element.appendChild(c),c.activePanel=!1,this.panels.push(c);i(this,"vertical"==this.scroll?g.y:g.x,0),this.setFocus(0)},e.extend(e.ReferenceStrip.prototype,e.EventSource.prototype,e.Viewer.prototype,{setFocus:function(t){var n,o=e.getElement(this.element.id+"-"+t),s=e.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==o&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=o,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(t)*(this.panelWidth+3),n>u+s.x-this.panelWidth?(n=Math.min(n,a-s.x),this.element.style.marginLeft=-n+"px",i(this,s.x,-n)):u>n&&(n=Math.max(0,n-s.x/2),this.element.style.marginLeft=-n+"px",i(this,s.x,-n))):(n=Number(t)*(this.panelHeight+3),n>c+s.y-this.panelHeight?(n=Math.min(n,l-s.y),this.element.style.marginTop=-n+"px",i(this,s.y,-n)):c>n&&(n=Math.max(0,n-s.y/2),this.element.style.marginTop=-n+"px",i(this,s.y,-n))),this.currentPage=t,r.call(this,{eventSource:this.innerTracker}))},update:function(){return l[this.id].animating?(e.console.log("image reference strip update"),!0):!1},destroy:function(){this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(e){e.DisplayRect=function(t,n,i,r,o,s){e.Rect.apply(this,[t,n,i,r]),this.minLevel=o,this.maxLevel=s},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){function t(e,t){return(1-Math.exp(e*-t))/(1-Math.exp(-e))}e.Spring=function(t){var n=arguments;"object"!=typeof t&&(t={initial:n.length&&"number"==typeof n[0]?n[0]:void 0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=e.now();var n,i;this._exponential?(n=this.start._logValue,i=this.target._logValue):(n=this.start.value,i=this.target.value);var r=this.current.time>=this.target.time?i:n+(i-n)*t(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time));this._exponential?this.current.value=Math.exp(r):this.current.value=r},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){function t(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},t),this.image=null}function n(e,t,n){var i;e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(i=e.jobQueue.shift(),i.start(),e.jobsInProgress++),n(t.image,t.errorMsg)}t.prototype={errorMsg:null,start:function(){var e=this;this.image=new Image,this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.onload=function(){e.finish(!0)},this.image.onabort=this.image.onerror=function(){e.errorMsg="Image load aborted",e.finish(!1)},this.jobId=window.setTimeout(function(){e.errorMsg="Image load exceeded timeout",e.finish(!1)},this.timeout),this.image.src=this.src},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,jobQueue:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(e){var i=this,r=function(t){n(i,t,e.callback)},o={src:e.src,crossOriginPolicy:e.crossOriginPolicy,callback:r,abort:e.abort},s=new t(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(s.start(),this.jobsInProgress++):this.jobQueue.push(s)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(e,t,n,i,r,o,s){this.level=e,this.x=t,this.y=n,this.bounds=i,this.exists=r,this.url=o,this.context2D=s,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.distance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(t){return this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=t&&t.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",void e.setElementOpacity(this.element,this.opacity)):void e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):void e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(t,n,i,r){var o,s=this.position.times(e.pixelDensityRatio),a=this.size.times(e.pixelDensityRatio);return this.context2D||this.cacheImageRecord?(o=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&o?(t.save(),t.globalAlpha=this.opacity,"number"==typeof i&&1!==i&&(s=s.times(i),a=a.times(i)),r instanceof e.Point&&(s=s.plus(r)),1===t.globalAlpha&&this._hasTransparencyChannel()&&t.clearRect(s.x+1,s.y+1,a.x-2,a.y-2),n({context:t,tile:this,rendered:o}),t.drawImage(o.canvas,0,0,o.canvas.width,o.canvas.height,s.x,s.y,a.x,a.y),void t.restore()):void e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):void e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,n,i){var r=Math.max(1,Math.ceil((i.x-n.x)/2)),o=Math.max(1,Math.ceil((i.y-n.y)/2));return new e.Point(r,o).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply(function(e){return e%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,n,i){var r;r=e.isPlainObject(t)?t:{element:t,location:n,placement:i},this.element=r.element,this.style=r.element.style,this._init(r)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize?!0:t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,n){var i=e.Placement.properties[this.placement];i&&(i.isHorizontallyCentered?t.x-=n.x/2:i.isRight&&(t.x-=n.x),i.isVerticallyCentered?t.y-=n.y/2:i.isBottom&&(t.y-=n.y))},destroy:function(){var t=this.element,n=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(n.display="none",document.body.appendChild(t))),this.onDraw=null,n.top="",n.left="",n.position="",null!==this.width&&(n.width=""),null!==this.height&&(n.height="");var i=e.getCssPropertyWithVendorPrefix("transformOrigin"),r=e.getCssPropertyWithVendorPrefix("transform");i&&r&&(n[i]="",n[r]="")},drawHTML:function(t,n){var i=this.element;i.parentNode!==t&&(i.prevElementParent=i.parentNode,i.prevNextSibling=i.nextSibling,t.appendChild(i),this.size=e.getElementSize(i));var r=this._getOverlayPositionAndSize(n),o=r.position,s=this.size=r.size,a=r.rotate;if(this.onDraw)this.onDraw(o,s,this.element);else{var l=this.style;l.left=o.x+"px",l.top=o.y+"px",null!==this.width&&(l.width=s.x+"px"),null!==this.height&&(l.height=s.y+"px");var u=e.getCssPropertyWithVendorPrefix("transformOrigin"),c=e.getCssPropertyWithVendorPrefix("transform");u&&c&&(a?(l[u]=this._getTransformOrigin(),l[c]="rotate("+a+"deg)"):(l[u]="",l[c]="")),l.position="absolute","none"!==l.display&&(l.display="block")}},_getOverlayPositionAndSize:function(t){var n=t.pixelFromPoint(this.location,!0),i=this._getSizeInPixels(t);this.adjust(n,i);var r=0;if(t.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new e.Rect(n.x,n.y,i.x,i.y),s=this._getBoundingBox(o,t.degrees);n=s.getTopLeft(),i=s.getSize()}else r=t.degrees;return{position:n,size:i,rotate:r}},_getSizeInPixels:function(t){var n=this.size.x,i=this.size.y;if(null!==this.width||null!==this.height){var r=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(n=r.x),null!==this.height&&(i=r.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=e.getElementSize(this.element);null===this.width&&(n=o.x),null===this.height&&(i=o.y)}return new e.Point(n,i)},_getBoundingBox:function(e,t){var n=this._getPlacementPoint(e);return e.rotate(t,n).getBoundingBox()},_getPlacementPoint:function(t){var n=new e.Point(t.x,t.y),i=e.Placement.properties[this.placement];return i&&(i.isHorizontallyCentered?n.x+=t.width/2:i.isRight&&(n.x+=t.width),i.isVerticallyCentered?n.y+=t.height/2:i.isBottom&&(n.y+=t.height)),n},_getTransformOrigin:function(){var t="",n=e.Placement.properties[this.placement];return n?(n.isLeft?t="left":n.isRight&&(t="right"),n.isTop?t+=" top":n.isBottom&&(t+=" bottom"),t):t},update:function(t,n){var i=e.isPlainObject(t)?t:{location:t,placement:n};this._init({location:i.location||this.location,placement:void 0!==i.placement?i.placement:this.placement,onDraw:i.onDraw||this.onDraw,checkResize:i.checkResize||this.checkResize,width:void 0!==i.width?i.width:this.width,height:void 0!==i.height?i.height:this.height,rotationMode:i.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,i=this.height;if(null===n||null===i){var r=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===n&&(n=r.x),null===i&&(i=r.y)}var o=this.location.clone();return this.adjust(o,new e.Point(n,i)),this._adjustBoundsForRotation(t,new e.Rect(o.x,o.y,n,i))},_adjustBoundsForRotation:function(t,n){if(!t||0===t.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return n;var i=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(i.position.x,i.position.y,i.size.x,i.size.y))}return n.rotate(-t.degrees,this._getPlacementPoint(n))}}}(OpenSeadragon),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(t)||(t={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor=t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var i=this._calculateCanvasSize();this.canvas.width=i.x,this.canvas.height=i.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas)},e.Drawer.prototype={addOverlay:function(t,n,i,r){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,n,i,r),this},updateOverlay:function(t,n,i){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,n,i),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,i=0;i<n.getItemCount();i++)n.getItemAt(i).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,n=0,i=0;i<t.getItemCount();i++){var r=t.getItemAt(i).getOpacity();r>n&&(n=r)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!=e.x||this.canvas.height!=e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y}this._clear()}},_clear:function(e,t){if(this.useCanvas){var n=this._getContext(e);if(t)n.clearRect(t.x,t.y,t.width,t.height);else{var i=n.canvas;n.clearRect(0,0,i.width,i.height)}}},viewportToDrawerRectangle:function(t){var n=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),i=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)},drawTile:function(t,n,i,r,o){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var s=this._getContext(i);r=r||1,t.drawCanvas(s,n,r,o)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var i=this;this.viewer.addHandler("rotate",function r(){i.viewer.removeHandler("rotate",r);var e=i._calculateSketchCanvasSize();i.sketchCanvas.width=e.x,i.sketchCanvas.height=e.y})}}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}},drawRectangle:function(e,t,n){if(this.useCanvas){var i=this._getContext(n);i.save(),
i.fillStyle=t,i.fillRect(e.x,e.y,e.width,e.height),i.restore()}},blendSketch:function(t,n,i,r){var o=t;if(e.isPlainObject(o)||(o={opacity:t,scale:n,translate:i,compositeOperation:r}),this.useCanvas&&this.sketchCanvas){t=o.opacity,r=o.compositeOperation;var s=o.bounds;if(this.context.save(),this.context.globalAlpha=t,r&&(this.context.globalCompositeOperation=r),s)this.context.drawImage(this.sketchCanvas,s.x,s.y,s.width,s.height,s.x,s.y,s.width,s.height);else{n=o.scale||1,i=o.translate;var a=i instanceof e.Point?i:new e.Point(0,0),l=0,u=0;if(i){var c=this.sketchCanvas.width-this.canvas.width,h=this.sketchCanvas.height-this.canvas.height;l=Math.round(c/2),u=Math.round(h/2)}this.context.drawImage(this.sketchCanvas,a.x-l*n,a.y-u*n,(this.canvas.width+2*l)*n,(this.canvas.height+2*u)*n,-l,-u,this.canvas.width+2*l,this.canvas.height+2*u)}this.context.restore()}},drawDebugInfo:function(t,n,i){if(this.useCanvas){var r=this.context;r.save(),r.lineWidth=2*e.pixelDensityRatio,r.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",r.strokeStyle=this.debugGridColor,r.fillStyle=this.debugGridColor,0!==this.viewport.degrees&&this._offsetForRotation(this.viewport.degrees),r.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var o=(t.position.x+t.size.x/2)*e.pixelDensityRatio,s=(t.position.y+t.size.y/2)*e.pixelDensityRatio;r.translate(o,s),r.rotate(Math.PI/180*-this.viewport.degrees),r.translate(-o,-s),0===t.x&&0===t.y&&(r.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),r.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),r.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),r.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),r.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),r.fillText("Order: "+i+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),r.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),r.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),r.restore()}},debugRect:function(t){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor,n.fillStyle=this.debugGridColor,n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}},getCanvasSize:function(t){var n=this._getContext(t).canvas;return new e.Point(n.width,n.height)},_offsetForRotation:function(e,t){var n=this.canvas.width/2,i=this.canvas.height/2,r=this._getContext(t);r.save(),r.translate(n,i),r.rotate(Math.PI/180*e),r.translate(-n,-i)},_restoreRotationChanges:function(e){var t=this._getContext(e);t.restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:n.x*t,y:n.y*t}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(OpenSeadragon),function(e){e.Viewport=function(t){var n=arguments;n.length&&n[0]instanceof e.Point&&(t={containerSize:n[0],contentSize:n[1],config:n[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,n)},_setContentBounds:function(t,n){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=t.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e,t=this._contentAspectRatio/this.getAspectRatio();return e=this.homeFillsViewer?t>=1?t:1:t>=1?1:t,e/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),i=n/this.getAspectRatio();return new e.Rect(t.x-n/2,t.y-i/2,n,i)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom(),t=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e;return t},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(t){var n=this.getCenter(t),i=1/this.getZoom(t),r=i/this.getAspectRatio();return new e.Rect(n.x-i/2,n.y-r/2,i,r)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(t){var n,i,r,o,s,a,l,u,c=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),h=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?c:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),i=this.getZoom(),r=1/i,o=r/this.getAspectRatio(),s=new e.Rect(c.x-r/2,c.y-o/2,r,o),a=this._pixelFromPoint(this.zoomPoint,s),l=a.minus(n),u=l.divide(this._containerInnerSize.x*i),h.plus(u)):h},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(t,n){var i=new e.Rect(t.x,t.y,t.width,t.height),r=this.visibilityRatio*i.width,o=this.visibilityRatio*i.height;if(this.wrapHorizontal);else{var s=0,a=i.x+(i.width-r);this._contentBoundsNoRotate.x>a&&(s=this._contentBoundsNoRotate.x-a);var l=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,u=i.x+r;if(u>l){var c=l-u;s=s?(s+c)/2:c}i.x+=s}if(this.wrapVertical);else{var h=0,f=i.y+(i.height-o);this._contentBoundsNoRotate.y>f&&(h=this._contentBoundsNoRotate.y-f);var d=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,p=i.y+o;if(p>d){var g=d-p;h=h?(h+g)/2:g}i.y+=h}return this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n}),i},applyConstraints:function(e){var t=this.getZoom(),n=this._applyZoomConstraints(t);t!==n&&this.zoomTo(n,this.zoomPoint,e);var i=this.getBoundsNoRotate(),r=this._applyBoundaryConstraints(i,e);return(i.x!==r.x||i.y!==r.y||e)&&this.fitBounds(r.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,n){n=n||{};var i=n.immediately||!1,r=n.constraints||!1,o=this.getAspectRatio(),s=t.getCenter(),a=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=o?a.height=a.width/o:a.width=a.height*o,a.x=s.x-a.width/2,a.y=s.y-a.height/2;var l=1/a.width;if(r){var u=a.getAspectRatio(),c=this._applyZoomConstraints(l);l!==c&&(l=c,a.width=1/l,a.x=s.x-a.width/2,a.height=a.width/u,a.y=s.y-a.height/2),a=this._applyBoundaryConstraints(a,i),s=a.getCenter()}if(i)return this.panTo(s,!0),this.zoomTo(l,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var h=this.getBounds(),f=this.getZoom();if(0===f||Math.abs(l/f-1)<1e-8)return this.zoomTo(l,!0),this.panTo(s,i);a=a.rotate(-this.getRotation());var d=a.getTopLeft().times(l).minus(h.getTopLeft().times(f)).divide(l-f);return this.zoomTo(l,d,i)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,t)},fitHorizontally:function(t){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,t)},panBy:function(t,n){var i=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(i.plus(t),n)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,n){return this.zoomTo(this.zoomSpring.target.value*e,t,n)},zoomTo:function(t,n,i){return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,i?this.zoomSpring.resetTo(t):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:n,immediately:i}),this},setRotation:function(e){return this.viewer&&this.viewer.drawer.canRotate()?(e%=360,0>e&&(e+=360),this.degrees=e,this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:e}),this):this},getRotation:function(){return this.degrees},resize:function(e,t){var n,i=this.getBoundsNoRotate(),r=i;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(n=e.x/this.containerSize.x,r.width=i.width*n,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(r,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){if(this.zoomPoint){var e=this.pixelFromPoint(this.zoomPoint,!0);this.zoomSpring.update();var t=this.pixelFromPoint(this.zoomPoint,!0),n=t.minus(e),i=this.deltaPointsFromPixels(n,!0);this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else this.zoomSpring.update();this.centerSpringX.update(),this.centerSpringY.update();var r=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,r},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,n){return t.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,n){var i=this.getBoundsNoRotate(n);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/i.width).plus(i.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(t,n){var i=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/i,n*this._contentSizeNoRotate.x/i)},viewportToImageCoordinates:function(t,n){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===i){var r=this.viewer.world.getItemAt(0);return r.viewportToImageCoordinates(t,n,!0)}}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,n){var i=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*i,n/this._contentSizeNoRotate.x*i)},imageToViewportCoordinates:function(t,n){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===i){var r=this.viewer.world.getItemAt(0);return r.imageToViewportCoordinates(t,n,!0)}}var o=this._imageToViewportDelta(t,n);return o.x+=this._contentBoundsNoRotate.x,o.y+=this._contentBoundsNoRotate.y,o},imageToViewportRectangle:function(t,n,i,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,n,i,r)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===s){var a=this.viewer.world.getItemAt(0);return a.imageToViewportRectangle(t,n,i,r,!0)}}var l=this.imageToViewportCoordinates(o.x,o.y),u=this._imageToViewportDelta(o.width,o.height);return new e.Rect(l.x,l.y,u.x,u.y,o.degrees)},viewportToImageRectangle:function(t,n,i,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,n,i,r)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===s){var a=this.viewer.world.getItemAt(0);return a.viewportToImageRectangle(t,n,i,r,!0)}}var l=this.viewportToImageCoordinates(o.x,o.y),u=this._viewportToImageDelta(o.width,o.height);return new e.Rect(l.x,l.y,u.x,u.y,o.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var n=this.imageToViewerElementCoordinates(t);return n.plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var n=this.viewportToViewerElementCoordinates(t);return n.plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===n){var i=this.viewer.world.getItemAt(0);return i.viewportToImageZoom(t)}}var r=this._contentSizeNoRotate.x,o=this._containerInnerSize.x,s=this._contentBoundsNoRotate.width,a=o/r*s;return t*a},imageToViewportZoom:function(t){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===n){var i=this.viewer.world.getItemAt(0);return i.imageToViewportZoom(t)}}var r=this._contentSizeNoRotate.x,o=this._containerInnerSize.x,s=this._contentBoundsNoRotate.width,a=r/o/s;return t*a}}}(OpenSeadragon),function(e){function t(t){t._needsDraw=!1;for(var i,r,s,a,l,u,h,f,d=null,p=!1,v=e.now(),m=t.viewport.getBoundsWithMargins(!0),y=t.viewport.deltaPixelsFromPointsNoRotate(t.source.getPixelRatio(0),!0).x*t._scaleSpring.current.value,w=Math.max(t.source.minLevel,Math.floor(Math.log(t.minZoomImageRatio)/Math.log(2))),x=Math.min(Math.abs(t.source.maxLevel),Math.abs(Math.floor(Math.log(y/t.minPixelRatio)/Math.log(2))));t.lastDrawn.length>0;)i=t.lastDrawn.pop(),i.beingDrawn=!1;if(!t.wrapHorizontal&&!t.wrapVertical){var S=t.getClippedBounds(!0),b=m.intersection(S);if(null===b)return;m=b}m=m.getBoundingBox(),m.x-=t._xSpring.current.value,m.y-=t._ySpring.current.value;var _=m.getTopLeft(),T=m.getBottomRight();if((t.wrapHorizontal||!(T.x<0||_.x>t._worldWidthCurrent))&&(t.wrapVertical||!(T.y<0||_.y>t._worldHeightCurrent))){t.wrapHorizontal||(_.x=Math.max(_.x,0),T.x=Math.min(T.x,t._worldWidthCurrent)),t.wrapVertical||(_.y=Math.max(_.y,0),T.y=Math.min(T.y,t._worldHeightCurrent)),w=Math.min(w,x);var E;for(r=x;r>=w;r--){if(E=!1,s=t.viewport.deltaPixelsFromPointsNoRotate(t.source.getPixelRatio(r),!0).x*t._scaleSpring.current.value,!p&&s>=t.minPixelRatio||r==w)E=!0,p=!0;else if(!p)continue;if(a=t.viewport.deltaPixelsFromPointsNoRotate(t.source.getPixelRatio(r),!1).x*t._scaleSpring.current.value,l=t.viewport.deltaPixelsFromPointsNoRotate(t.source.getPixelRatio(Math.max(t.source.getClosestLevel(t.viewport.containerSize)-1,0)),!1).x*t._scaleSpring.current.value,u=t.immediateRender?1:l,h=Math.min(1,(s-.5)/.5),f=u/Math.abs(u-a),d=n(t,p,E,r,h,f,_,T,v,d),c(t.coverage,r))break}g(t,t.lastDrawn),d&&!d.context2D&&o(t,d,v)}}function n(e,t,n,r,o,s,a,l,u,c){var h,f,p,g,v,m=e.viewport.pixelFromPoint(e.viewport.getCenter());for(e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:r,opacity:o,visibility:s,topleft:a,bottomright:l,currenttime:u,best:c}),p=e.source.getTileAtPoint(r,a.divide(e._scaleSpring.current.value)),g=e.source.getTileAtPoint(r,l.divide(e._scaleSpring.current.value)),v=e.source.getNumTiles(r),d(e.coverage,r),e.wrapHorizontal||(g.x=Math.min(g.x,v.x-1)),e.wrapVertical||(g.y=Math.min(g.y,v.y-1)),h=p.x;h<=g.x;h++)for(f=p.y;f<=g.y;f++)c=i(e,n,t,h,f,r,o,s,m,v,u,c);return c}function i(e,t,n,i,o,s,c,d,g,v,m,y){var w=r(i,o,s,e.source,e.tilesMatrix,m,v,e._worldWidthCurrent,e._worldHeightCurrent),x=t;if(e.viewer&&e.viewer.raiseEvent("update-tile",{tiledImage:e,tile:w}),f(e.coverage,s,i,o,!1),!w.exists)return y;if(n&&!x&&(h(e.coverage,s,i,o)?f(e.coverage,s,i,o,!0):x=!0),!x)return y;if(l(w,e.source.tileOverlap,e.viewport,g,d,e),!w.loaded)if(w.context2D)a(e,w);else{var S=e._tileCache.getImageRecord(w.url);if(S){var b=S.getImage();a(e,w,b)}}if(w.loaded){var _=u(e,w,i,o,s,c,m);_&&(e._needsDraw=!0)}else w.loading||(y=p(y,w));return y}function r(t,n,i,r,o,s,a,l,u){var c,h,f,d,p,g,v;return o[i]||(o[i]={}),o[i][t]||(o[i][t]={}),o[i][t][n]||(c=(a.x+t%a.x)%a.x,h=(a.y+n%a.y)%a.y,f=r.getTileBounds(i,c,h),d=r.tileExists(i,c,h),p=r.getTileUrl(i,c,h),g=r.getContext2D?r.getContext2D(i,c,h):void 0,f.x+=(t-c)/a.x,f.y+=u/l*((n-h)/a.y),o[i][t][n]=new e.Tile(i,t,n,f,d,p,g)),v=o[i][t][n],v.lastTouchTime=s,v}function o(e,t,n){t.loading=!0,e._imageLoader.addJob({src:t.url,crossOriginPolicy:e.crossOriginPolicy,callback:function(i,r){s(e,t,n,i,r)},abort:function(){t.loading=!1}})}function s(t,n,i,r,o){if(!r)return e.console.log("Tile %s failed to load: %s - error: %s",n,n.url,o),t.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:t,time:i,message:o}),n.loading=!1,void(n.exists=!1);if(i<t.lastResetTime)return e.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void(n.loading=!1);var s=function(){var e=Math.ceil(Math.log(t.source.getTileWidth(n.level))/Math.log(2));a(t,n,r,e)};t._midDraw?window.setTimeout(s,1):s()}function a(e,t,n,i){function r(){return s++,o}function o(){s--,0===s&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:n,tile:t,cutoff:i,tiledImage:e}),e._needsDraw=!0)}var s=0;e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,image:n,getCompletionCallback:r}),r()()}function l(t,n,i,r,o,s){var a=t.bounds.getTopLeft();a.x*=s._scaleSpring.current.value,a.y*=s._scaleSpring.current.value,a.x+=s._xSpring.current.value,a.y+=s._ySpring.current.value;var l=t.bounds.getSize();l.x*=s._scaleSpring.current.value,l.y*=s._scaleSpring.current.value;var u=i.pixelFromPointNoRotate(a,!0),c=i.pixelFromPointNoRotate(a,!1),h=i.deltaPixelsFromPointsNoRotate(l,!0),f=i.deltaPixelsFromPointsNoRotate(l,!1),d=c.plus(f.divide(2)),p=r.distanceTo(d);n||(h=h.plus(new e.Point(1,1))),t.position=u,t.size=h,t.distance=p,t.visibility=o}function u(e,t,n,i,r,o,s){var a,l,u=1e3*e.blendTime;if(t.blendStart||(t.blendStart=s),a=s-t.blendStart,l=u?Math.min(1,a/u):1,e.alwaysBlend&&(l*=o),t.opacity=l,e.lastDrawn.push(t),1==l)f(e.coverage,r,n,i,!0),e._hasOpaqueTile=!0;else if(u>a)return!0;return!1}function c(e,t,n,i){var r,o,s,a;if(!e[t])return!1;if(void 0===n||void 0===i){r=e[t];for(s in r)if(r.hasOwnProperty(s)){o=r[s];for(a in o)if(o.hasOwnProperty(a)&&!o[a])return!1}return!0}return void 0===e[t][n]||void 0===e[t][n][i]||e[t][n][i]===!0}function h(e,t,n,i){return void 0===n||void 0===i?c(e,t+1):c(e,t+1,2*n,2*i)&&c(e,t+1,2*n,2*i+1)&&c(e,t+1,2*n+1,2*i)&&c(e,t+1,2*n+1,2*i+1)}function f(t,n,i,r,o){return t[n]?(t[n][i]||(t[n][i]={}),void(t[n][i][r]=o)):void e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function d(e,t){e[t]={}}function p(e,t){return e?t.visibility>e.visibility?t:t.visibility==e.visibility&&t.distance<e.distance?t:e:t}function g(t,n){if(0!==n.length){var i,r,o=n[0],s=t.opacity<1||t.compositeOperation&&"source-over"!==t.compositeOperation||!t._isBottomItem()&&o._hasTransparencyChannel(),a=t.viewport.getZoom(!0),l=t.viewportToImageZoom(a);l>t.smoothTileEdgesMinZoom&&(s=!0,i=o.getScaleForEdgeSmoothing(),r=o.getTranslationForEdgeSmoothing(i,t._drawer.getCanvasSize(!1),t._drawer.getCanvasSize(!0)));var u;s&&(i||(u=t.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox().times(e.pixelDensityRatio)),t._drawer._clear(!0,u)),0===t.viewport.degrees||i||t._drawer._offsetForRotation(t.viewport.degrees,s);var c=!1;if(t._clip){t._drawer.saveContext(s);var h=t.imageToViewportRectangle(t._clip,!0),f=t._drawer.viewportToDrawerRectangle(h);i&&(f=f.times(i)),r&&(f=f.translate(r)),t._drawer.setClip(f,s),c=!0}if(t.placeholderFillStyle&&t._hasOpaqueTile===!1){var d=t._drawer.viewportToDrawerRectangle(t.getBounds(!0));i&&(d=d.times(i)),r&&(d=d.translate(r));var p=null;p="function"==typeof t.placeholderFillStyle?t.placeholderFillStyle(t,t._drawer.context):t.placeholderFillStyle,t._drawer.drawRectangle(d,p,s)}for(var g=n.length-1;g>=0;g--)o=n[g],t._drawer.drawTile(o,t._drawingHandler,s,i,r),o.beingDrawn=!0,t.viewer&&t.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:o});if(c&&t._drawer.restoreContext(s),0===t.viewport.degrees||i||t._drawer._restoreRotationChanges(s),s){var m=0!==t.viewport.degrees&&i;m&&t._drawer._offsetForRotation(t.viewport.degrees,!1),t._drawer.blendSketch({opacity:t.opacity,scale:i,translate:r,compositeOperation:t.compositeOperation,bounds:u}),m&&t._drawer._restoreRotationChanges(!1)}v(t,n)}}function v(t,n){if(t.debugMode)for(var i=n.length-1;i>=0;i--){var r=n[i];try{t._drawer.drawDebugInfo(r,n.length,i)}catch(o){e.console.error(o)}}}e.TiledImage=function(t){var n=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var i=t.x||0;delete t.x;var r=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var o=1;t.width?(o=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(o=t.height/this.normHeight,delete t.height);var s=t.fitBounds;delete t.fitBounds;var a=t.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete t.fitBoundsPlacement,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation},t),this._xSpring=new e.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),s&&this.fitBounds(s,a,!0),this._drawingHandler=function(t){n.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:n},t))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.current.value,t=this._ySpring.current.value,n=this._scaleSpring.current.value;return this._xSpring.update(),this._ySpring.update(),this._scaleSpring.update(),this._xSpring.current.value!==e||this._ySpring.current.value!==t||this._scaleSpring.current.value!==n?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){0!==this.opacity&&(this._midDraw=!0,t(this),this._midDraw=!1)},destroy:function(){this.reset()},getBounds:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var n=this.getBounds(t);if(this._clip){var i=this._worldWidthCurrent/this.source.dimensions.x,r=this._clip.times(i);n=new e.Rect(n.x+r.x,n.y+r.y,r.width,r.height)}return n},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(t,n,i){var r=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/r),n*(this.source.dimensions.y*this.contentAspectX/r))},viewportToImageCoordinates:function(t,n,i){return t instanceof e.Point&&(i=n,n=t.y,t=t.x),i?this._viewportToImageDelta(t-this._xSpring.current.value,n-this._ySpring.current.value):this._viewportToImageDelta(t-this._xSpring.target.value,n-this._ySpring.target.value)},_imageToViewportDelta:function(t,n,i){
var r=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*r,n/this.source.dimensions.y/this.contentAspectX*r)},imageToViewportCoordinates:function(t,n,i){t instanceof e.Point&&(i=n,n=t.y,t=t.x);var r=this._imageToViewportDelta(t,n);return i?(r.x+=this._xSpring.current.value,r.y+=this._ySpring.current.value):(r.x+=this._xSpring.target.value,r.y+=this._ySpring.target.value),r},imageToViewportRectangle:function(t,n,i,r,o){var s=t;s instanceof e.Rect?o=n:s=new e.Rect(t,n,i,r);var a=this.imageToViewportCoordinates(s.getTopLeft(),o),l=this._imageToViewportDelta(s.width,s.height,o);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees)},viewportToImageRectangle:function(t,n,i,r,o){var s=t;t instanceof e.Rect?o=n:s=new e.Rect(t,n,i,r);var a=this.viewportToImageCoordinates(s.getTopLeft(),o),l=this._viewportToImageDelta(s.width,s.height,o);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees)},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){var t=this.imageToViewerElementCoordinates(e);return t.plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewportToImageZoom:function(e){var t=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return t*e},imageToViewportZoom:function(e){var t=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return e/t},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},fitBounds:function(t,n,i){n=n||e.Placement.CENTER;var r=e.Placement.properties[n],o=this.contentAspectX,s=0,a=0,l=1,u=1;if(this._clip&&(o=this._clip.getAspectRatio(),l=this._clip.width/this.source.dimensions.x,u=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>o?(s=this._clip.x/this._clip.height*t.height,a=this._clip.y/this._clip.height*t.height):(s=this._clip.x/this._clip.width*t.width,a=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>o){var c=t.height/u,h=0;r.isHorizontallyCentered?h=(t.width-t.height*o)/2:r.isRight&&(h=t.width-t.height*o),this.setPosition(new e.Point(t.x-s+h,t.y-a),i),this.setHeight(c,i)}else{var f=t.width/l,d=0;r.isVerticallyCentered?d=(t.height-t.width/o)/2:r.isBottom&&(d=t.height-t.width/o),this.setPosition(new e.Point(t.x-s,t.y-a+d),i),this.setWidth(f,i)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(e){this.opacity=e,this._needsDraw=!0},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){this.compositeOperation=e,this._needsDraw=!0},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this}})}(OpenSeadragon),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},n=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.image,"[ImageRecord] options.image is required"),this._image=t.image,this._tiles=[]};n.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(t){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=t},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===t)return void this._tiles.splice(n,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(i){e.console.assert(i,"[TileCache.cacheTile] options is required"),e.console.assert(i.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(i.tile.url,"[TileCache.cacheTile] options.tile.url is required"),e.console.assert(i.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var r=i.cutoff||0,o=this._tilesLoaded.length,s=this._imagesLoaded[i.tile.url];if(s||(e.console.assert(i.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),s=this._imagesLoaded[i.tile.url]=new n({image:i.image}),this._imagesLoadedCount++),s.addTile(i.tile),i.tile.cacheImageRecord=s,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,l,u,c,h,f,d=null,p=-1,g=null,v=this._tilesLoaded.length-1;v>=0;v--)f=this._tilesLoaded[v],a=f.tile,a.level<=r||a.beingDrawn||(d?(c=a.lastTouchTime,l=d.lastTouchTime,h=a.level,u=d.level,(l>c||c==l&&h>u)&&(d=a,p=v,g=f)):(d=a,p=v,g=f));d&&p>=0&&(this._unloadTile(g),o=p)}this._tilesLoaded[o]=new t({tile:i.tile,tiledImage:i.tiledImage})},clearTilesFor:function(t){e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var n,i=0;i<this._tilesLoaded.length;++i)n=this._tilesLoaded[i],n.tiledImage===t&&(this._unloadTile(n),this._tilesLoaded.splice(i,1),i--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] url is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var n=t.tile,i=t.tiledImage;n.unload(),n.cacheImageRecord=null;var r=this._imagesLoaded[n.url];r.removeTile(n),r.getTileCount()||(r.destroy(),delete this._imagesLoaded[n.url],this._imagesLoadedCount--),i.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:i})}}}(OpenSeadragon),function(e){e.World=function(t){var n=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,n){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),n=n||{},void 0!==n.index){var i=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(i,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,n){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==n,"[World.setItemIndex] index is required");var i=this.getIndexOfItem(t);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n!==i&&-1!==i&&(this._items.splice(i,1),this._items.splice(n,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:i,newIndex:n}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var n=e.indexOf(this._items,t);-1!==n&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){this.viewer._cancelPendingImages();for(var e,t=0;t<this._items.length;t++)e=this._items[t],e.removeHandler("bounds-change",this._delegatedFigureSizes),e.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<n.length;t++)e=n[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){t=t||{};var n,i=t.immediately||!1,r=t.layout||e.DEFAULT_SETTINGS.collectionLayout,o=t.rows||e.DEFAULT_SETTINGS.collectionRows,s=t.columns||e.DEFAULT_SETTINGS.collectionColumns,a=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,l=t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin,u=a+l;n=!t.rows&&s?s:Math.ceil(this._items.length/o);var c,h,f,d,p,g=0,v=0;this.setAutoRefigureSizes(!1);for(var m=0;m<this._items.length;m++)m&&m%n===0&&("horizontal"===r?(v+=u,g=0):(g+=u,v=0)),c=this._items[m],h=c.getBounds(),f=h.width>h.height?a:a*(h.width/h.height),d=f*(h.height/h.width),p=new e.Point(g+(a-f)/2,v+(a-d)/2),c.setPosition(p,i),c.setWidth(f,i),"horizontal"===r?g+=u:v+=u;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,i=this._contentFactor||0;if(this._items.length){var r=this._items[0],o=r.getBounds();this._contentFactor=r.getContentSize().x/o.width;for(var s=r.getClippedBounds(),a=s.x,l=s.y,u=s.x+s.width,c=s.y+s.height,h=1;h<this._items.length;h++)r=this._items[h],o=r.getBounds(),this._contentFactor=Math.max(this._contentFactor,r.getContentSize().x/o.width),s=r.getClippedBounds(),a=Math.min(a,s.x),l=Math.min(l,s.y),u=Math.max(u,s.x+s.width),c=Math.max(c,s.y+s.height);this._homeBounds=new e.Rect(a,l,u-a,c-l),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===i&&this._homeBounds.equals(t)&&this._contentSize.equals(n)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(OpenSeadragon)},function(e,t,n){(function(t){"use strict";/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function i(e,t){if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);o>r;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return i>n?-1:n>i?1:0}function r(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function s(e){return r(e)?!1:"function"!=typeof t.ArrayBuffer?!1:"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e?e instanceof DataView?!0:!!(e.buffer&&e.buffer instanceof ArrayBuffer):!1}function a(e){if(x.isFunction(e)){if(_)return e.name;var t=e.toString(),n=t.match(E);return n&&n[1]}}function l(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(_||!x.isFunction(e))return x.inspect(e);var t=a(e),n=t?": "+t:"";return"[Function"+n+"]"}function c(e){return l(u(e.actual),128)+" "+e.operator+" "+l(u(e.expected),128)}function h(e,t,n,i,r){throw new T.AssertionError({message:n,actual:e,expected:t,operator:i,stackStartFunction:r})}function f(e,t){e||h(e,!0,t,"==",T.ok)}function d(e,t,n,a){if(e===t)return!0;if(r(e)&&r(t))return 0===i(e,t);if(x.isDate(e)&&x.isDate(t))return e.getTime()===t.getTime();if(x.isRegExp(e)&&x.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(s(e)&&s(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(r(e)!==r(t))return!1;a=a||{actual:[],expected:[]};var l=a.actual.indexOf(e);return-1!==l&&l===a.expected.indexOf(t)?!0:(a.actual.push(e),a.expected.push(t),g(e,t,n,a))}return n?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t,n,i){if(null===e||void 0===e||null===t||void 0===t)return!1;if(x.isPrimitive(e)||x.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var r=p(e),o=p(t);if(r&&!o||!r&&o)return!1;if(r)return e=b.call(e),t=b.call(t),d(e,t,n);var s,a,l=P(e),u=P(t);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),a=l.length-1;a>=0;a--)if(l[a]!==u[a])return!1;for(a=l.length-1;a>=0;a--)if(s=l[a],!d(e[s],t[s],n,i))return!1;return!0}function v(e,t,n){d(e,t,!0)&&h(e,t,n,"notDeepStrictEqual",v)}function m(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function y(e){var t;try{e()}catch(n){t=n}return t}function w(e,t,n,i){var r;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=y(t),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!r&&h(r,n,"Missing expected exception"+i);var o="string"==typeof i,s=!e&&x.isError(r),a=!e&&r&&!n;if((s&&o&&m(r,n)||a)&&h(r,n,"Got unwanted exception"+i),e&&r&&n&&!m(r,n)||!e&&r)throw r}var x=n(302),S=Object.prototype.hasOwnProperty,b=Array.prototype.slice,_=function(){return"foo"===function(){}.name}(),T=e.exports=f,E=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var i=n.stack,r=a(t),o=i.indexOf("\n"+r);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}},x.inherits(T.AssertionError,Error),T.fail=h,T.ok=f,T.equal=function(e,t,n){e!=t&&h(e,t,n,"==",T.equal)},T.notEqual=function(e,t,n){e==t&&h(e,t,n,"!=",T.notEqual)},T.deepEqual=function(e,t,n){d(e,t,!1)||h(e,t,n,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(e,t,n){d(e,t,!0)||h(e,t,n,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(e,t,n){d(e,t,!1)&&h(e,t,n,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=v,T.strictEqual=function(e,t,n){e!==t&&h(e,t,n,"===",T.strictEqual)},T.notStrictEqual=function(e,t,n){e===t&&h(e,t,n,"!==",T.notStrictEqual)},T["throws"]=function(e,t,n){w(!0,e,t,n)},T.doesNotThrow=function(e,t,n){w(!1,e,t,n)},T.ifError=function(e){if(e)throw e};var P=Object.keys||function(e){var t=[];for(var n in e)S.call(e,n)&&t.push(n);return t}}).call(t,function(){return this}())},function(e,t,n){(function(e,i){function r(e,n){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(n)?i.showHidden=n:n&&t._extend(i,n),S(i.showHidden)&&(i.showHidden=!1),S(i.depth)&&(i.depth=2),S(i.colors)&&(i.colors=!1),S(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,n,i){if(e.customInspect&&n&&P(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return w(r)||(r=l(e,r,i)),r}var o=u(e,n);if(o)return o;var s=Object.keys(n),g=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(n);if(0===s.length){if(P(n)){var v=n.name?": "+n.name:"";return e.stylize("[Function"+v+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return c(n)}var m="",y=!1,x=["{","}"];if(p(n)&&(y=!0,x=["[","]"]),P(n)){var S=n.name?": "+n.name:"";m=" [Function"+S+"]"}if(b(n)&&(m=" "+RegExp.prototype.toString.call(n)),T(n)&&(m=" "+Date.prototype.toUTCString.call(n)),E(n)&&(m=" "+c(n)),0===s.length&&(!y||0==n.length))return x[0]+m+x[1];if(0>i)return b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var _;return _=y?h(e,n,i,g,s):s.map(function(t){return f(e,n,i,g,t,y)}),e.seen.pop(),d(_,m,x)}function u(e,t){if(S(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,i,r){for(var o=[],s=0,a=t.length;a>s;++s)I(t,String(s))?o.push(f(e,t,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(e,t,n,i,r,!0))}),o}function f(e,t,n,i,r,o){var s,a,u;if(u=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),I(i,r)||(s="["+r+"]"),a||(e.seen.indexOf(u.value)<0?(a=v(n)?l(e,u.value,null):l(e,u.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),S(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function m(e){return null==e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function S(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===O(e)}function _(e){return"object"==typeof e&&null!==e}function T(e){return _(e)&&"[object Date]"===O(e)}function E(e){return _(e)&&("[object Error]"===O(e)||e instanceof Error)}function P(e){return"function"==typeof e}function R(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function O(e){return Object.prototype.toString.call(e)}function C(e){return 10>e?"0"+e.toString(10):e.toString(10)}function k(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var F=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(e).replace(F,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}}),a=i[n];o>n;a=i[++n])s+=v(a)||!_(a)?" "+a:" "+r(a);return s},t.deprecate=function(n,r){function o(){if(!s){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),s=!0}return n.apply(this,arguments)}if(S(e.process))return function(){return t.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var s=!1;return o};var A,M={};t.debuglog=function(e){if(S(A)&&(A=i.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(A)){var n=i.pid;M[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else M[e]=function(){};return M[e]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=g,t.isNull=v,t.isNullOrUndefined=m,t.isNumber=y,t.isString=w,t.isSymbol=x,t.isUndefined=S,t.isRegExp=b,t.isObject=_,t.isDate=T,t.isError=E,t.isFunction=P,t.isPrimitive=R,t.isBuffer=n(303);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",k(),t.format.apply(t,arguments))},t.inherits=n(304),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(t,function(){return this}(),n(295))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?null:arguments[3],r=arguments.length<=4||void 0===arguments[4]?null:arguments[4],o=arguments.length<=5||void 0===arguments[5]?null:arguments[5],s=arguments.length<=6||void 0===arguments[6]?null:arguments[6],a=arguments.length<=7||void 0===arguments[7]?null:arguments[7];return{type:"image",payload:{image:e,collection:r,key:i,related:o,label:s,height:t,width:n,source:a}}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.createImageAction=a;var u=n(306),c=(i(u),n(300)),h=i(c),f=n(307),d=n(314),p=i(d),g=n(315),v=n(316),m=i(v),y=n(317),w=function(e){function t(e){r(this,t),e.visibilityRatio=e.visibilityRatio?e.visibilityRatio:1,e.homeFillsViewer=e.homeFillsViewer?e.homeFillsViewer:!0,e.constrainDuringPan=e.constrainDuringPan?e.constrainDuringPan:!0,e.prefixUrl=e.prefixUrl?e.prefixUrl:"images/",e.animationTime=e.animationTime?e.animationTime:.3,e.minZoomLevel=e.minZoomLevel?e.minZoomLevel:7e-4,e.show3DFloor=e.show3DFloor?e.show3DFloor:!0,e.springStiffness=e.springStiffness?e.springStiffness:100,e.crossOriginPolicy=e.crossOriginPolicy?e.crossOriginPolicy:"Anonymous";var n=o(this,Object.getPrototypeOf(t).call(this,e));n.wallImageWidth=e.wallImageWidth||300,n.wallImageSpacing=e.wallImageSpacing||150,n.wallOffsetTop=e.wallOffsetTop||120,n.wallOffsetLeft=e.wallOffsetLeft||n.wallImageWidth/2,n.resolveVideo=e.resolveVideo||n.resolveVideo,n.resolveCollectionImages=e.resolveCollectionImages||n.resolveCollectionImages,n.backgroundWallImage=e.backgroundWallImage||"http://dlcs.io/iiif-img/4/4/7ade194e-2bed-4b0d-afd0-939bca603cba/info.json",n.backgroundWallWidth=e.backgroundWallWidth||1500,n.labelLinkEnabled=e.labelLinkEnabled||!1,n.show3DFloor=e.show3DFloor||!1,n._3dfloor=[];var i=e.collection||null;return n.configureImageQueue(),n.mediaTypes={image:n.appendWallImage,html:n.appendWallHtml},n.blurGallery(),i&&n.resolve(i),n.recalculateWall([]),n}return s(t,e),l(t,[{key:"push",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];e=h["default"].isArray(e)?e:[e],this.queue.pushAll(e),t&&this.queue.flush()}},{key:"resolve",value:function(e){var t=this;return"string"==typeof e&&(e=(0,y.IIIFCollectionResolver)(e)),e.then(function(e){t.push(e)})}},{key:"addMediaType",value:function(e,t){this.mediaTypes[e]=t.bind(this)}},{key:"configureImageQueue",value:function(){var e=this;this.queue=new p["default"](function(t,n){if(t){if(!e.mediaTypes[t.type])throw Error("Unsupported media type");e.mediaTypes[t.type].apply(e,[t.payload,n,n+100])}}),this.queue.beforeFlushStart=function(){e.clearOverlays(),e.blurGallery(),e.overlaysContainer.innerHTML=""},this.queue.onFlushEnd=function(t){e.recalculateWall(t).then(function(){return e.focusGallery()})}}},{key:"appendWallHtml",value:function(e,t,n){return Promise.resolve(this.addOverlay({element:e.element,location:new OpenSeadragon.Rect(this.wallOffsetLeft+t*(this.wallImageWidth+this.wallImageSpacing),this.wallOffsetTop,this.wallImageWidth,this.wallImageWidth)}))}},{key:"appendWallImage",value:function(e,t,n){var i=e.image,r=e.height,o=e.width,s=e.label,a=e.related,l=this,u=(arguments.length<=3||void 0===arguments[3]?!0:arguments[3],{tileSource:i,width:this.wallImageWidth,index:n,y:this.wallOffsetTop,x:this.wallOffsetLeft+t*(this.wallImageWidth+this.wallImageSpacing)}),c=[];if(r&&o){var h=r/o,f=this.wallImageWidth*h;f>this.wallImageWidth&&(u.width=this.wallImageWidth*(this.wallImageWidth/f)),u.width-this.wallImageWidth!==0&&(u.x+=(this.wallImageWidth-u.width)/2),f-this.wallImageWidth<0&&(u.y+=(this.wallImageWidth-f)/2),s&&!function(){var e=45,t=30,n=u.x-e-10,i=u.y+u.width*h-t;c.push(l.createLabelElement(s,t,e,a).then(function(r){l.asyncAddOverlay({element:r,location:new OpenSeadragon.Rect(n,i,e,t)})}))}()}return c.push(this.asyncAddTiledImage(u)),Promise.all(c)}},{key:"createLabelElement",value:function(e,t,n,i){var r=this;return(0,g.LabelElement)({label:e,height:t,width:n,imagePath:"./images/label.png"}).then(function(e){var t=e.toDataURL(),n=void 0;i&&r.labelLinkEnabled?(n=document.createElement("a"),n.href=i,n.setAttribute("target","_blank"),n.onclick=function(e){if(!e.quick){var t=e?e:window.event;t.stopPropagation&&t.stopPropagation(),null!==t.cancelBubble&&(t.cancelBubble=!0)}},n.setAttribute("style","display: block;")):n=document.createElement("div");var o=document.createElement("img");return o.src=t,o.setAttribute("style","width:100%;"),n.appendChild(o),n})}},{key:"asyncAddTiledImage",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return new Promise(function(t,i){n[0]&&(n[0].success=t);try{e.addTiledImage.apply(e,n)}catch(r){i(r)}})}},{key:"asyncAddOverlay",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return Promise.resolve(this.addOverlay.apply(this,t))}},{key:"resetAllTiles",value:function(e){this.blurGallery(),this.world.removeAll(),this.queue.reset(),this.recalculateWall([]),e&&this.resolve(e)}},{key:"blurGallery",value:function(){(0,m["default"])(this.element,{blur:15},{duration:200})}},{key:"focusGallery",value:function(){(0,m["default"])(this.element,{blur:0},{duration:800})}},{key:"create3DFloor",value:function(e){var t=this,n=document.createElement("div");n.setAttribute("style","-webkit-transform: translate3d(0, 0, 0);-moz-transform: translate3d(0, 0, 0);-ms-transform: translate3d(0, 0, 0);transform: translate3d(0, 0, 0);");var i=document.createElement("div");i.setAttribute("id","floor");var r="http://allroundnews.com/wp-content/uploads/2012/10/seamless-white-wood-textures.jpg";i.setAttribute("style","background-image:url("+r+");background-repeat:repeat-x;width: 100%;height: 100%;transform:matrix3d(1,0,0.00,0,0.00,0.3,0.94,-0.001,0,-0.94,0.34,0,0,0,0,1)");var o=(0,f.throttle)(function(t){i.style.transformOrigin=t/e*100+"% 0%"},1e3/60),s=(0,f.throttle)(function(e){(0,m["default"])(i,{opacity:t.viewport.getZoom(!0)>.0013?0:1},{duration:0}),o(t.viewport.centerSpringX.current.value)},1e3/60),a=function(n){if(!(1e3>e||n.immediately)){var i=t.viewport.getBounds();i.x+i.width>e&&t.viewport.centerSpringX.resetTo(e-i.width/2)}};return this.addHandler("viewport-change",a),this.addHandler("pan",function(e){return o(e.center.x)}),this.addHandler("viewport-change",function(e){return o(t.viewport.centerSpringX.current.value)}),this.addHandler("add-overlay",function(n){i.offsetWidth/i.offsetHeight>1&&((0,m["default"])(i,{backgroundSize:30/(e/950)+"%"},{duration:0}),o(t.viewport.centerSpringX.current.value))}),this.addHandler("zoom",s),n.appendChild(i),n}},{key:"add3DFloor",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?300:arguments[1];return this.asyncAddOverlay({element:this.create3DFloor(e),location:new OpenSeadragon.Rect(0,580,e,t)})}},{key:"recalculateWall",value:function(e){var t=e?e.length:0,n=this.wallOffsetLeft+t*(this.wallImageWidth+this.wallImageSpacing),i=Math.ceil(n/this.backgroundWallWidth);return Promise.all([this.makeWall(i,-this.wallOffsetTop),this.show3DFloor?this.add3DFloor(n):function(){}])}},{key:"makeWall",value:function(e){for(var t=(arguments.length<=1||void 0===arguments[1]?0:arguments[1],[]);e-- >0;)t.push(this.asyncAddTiledImage({tileSource:this.backgroundWallImage,width:this.backgroundWallWidth,index:e,clip:OpenSeadragon.Rect(0,100,this.backgroundWallWidth,this.backgroundWallWidth),x:e*this.backgroundWallWidth,y:0}));return Promise.all(t)}}]),t}(c.Viewer);t["default"]=w},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(307),l=n(308),u=i(l),c=n(309),h=i(c),f=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.manifests=(0,a.mapArrayOf)(h["default"],n.manifests),n.images=n.manifests.map(function(e){return e.getImageSource()}),n}return s(t,e),t}(u["default"]);t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];return new Promise(function(n,i){y["default"].makeAjaxRequest(e,function(e){return n(t?JSON.parse(e.responseText):e)},i)})}function o(e){return function(){for(var t=Array.prototype.slice.call(arguments),n="",i=t.length,r=null;i--;)r=t[i],n+=r===Object(r)?JSON.stringify(r):r,e.memoize||(e.memoize={});return n in e.memoize?e.memoize[n]:e.memoize[n]=e.apply(this,t)}}function s(e,t){return function(){var n=(new Date).getTime();return!e.lastExecuted||e.lastExecuted+t<n?(e.lastExecuted=n,e.apply(e,arguments)):void 0}}function a(e,t){return t=t||100,function(){if(!e.debouncing){var n=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,n),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}function l(e,t){e.save(),t(e),e.restore()}function u(e,t,n){for(var i=t.split(" "),r=[],o=i[0],s=1;s<i.length;s++){var a=i[s],l=e.measureText(o+" "+a).width;n>l?o+=" "+a:(r.push(o),o=a)}return r.push(o),r}function c(e,t){if(!t)return[];var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;n.push(new e(l))}}catch(u){r=!0,o=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}function h(e){var t=arguments.length<=1||void 0===arguments[1]?window.location.href:arguments[1],n=new RegExp("[?&]"+e+"=([^&#]*)","i"),i=n.exec(t);return i?i[1]:null}function f(e){return!(e.length<10||e.length>1200||/\s/.test(e))}function d(e){if(!e)return!1;var t=document.createElement("a");return t.href=e.getData("text/uri-list"),t.search}function p(e,t){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(0>=t)throw new Error("Invalid index");var i=1,r=[],o=!0,s=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;if(r.push(c),i++==t)return r}}catch(h){s=!0,a=h}finally{try{!o&&u["return"]&&u["return"]()}finally{if(s)throw a}}if(n)return r;throw new Error("Generator has fewer than "+t+" elements")}function g(){return++x}function v(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,++x;case 3:e.next=0;break;case 5:case"end":return e.stop()}},w[0],this)}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=r,t.memoize=o,t.throttle=s,t.debounce=a,t.withContext=l,t.getCanvasLines=u,t.mapArrayOf=c,t.getQueryString=h,t.validateIIIFUri=f,t.getUriFromDropTarget=d,t.take=p,t.uid=g,t.gen_uid=v;var m=n(300),y=i(m),w=[v].map(regeneratorRuntime.mark),x=0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(300),a=i(s),l=function(){function e(t){r(this,e),this.mapFrom(t)}return o(e,[{key:"id",value:function(){return this.getProp("@id")}},{key:"getProp",value:function(e){return this[e]}},{key:"mapFrom",value:function(e){a["default"].extend(this,e)}}]),e}();t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(301),u=i(l),c=n(307),h=n(308),f=i(h),d=n(310),p=i(d),g=function(e){function t(e){r(this,t),u["default"].strictEqual(e["@type"],"sc:Manifest");var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.sequences=(0,c.mapArrayOf)(p["default"],n.sequences),n}return s(t,e),a(t,[{key:"getAllImages",value:regeneratorRuntime.mark(function n(){var e,t,i,r,o,s,a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=!0,t=!1,i=void 0,n.prev=3,r=this.sequences[Symbol.iterator]();case 5:if(e=(o=r.next()).done){n.next=11;break}return s=o.value,n.delegateYield(s.getImages(Object.assign({},a,{label:this.label})),"t0",8);case 8:e=!0,n.next=5;break;case 11:n.next=17;break;case 13:n.prev=13,n.t1=n["catch"](3),t=!0,i=n.t1;case 17:n.prev=17,n.prev=18,!e&&r["return"]&&r["return"]();case 20:if(n.prev=20,!t){n.next=23;break}throw i;case 23:return n.finish(20);case 24:return n.finish(17);case 25:case"end":return n.stop()}},n,this,[[3,13,17,25],[18,,20,24]])})},{key:"getImageSource",value:function(){if(this.thumbnail&&this.thumbnail.service)return this.thumbnail.service["@id"]+"/info.json";throw"Thumbnail service not found on collection"}},{key:"getRelatedItem",value:function(){return this.related&&"text/html"===this.related.format?this.related["@id"]:void 0}}]),t}(f["default"]);t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(308),u=i(l),c=n(307),h=n(311),f=i(h),d=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.canvases=(0,c.mapArrayOf)(f["default"],n.canvases),n}return s(t,e),a(t,[{key:"getImages",value:regeneratorRuntime.mark(function n(){var e,t,i,r,o,s,a,l=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=!0,t=!1,i=void 0,n.prev=3,r=this.canvases[Symbol.iterator]();case 5:if(e=(o=r.next()).done){n.next=14;break}if(s=o.value,a=s.getFirstImage(),!a){n.next=11;break}return n.next=11,Object.assign({},l,{image:a,key:(0,c.uid)(),height:s.height,width:s.width,label:s.label?s.label:l.label});case 11:e=!0,n.next=5;break;case 14:n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](3),t=!0,i=n.t0;case 20:n.prev=20,n.prev=21,!e&&r["return"]&&r["return"]();case 23:if(n.prev=23,!t){n.next=26;break}throw i;case 26:return n.finish(23);case 27:return n.finish(20);case 28:case"end":return n.stop()}},n,this,[[3,16,20,28],[21,,23,27]])})}]),t}(u["default"]);t["default"]=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(308),u=i(l),c=(n(307),n(312),function(e){function t(e){return r(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return s(t,e),a(t,[{key:"getFirstImage",value:function(){return this.images[0]&&this.images[0].resource&&this.images[0].resource.service&&this.images[0].resource.service["@id"]?this.images[0].resource.service["@id"]+"/info.json":null}}]),t}(u["default"]));t["default"]=c},function(e,t,n){var i;(function(e,r){(function(){function o(e,t){return e.set(t[0],t[1]),e}function s(e,t){return e.add(t),e}function a(e,t,n){var i=n.length;switch(i){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function l(e,t,n,i){for(var r=-1,o=e?e.length:0;++r<o;){var s=e[r];t(i,s,n(s),e)}return i}function u(e,t){for(var n=-1,i=e?e.length:0;++n<i&&t(e[n],n,e)!==!1;);return e}function c(e,t){for(var n=e?e.length:0;n--&&t(e[n],n,e)!==!1;);return e}function h(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(!t(e[n],n,e))return!1;return!0}function f(e,t){for(var n=-1,i=e?e.length:0,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}function d(e,t){var n=e?e.length:0;return!!n&&b(e,t,0)>-1}function p(e,t,n){for(var i=-1,r=e?e.length:0;++i<r;)if(n(t,e[i]))return!0;return!1}function g(e,t){for(var n=-1,i=e?e.length:0,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function v(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function m(e,t,n,i){var r=-1,o=e?e.length:0;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function y(e,t,n,i){var r=e?e.length:0;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function w(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}function x(e,t,n){var i;return n(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function S(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function b(e,t,n){if(t!==t)return j(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function _(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function T(e,t){var n=e?e.length:0;return n?R(e,t)/n:Pe}function E(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function P(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function R(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);o!==K&&(n=n===K?o:n+o)}return n}function O(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function C(e,t){return g(t,function(t){return[t,e[t]]})}function k(e){return function(t){return e(t)}}function I(e,t){return g(t,function(t){return e[t]})}function F(e,t){return e.has(t)}function A(e,t){for(var n=-1,i=e.length;++n<i&&b(t,e[n],0)>-1;);return n}function M(e,t){for(var n=e.length;n--&&b(t,e[n],0)>-1;);return n}function D(e){return e&&e.Object===Object?e:null}function B(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&i++;
return i}function L(e){return Cn[e]}function z(e){return kn[e]}function N(e){return"\\"+Fn[e]}function H(e,t){return null==e?K:e[t]}function j(e,t,n){for(var i=e.length,r=t+(n?1:-1);n?r--:++r<i;){var o=e[r];if(o!==o)return r}return-1}function V(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function W(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function U(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function $(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n];s!==t&&s!==ie||(e[n]=ie,o[r++]=n)}return o}function q(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function G(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Z(e){if(!e||!_n.test(e))return e.length;for(var t=Sn.lastIndex=0;Sn.test(e);)t++;return t}function X(e){return e.match(Sn)}function Y(e){return In[e]}function Q(e){function t(e){if(ya(e)&&!vh(e)&&!(e instanceof r)){if(e instanceof i)return e;if(Cu.call(e,"__wrapped__"))return ho(e)}return new i(e)}function n(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=K}function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function D(){var e=new r(this.__wrapped__);return e.__actions__=nr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nr(this.__views__),e}function Dt(){if(this.__filtered__){var e=new r(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Bt(){var e=this.__wrapped__.value(),t=this.__dir__,n=vh(e),i=0>t,r=n?e.length:0,o=Vr(0,r,this.__views__),s=o.start,a=o.end,l=a-s,u=i?a:s-1,c=this.__iteratees__,h=c.length,f=0,d=Ju(l,this.__takeCount__);if(!n||ee>r||r==l&&d==l)return Li(e,this.__actions__);var p=[];e:for(;l--&&d>f;){u+=t;for(var g=-1,v=e[u];++g<h;){var m=c[g],y=m.iteratee,w=m.type,x=y(v);if(w==Se)v=x;else if(!x){if(w==xe)continue e;break e}}p[f++]=v}return p}function Lt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function zt(){this.__data__=cc?cc(null):{}}function Nt(e){return this.has(e)&&delete this.__data__[e]}function Ht(e){var t=this.__data__;if(cc){var n=t[e];return n===ne?K:n}return Cu.call(t,e)?t[e]:K}function jt(e){var t=this.__data__;return cc?t[e]!==K:Cu.call(t,e)}function Vt(e,t){var n=this.__data__;return n[e]=cc&&t===K?ne:t,this}function Wt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ut(){this.__data__=[]}function $t(e){var t=this.__data__,n=pn(t,e);if(0>n)return!1;var i=t.length-1;return n==i?t.pop():Uu.call(t,n,1),!0}function qt(e){var t=this.__data__,n=pn(t,e);return 0>n?K:t[n][1]}function Gt(e){return pn(this.__data__,e)>-1}function Zt(e,t){var n=this.__data__,i=pn(n,e);return 0>i?n.push([e,t]):n[i][1]=t,this}function Xt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Yt(){this.__data__={hash:new Lt,map:new(sc||Wt),string:new Lt}}function Qt(e){return Br(this,e)["delete"](e)}function Kt(e){return Br(this,e).get(e)}function Jt(e){return Br(this,e).has(e)}function en(e,t){return Br(this,e).set(e,t),this}function tn(e){var t=-1,n=e?e.length:0;for(this.__data__=new Xt;++t<n;)this.add(e[t])}function nn(e){return this.__data__.set(e,ne),this}function rn(e){return this.__data__.has(e)}function on(e){this.__data__=new Wt(e)}function sn(){this.__data__=new Wt}function an(e){return this.__data__["delete"](e)}function ln(e){return this.__data__.get(e)}function un(e){return this.__data__.has(e)}function cn(e,t){var n=this.__data__;return n instanceof Wt&&n.__data__.length==ee&&(n=this.__data__=new Xt(n.__data__)),n.set(e,t),this}function hn(e,t,n,i){return e===K||ta(e,Tu[n])&&!Cu.call(i,n)?t:e}function fn(e,t,n){(n===K||ta(e[t],n))&&("number"!=typeof t||n!==K||t in e)||(e[t]=n)}function dn(e,t,n){var i=e[t];Cu.call(e,t)&&ta(i,n)&&(n!==K||t in e)||(e[t]=n)}function pn(e,t){for(var n=e.length;n--;)if(ta(e[n][0],t))return n;return-1}function gn(e,t,n,i){return bc(e,function(e,r,o){t(i,e,n(e),o)}),i}function vn(e,t){return e&&ir(t,il(t),e)}function mn(e,t){for(var n=-1,i=null==e,r=t.length,o=Array(r);++n<r;)o[n]=i?K:el(e,t[n]);return o}function yn(e,t,n){return e===e&&(n!==K&&(e=n>=e?e:n),t!==K&&(e=e>=t?e:t)),e}function Sn(e,t,n,i,r,o,s){var a;if(i&&(a=o?i(e,r,o,s):i(e)),a!==K)return a;if(!ma(e))return e;var l=vh(e);if(l){if(a=Ur(e),!t)return nr(e,a)}else{var c=jr(e),h=c==De||c==Be;if(mh(e))return Ui(e,t);if(c==Ne||c==ke||h&&!o){if(V(e))return o?e:{};if(a=$r(h?{}:e),!t)return rr(e,vn(a,e))}else{if(!On[c])return o?e:{};a=qr(e,c,Sn,t)}}s||(s=new on);var f=s.get(e);if(f)return f;if(s.set(e,a),!l)var d=n?Ir(e):il(e);return u(d||e,function(r,o){d&&(o=r,r=e[o]),dn(a,o,Sn(r,t,n,i,o,e,s))}),a}function Cn(e){var t=il(e),n=t.length;return function(i){if(null==i)return!n;for(var r=n;r--;){var o=t[r],s=e[o],a=i[o];if(a===K&&!(o in Object(i))||!s(a))return!1}return!0}}function kn(e){return ma(e)?Vu(e):{}}function In(e,t,n){if("function"!=typeof e)throw new bu(te);return $u(function(){e.apply(K,n)},t)}function Fn(e,t,n,i){var r=-1,o=d,s=!0,a=e.length,l=[],u=t.length;if(!a)return l;n&&(t=g(t,k(n))),i?(o=p,s=!1):t.length>=ee&&(o=F,s=!1,t=new tn(t));e:for(;++r<a;){var c=e[r],h=n?n(c):c;if(c=i||0!==c?c:0,s&&h===h){for(var f=u;f--;)if(t[f]===h)continue e;l.push(c)}else o(t,h,i)||l.push(c)}return l}function Dn(e,t){var n=!0;return bc(e,function(e,i,r){return n=!!t(e,i,r)}),n}function Bn(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],s=t(o);if(null!=s&&(a===K?s===s&&!Fa(s):n(s,a)))var a=s,l=o}return l}function zn(e,t,n,i){var r=e.length;for(n=Na(n),0>n&&(n=-n>r?0:r+n),i=i===K||i>r?r:Na(i),0>i&&(i+=r),i=n>i?0:Ha(i);i>n;)e[n++]=t;return e}function Nn(e,t){var n=[];return bc(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function Hn(e,t,n,i,r){var o=-1,s=e.length;for(n||(n=Zr),r||(r=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?Hn(a,t-1,n,i,r):v(r,a):i||(r[r.length]=a)}return r}function Wn(e,t){return e&&Tc(e,t,il)}function Un(e,t){return e&&Ec(e,t,il)}function $n(e,t){return f(t,function(t){return pa(e[t])})}function qn(e,t){t=Kr(t,e)?[t]:Vi(t);for(var n=0,i=t.length;null!=e&&i>n;)e=e[uo(t[n++])];return n&&n==i?e:K}function Gn(e,t,n){var i=t(e);return vh(e)?i:v(i,n(e))}function Zn(e,t){return e>t}function Xn(e,t){return null!=e&&(Cu.call(e,t)||"object"==typeof e&&t in e&&null===Nr(e))}function Yn(e,t){return null!=e&&t in Object(e)}function Qn(e,t,n){return e>=Ju(t,n)&&e<Ku(t,n)}function Kn(e,t,n){for(var i=n?p:d,r=e[0].length,o=e.length,s=o,a=Array(o),l=1/0,u=[];s--;){var c=e[s];s&&t&&(c=g(c,k(t))),l=Ju(c.length,l),a[s]=!n&&(t||r>=120&&c.length>=120)?new tn(s&&c):K}c=e[0];var h=-1,f=a[0];e:for(;++h<r&&u.length<l;){var v=c[h],m=t?t(v):v;if(v=n||0!==v?v:0,!(f?F(f,m):i(u,m,n))){for(s=o;--s;){var y=a[s];if(!(y?F(y,m):i(e[s],m,n)))continue e}f&&f.push(m),u.push(v)}}return u}function Jn(e,t,n,i){return Wn(e,function(e,r,o){t(i,n(e),r,o)}),i}function ei(e,t,n){Kr(t,e)||(t=Vi(t),e=ao(e,t),t=Io(t));var i=null==e?e:e[uo(t)];return null==i?K:a(i,e,n)}function ti(e,t,n,i,r){return e===t?!0:null==e||null==t||!ma(e)&&!ya(t)?e!==e&&t!==t:ni(e,t,ti,n,i,r)}function ni(e,t,n,i,r,o){var s=vh(e),a=vh(t),l=Ie,u=Ie;s||(l=jr(e),l=l==ke?Ne:l),a||(u=jr(t),u=u==ke?Ne:u);var c=l==Ne&&!V(e),h=u==Ne&&!V(t),f=l==u;if(f&&!c)return o||(o=new on),s||Aa(e)?Or(e,t,n,i,r,o):Cr(e,t,l,n,i,r,o);if(!(r&ge)){var d=c&&Cu.call(e,"__wrapped__"),p=h&&Cu.call(t,"__wrapped__");if(d||p){var g=d?e.value():e,v=p?t.value():t;return o||(o=new on),n(g,v,i,r,o)}}return f?(o||(o=new on),kr(e,t,n,i,r,o)):!1}function ii(e,t,n,i){var r=n.length,o=r,s=!i;if(null==e)return!o;for(e=Object(e);r--;){var a=n[r];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<o;){a=n[r];var l=a[0],u=e[l],c=a[1];if(s&&a[2]){if(u===K&&!(l in e))return!1}else{var h=new on;if(i)var f=i(u,c,l,e,t,h);if(!(f===K?ti(c,u,i,pe|ge,h):f))return!1}}return!0}function ri(e){if(!ma(e)||to(e))return!1;var t=pa(e)||V(e)?Mu:Ct;return t.test(co(e))}function oi(e){return"function"==typeof e?e:null==e?ql:"object"==typeof e?vh(e)?hi(e[0],e[1]):ci(e):eu(e)}function si(e){return Qu(Object(e))}function ai(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function li(e,t){return t>e}function ui(e,t){var n=-1,i=ra(e)?Array(e.length):[];return bc(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function ci(e){var t=Lr(e);return 1==t.length&&t[0][2]?ro(t[0][0],t[0][1]):function(n){return n===e||ii(n,e,t)}}function hi(e,t){return Kr(e)&&io(t)?ro(uo(e),t):function(n){var i=el(n,e);return i===K&&i===t?nl(n,e):ti(t,i,K,pe|ge)}}function fi(e,t,n,i,r){if(e!==t){if(!vh(t)&&!Aa(t))var o=rl(t);u(o||t,function(s,a){if(o&&(a=s,s=t[a]),ma(s))r||(r=new on),di(e,t,a,n,fi,i,r);else{var l=i?i(e[a],s,a+"",e,t,r):K;l===K&&(l=s),fn(e,a,l)}})}}function di(e,t,n,i,r,o,s){var a=e[n],l=t[n],u=s.get(l);if(u)return void fn(e,n,u);var c=o?o(a,l,n+"",e,t,s):K,h=c===K;h&&(c=l,vh(l)||Aa(l)?vh(a)?c=a:oa(a)?c=nr(a):(h=!1,c=Sn(l,!0)):Ra(l)||na(l)?na(a)?c=Va(a):!ma(a)||i&&pa(a)?(h=!1,c=Sn(l,!0)):c=a:h=!1),s.set(l,c),h&&r(c,l,i,o,s),s["delete"](l),fn(e,n,c)}function pi(e,t){var n=e.length;if(n)return t+=0>t?n:0,Yr(t,n)?e[t]:K}function gi(e,t,n){var i=-1;t=g(t.length?t:[ql],k(Dr()));var r=ui(e,function(e,n,r){var o=g(t,function(t){return t(e)});return{criteria:o,index:++i,value:e}});return P(r,function(e,t){return Ji(e,t,n)})}function vi(e,t){return e=Object(e),m(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function mi(e,t){for(var n=-1,i=Fr(e),r=i.length,o={};++n<r;){var s=i[n],a=e[s];t(a,s)&&(o[s]=a)}return o}function yi(e){return function(t){return null==t?K:t[e]}}function wi(e){return function(t){return qn(t,e)}}function xi(e,t,n,i){var r=i?_:b,o=-1,s=t.length,a=e;for(e===t&&(t=nr(t)),n&&(a=g(e,k(n)));++o<s;)for(var l=0,u=t[o],c=n?n(u):u;(l=r(a,c,l,i))>-1;)a!==e&&Uu.call(a,l,1),Uu.call(e,l,1);return e}function Si(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;if(Yr(r))Uu.call(e,r,1);else if(Kr(r,e))delete e[uo(r)];else{var s=Vi(r),a=ao(e,s);null!=a&&delete a[uo(Io(s))]}}}return e}function bi(e,t){return e+Gu(tc()*(t-e+1))}function _i(e,t,n,i){for(var r=-1,o=Ku(qu((t-e)/(n||1)),0),s=Array(o);o--;)s[i?o:++r]=e,e+=n;return s}function Ti(e,t){var n="";if(!e||1>t||t>Te)return n;do t%2&&(n+=e),t=Gu(t/2),t&&(e+=e);while(t);return n}function Ei(e,t,n,i){t=Kr(t,e)?[t]:Vi(t);for(var r=-1,o=t.length,s=o-1,a=e;null!=a&&++r<o;){var l=uo(t[r]);if(ma(a)){var u=n;if(r!=s){var c=a[l];u=i?i(c,l,a):K,u===K&&(u=null==c?Yr(t[r+1])?[]:{}:c)}dn(a,l,u)}a=a[l]}return e}function Pi(e,t,n){var i=-1,r=e.length;0>t&&(t=-t>r?0:r+t),n=n>r?r:n,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}function Ri(e,t){var n;return bc(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function Oi(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&Ce>=r){for(;r>i;){var o=i+r>>>1,s=e[o];null!==s&&!Fa(s)&&(n?t>=s:t>s)?i=o+1:r=o}return r}return Ci(e,t,ql,n)}function Ci(e,t,n,i){t=n(t);for(var r=0,o=e?e.length:0,s=t!==t,a=null===t,l=Fa(t),u=t===K;o>r;){var c=Gu((r+o)/2),h=n(e[c]),f=h!==K,d=null===h,p=h===h,g=Fa(h);if(s)var v=i||p;else v=u?p&&(i||f):a?p&&f&&(i||!d):l?p&&f&&!d&&(i||!g):d||g?!1:i?t>=h:t>h;v?r=c+1:o=c}return Ju(o,Oe)}function ki(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!ta(a,l)){var l=a;o[r++]=0===s?0:s}}return o}function Ii(e){return"number"==typeof e?e:Fa(e)?Pe:+e}function Fi(e){if("string"==typeof e)return e;if(Fa(e))return Sc?Sc.call(e):"";var t=e+"";return"0"==t&&1/e==-_e?"-0":t}function Ai(e,t,n){var i=-1,r=d,o=e.length,s=!0,a=[],l=a;if(n)s=!1,r=p;else if(o>=ee){var u=t?null:Rc(e);if(u)return q(u);s=!1,r=F,l=new tn}else l=t?[]:a;e:for(;++i<o;){var c=e[i],h=t?t(c):c;if(c=n||0!==c?c:0,s&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue e;t&&l.push(h),a.push(c)}else r(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}function Mi(e,t){t=Kr(t,e)?[t]:Vi(t),e=ao(e,t);var n=uo(Io(t));return!(null!=e&&Xn(e,n))||delete e[n]}function Di(e,t,n,i){return Ei(e,t,n(qn(e,t)),i)}function Bi(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?Pi(e,i?0:o,i?o+1:r):Pi(e,i?o+1:0,i?r:o)}function Li(e,t){var n=e;return n instanceof r&&(n=n.value()),m(t,function(e,t){return t.func.apply(t.thisArg,v([e],t.args))},n)}function zi(e,t,n){for(var i=-1,r=e.length;++i<r;)var o=o?v(Fn(o,e[i],t,n),Fn(e[i],o,t,n)):e[i];return o&&o.length?Ai(o,t,n):[]}function Ni(e,t,n){for(var i=-1,r=e.length,o=t.length,s={};++i<r;){var a=o>i?t[i]:K;n(s,e[i],a)}return s}function Hi(e){return oa(e)?e:[]}function ji(e){return"function"==typeof e?e:ql}function Vi(e){return vh(e)?e:Ac(e)}function Wi(e,t,n){var i=e.length;return n=n===K?i:n,!t&&n>=i?e:Pi(e,t,n)}function Ui(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function $i(e){var t=new e.constructor(e.byteLength);return new zu(t).set(new zu(e)),t}function qi(e,t){var n=t?$i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Gi(e,t,n){var i=t?n(U(e),!0):U(e);return m(i,o,new e.constructor)}function Zi(e){var t=new e.constructor(e.source,Et.exec(e));return t.lastIndex=e.lastIndex,t}function Xi(e,t,n){var i=t?n(q(e),!0):q(e);return m(i,s,new e.constructor)}function Yi(e){return xc?Object(xc.call(e)):{}}function Qi(e,t){var n=t?$i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ki(e,t){if(e!==t){var n=e!==K,i=null===e,r=e===e,o=Fa(e),s=t!==K,a=null===t,l=t===t,u=Fa(t);if(!a&&!u&&!o&&e>t||o&&s&&l&&!a&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!o&&!u&&t>e||u&&n&&r&&!i&&!o||a&&n&&r||!s&&r||!l)return-1}return 0}function Ji(e,t,n){for(var i=-1,r=e.criteria,o=t.criteria,s=r.length,a=n.length;++i<s;){var l=Ki(r[i],o[i]);if(l){if(i>=a)return l;var u=n[i];return l*("desc"==u?-1:1)}}return e.index-t.index}function er(e,t,n,i){for(var r=-1,o=e.length,s=n.length,a=-1,l=t.length,u=Ku(o-s,0),c=Array(l+u),h=!i;++a<l;)c[a]=t[a];for(;++r<s;)(h||o>r)&&(c[n[r]]=e[r]);for(;u--;)c[a++]=e[r++];return c}function tr(e,t,n,i){for(var r=-1,o=e.length,s=-1,a=n.length,l=-1,u=t.length,c=Ku(o-a,0),h=Array(c+u),f=!i;++r<c;)h[r]=e[r];for(var d=r;++l<u;)h[d+l]=t[l];for(;++s<a;)(f||o>r)&&(h[d+n[s]]=e[r++]);return h}function nr(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function ir(e,t,n,i){n||(n={});for(var r=-1,o=t.length;++r<o;){var s=t[r],a=i?i(n[s],e[s],s,n,e):e[s];dn(n,s,a)}return n}function rr(e,t){return ir(e,Hr(e),t)}function or(e,t){return function(n,i){var r=vh(n)?l:gn,o=t?t():{};return r(n,e,Dr(i),o)}}function sr(e){return $s(function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:K,s=r>2?n[2]:K;for(o=e.length>3&&"function"==typeof o?(r--,o):K,s&&Qr(n[0],n[1],s)&&(o=3>r?K:o,r=1),t=Object(t);++i<r;){var a=n[i];a&&e(t,a,i,o)}return t})}function ar(e,t){return function(n,i){if(null==n)return n;if(!ra(n))return e(n,i);for(var r=n.length,o=t?r:-1,s=Object(n);(t?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function lr(e){return function(t,n,i){for(var r=-1,o=Object(t),s=i(t),a=s.length;a--;){var l=s[e?a:++r];if(n(o[l],l,o)===!1)break}return t}}function ur(e,t,n){function i(){var t=this&&this!==jn&&this instanceof i?o:e;return t.apply(r?n:this,arguments)}var r=t&re,o=fr(e);return i}function cr(e){return function(t){t=Ua(t);var n=_n.test(t)?X(t):K,i=n?n[0]:t.charAt(0),r=n?Wi(n,1).join(""):t.slice(1);return i[e]()+r}}function hr(e){return function(t){return m(Vl(bl(t).replace(wn,"")),e,"")}}function fr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=kn(e.prototype),i=e.apply(n,t);return ma(i)?i:n}}function dr(e,t,n){function i(){for(var o=arguments.length,s=Array(o),l=o,u=Mr(i);l--;)s[l]=arguments[l];var c=3>o&&s[0]!==u&&s[o-1]!==u?[]:$(s,u);if(o-=c.length,n>o)return Tr(e,t,vr,i.placeholder,K,s,c,K,K,n-o);var h=this&&this!==jn&&this instanceof i?r:e;return a(h,this,s)}var r=fr(e);return i}function pr(e){return function(t,n,i){var r=Object(t);if(n=Dr(n,3),!ra(t))var o=il(t);var s=e(o||t,function(e,t){return o&&(t=e,e=r[t]),n(e,t,r)},i);return s>-1?t[o?o[s]:s]:K}}function gr(e){return $s(function(t){t=Hn(t,1);var n=t.length,r=n,o=i.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new bu(te);if(o&&!a&&"wrapper"==Ar(s))var a=new i([],!0)}for(r=a?r:n;++r<n;){s=t[r];var l=Ar(s),u="wrapper"==l?Oc(s):K;a=u&&eo(u[0])&&u[1]==(he|ae|ue|fe)&&!u[4].length&&1==u[9]?a[Ar(u[0])].apply(a,u[3]):1==s.length&&eo(s)?a[l]():a.thru(s)}return function(){var e=arguments,i=e[0];if(a&&1==e.length&&vh(i)&&i.length>=ee)return a.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}})}function vr(e,t,n,i,r,o,s,a,l,u){function c(){for(var m=arguments.length,y=Array(m),w=m;w--;)y[w]=arguments[w];if(p)var x=Mr(c),S=B(y,x);if(i&&(y=er(y,i,r,p)),o&&(y=tr(y,o,s,p)),m-=S,p&&u>m){var b=$(y,x);return Tr(e,t,vr,c.placeholder,n,y,b,a,l,u-m)}var _=f?n:this,T=d?_[e]:e;return m=y.length,a?y=lo(y,a):g&&m>1&&y.reverse(),h&&m>l&&(y.length=l),this&&this!==jn&&this instanceof c&&(T=v||fr(T)),T.apply(_,y)}var h=t&he,f=t&re,d=t&oe,p=t&(ae|le),g=t&de,v=d?K:fr(e);return c}function mr(e,t){return function(n,i){return Jn(n,e,t(i),{})}}function yr(e){return function(t,n){var i;if(t===K&&n===K)return 0;if(t!==K&&(i=t),n!==K){if(i===K)return n;"string"==typeof t||"string"==typeof n?(t=Fi(t),n=Fi(n)):(t=Ii(t),n=Ii(n)),i=e(t,n)}return i}}function wr(e){return $s(function(t){return t=1==t.length&&vh(t[0])?g(t[0],k(Dr())):g(Hn(t,1,Xr),k(Dr())),$s(function(n){var i=this;return e(t,function(e){return a(e,i,n)})})})}function xr(e,t){t=t===K?" ":Fi(t);var n=t.length;if(2>n)return n?Ti(t,e):t;var i=Ti(t,qu(e/Z(t)));return _n.test(t)?Wi(X(i),0,e).join(""):i.slice(0,e)}function Sr(e,t,n,i){function r(){for(var t=-1,l=arguments.length,u=-1,c=i.length,h=Array(c+l),f=this&&this!==jn&&this instanceof r?s:e;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++t];return a(f,o?n:this,h)}var o=t&re,s=fr(e);return r}function br(e){return function(t,n,i){return i&&"number"!=typeof i&&Qr(t,n,i)&&(n=i=K),t=ja(t),t=t===t?t:0,n===K?(n=t,t=0):n=ja(n)||0,i=i===K?n>t?1:-1:ja(i)||0,_i(t,n,i,e)}}function _r(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ja(t),n=ja(n)),e(t,n)}}function Tr(e,t,n,i,r,o,s,a,l,u){var c=t&ae,h=c?s:K,f=c?K:s,d=c?o:K,p=c?K:o;t|=c?ue:ce,t&=~(c?ce:ue),t&se||(t&=~(re|oe));var g=[e,t,r,d,h,p,f,a,l,u],v=n.apply(K,g);return eo(e)&&Fc(v,g),v.placeholder=i,v}function Er(e){var t=xu[e];return function(e,n){if(e=ja(e),n=Ju(Na(n),292)){var i=(Ua(e)+"e").split("e"),r=t(i[0]+"e"+(+i[1]+n));return i=(Ua(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function Pr(e){return function(t){var n=jr(t);return n==Le?U(t):n==Ve?G(t):C(t,e(t))}}function Rr(e,t,n,i,r,o,s,a){var l=t&oe;if(!l&&"function"!=typeof e)throw new bu(te);var u=i?i.length:0;if(u||(t&=~(ue|ce),i=r=K),s=s===K?s:Ku(Na(s),0),a=a===K?a:Na(a),u-=r?r.length:0,t&ce){var c=i,h=r;i=r=K}var f=l?K:Oc(e),d=[e,t,n,i,r,c,h,o,s,a];if(f&&oo(d,f),e=d[0],t=d[1],n=d[2],i=d[3],r=d[4],a=d[9]=null==d[9]?l?0:e.length:Ku(d[9]-u,0),!a&&t&(ae|le)&&(t&=~(ae|le)),t&&t!=re)p=t==ae||t==le?dr(e,t,a):t!=ue&&t!=(re|ue)||r.length?vr.apply(K,d):Sr(e,t,n,i);else var p=ur(e,t,n);var g=f?Pc:Fc;return g(p,d)}function Or(e,t,n,i,r,o){var s=r&ge,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(e);if(u)return u==t;var c=-1,h=!0,f=r&pe?new tn:K;for(o.set(e,t);++c<a;){var d=e[c],p=t[c];if(i)var g=s?i(p,d,c,t,e,o):i(d,p,c,e,t,o);if(g!==K){if(g)continue;h=!1;break}if(f){if(!w(t,function(e,t){return f.has(t)||d!==e&&!n(d,e,i,r,o)?void 0:f.add(t)})){h=!1;break}}else if(d!==p&&!n(d,p,i,r,o)){h=!1;break}}return o["delete"](e),h}function Cr(e,t,n,i,r,o,s){switch(n){case Ze:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ge:return!(e.byteLength!=t.byteLength||!i(new zu(e),new zu(t)));case Fe:case Ae:return+e==+t;case Me:return e.name==t.name&&e.message==t.message;case ze:return e!=+e?t!=+t:e==+t;case je:case We:return e==t+"";case Le:var a=U;case Ve:var l=o&ge;if(a||(a=q),e.size!=t.size&&!l)return!1;var u=s.get(e);return u?u==t:(o|=pe,s.set(e,t),Or(a(e),a(t),i,r,o,s));case Ue:if(xc)return xc.call(e)==xc.call(t)}return!1}function kr(e,t,n,i,r,o){var s=r&ge,a=il(e),l=a.length,u=il(t),c=u.length;if(l!=c&&!s)return!1;for(var h=l;h--;){var f=a[h];if(!(s?f in t:Xn(t,f)))return!1}var d=o.get(e);if(d)return d==t;var p=!0;o.set(e,t);for(var g=s;++h<l;){f=a[h];var v=e[f],m=t[f];if(i)var y=s?i(m,v,f,t,e,o):i(v,m,f,e,t,o);if(!(y===K?v===m||n(v,m,i,r,o):y)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var w=e.constructor,x=t.constructor;w!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(p=!1)}return o["delete"](e),p}function Ir(e){return Gn(e,il,Hr)}function Fr(e){return Gn(e,rl,kc)}function Ar(e){for(var t=e.name+"",n=dc[t],i=Cu.call(dc,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function Mr(e){var n=Cu.call(t,"placeholder")?t:e;return n.placeholder}function Dr(){var e=t.iteratee||Gl;return e=e===Gl?oi:e,arguments.length?e(arguments[0],arguments[1]):e}function Br(e,t){var n=e.__data__;return Jr(t)?n["string"==typeof t?"string":"hash"]:n.map}function Lr(e){for(var t=il(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,io(r)]}return t}function zr(e,t){var n=H(e,t);return ri(n)?n:K}function Nr(e){return Zu(Object(e))}function Hr(e){return Hu(Object(e))}function jr(e){return Fu.call(e)}function Vr(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Ju(t,e+s);break;case"takeRight":e=Ku(e,t-s)}}return{start:e,end:t}}function Wr(e,t,n){t=Kr(t,e)?[t]:Vi(t);for(var i,r=-1,o=t.length;++r<o;){var s=uo(t[r]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}if(i)return i;var o=e?e.length:0;return!!o&&va(o)&&Yr(s,o)&&(vh(e)||Ia(e)||na(e))}function Ur(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Cu.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function $r(e){return"function"!=typeof e.constructor||no(e)?{}:kn(Nr(e))}function qr(e,t,n,i){var r=e.constructor;switch(t){case Ge:return $i(e);case Fe:case Ae:return new r(+e);case Ze:return qi(e,i);case Xe:case Ye:case Qe:case Ke:case Je:case et:case tt:case nt:case it:return Qi(e,i);case Le:return Gi(e,i,n);case ze:case We:return new r(e);case je:return Zi(e);case Ve:return Xi(e,i,n);case Ue:return Yi(e)}}function Gr(e){var t=e?e.length:K;return va(t)&&(vh(e)||Ia(e)||na(e))?O(t,String):null}function Zr(e){return vh(e)||na(e)}function Xr(e){return vh(e)&&!(2==e.length&&!pa(e[0]))}function Yr(e,t){return t=null==t?Te:t,!!t&&("number"==typeof e||It.test(e))&&e>-1&&e%1==0&&t>e}function Qr(e,t,n){if(!ma(n))return!1;var i=typeof t;return("number"==i?ra(n)&&Yr(t,n.length):"string"==i&&t in n)?ta(n[t],e):!1}function Kr(e,t){if(vh(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Fa(e)?!0:gt.test(e)||!pt.test(e)||null!=t&&e in Object(t)}function Jr(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function eo(e){var n=Ar(e),i=t[n];if("function"!=typeof i||!(n in r.prototype))return!1;if(e===i)return!0;var o=Oc(i);return!!o&&e===o[0]}function to(e){return!!Ru&&Ru in e}function no(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Tu;return e===n}function io(e){return e===e&&!ma(e)}function ro(e,t){return function(n){return null==n?!1:n[e]===t&&(t!==K||e in Object(n))}}function oo(e,t){var n=e[1],i=t[1],r=n|i,o=(re|oe|he)>r,s=i==he&&n==ae||i==he&&n==fe&&e[7].length<=t[8]||i==(he|fe)&&t[7].length<=t[8]&&n==ae;if(!o&&!s)return e;i&re&&(e[2]=t[2],r|=n&re?0:se);var a=t[3];if(a){var l=e[3];e[3]=l?er(l,a,t[4]):a,e[4]=l?$(e[3],ie):t[4]}return a=t[5],a&&(l=e[5],e[5]=l?tr(l,a,t[6]):a,e[6]=l?$(e[5],ie):t[6]),a=t[7],a&&(e[7]=a),i&he&&(e[8]=null==e[8]?t[8]:Ju(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function so(e,t,n,i,r,o){return ma(e)&&ma(t)&&fi(e,t,K,so,o.set(t,e)),e}function ao(e,t){return 1==t.length?e:qn(e,Pi(t,0,-1))}function lo(e,t){for(var n=e.length,i=Ju(t.length,n),r=nr(e);i--;){var o=t[i];e[i]=Yr(o,n)?r[o]:K}return e}function uo(e){if("string"==typeof e||Fa(e))return e;var t=e+"";return"0"==t&&1/e==-_e?"-0":t}function co(e){if(null!=e){try{return Ou.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ho(e){if(e instanceof r)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=nr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function fo(e,t,n){t=(n?Qr(e,t,n):t===K)?1:Ku(Na(t),0);var i=e?e.length:0;if(!i||1>t)return[];for(var r=0,o=0,s=Array(qu(i/t));i>r;)s[o++]=Pi(e,r,r+=t);return s}function po(e){for(var t=-1,n=e?e.length:0,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r}function go(){for(var e=arguments.length,t=Array(e?e-1:0),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return e?v(vh(n)?nr(n):[n],Hn(t,1)):[]}function vo(e,t,n){var i=e?e.length:0;return i?(t=n||t===K?1:Na(t),Pi(e,0>t?0:t,i)):[]}function mo(e,t,n){var i=e?e.length:0;return i?(t=n||t===K?1:Na(t),t=i-t,Pi(e,0,0>t?0:t)):[]}function yo(e,t){return e&&e.length?Bi(e,Dr(t,3),!0,!0):[]}function wo(e,t){return e&&e.length?Bi(e,Dr(t,3),!0):[]}function xo(e,t,n,i){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Qr(e,t,n)&&(n=0,i=r),zn(e,t,n,i)):[]}function So(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=null==n?0:Na(n);return 0>r&&(r=Ku(i+r,0)),S(e,Dr(t,3),r)}function bo(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i-1;return n!==K&&(r=Na(n),r=0>n?Ku(i+r,0):Ju(r,i-1)),S(e,Dr(t,3),r,!0)}function _o(e){var t=e?e.length:0;return t?Hn(e,1):[]}function To(e){var t=e?e.length:0;return t?Hn(e,_e):[]}function Eo(e,t){var n=e?e.length:0;return n?(t=t===K?1:Na(t),Hn(e,t)):[]}function Po(e){for(var t=-1,n=e?e.length:0,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i}function Ro(e){return e&&e.length?e[0]:K}function Oo(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=null==n?0:Na(n);return 0>r&&(r=Ku(i+r,0)),b(e,t,r)}function Co(e){return mo(e,1)}function ko(e,t){return e?Yu.call(e,t):""}function Io(e){var t=e?e.length:0;return t?e[t-1]:K}function Fo(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i;if(n!==K&&(r=Na(n),r=(0>r?Ku(i+r,0):Ju(r,i-1))+1),t!==t)return j(e,r-1,!0);for(;r--;)if(e[r]===t)return r;return-1}function Ao(e,t){return e&&e.length?pi(e,Na(t)):K}function Mo(e,t){return e&&e.length&&t&&t.length?xi(e,t):e}function Do(e,t,n){return e&&e.length&&t&&t.length?xi(e,t,Dr(n)):e}function Bo(e,t,n){return e&&e.length&&t&&t.length?xi(e,t,K,n):e}function Lo(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=Dr(t,3);++i<o;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return Si(e,r),n}function zo(e){return e?ic.call(e):e}function No(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Qr(e,t,n)?(t=0,n=i):(t=null==t?0:Na(t),n=n===K?i:Na(n)),Pi(e,t,n)):[]}function Ho(e,t){return Oi(e,t)}function jo(e,t,n){return Ci(e,t,Dr(n))}function Vo(e,t){var n=e?e.length:0;if(n){var i=Oi(e,t);if(n>i&&ta(e[i],t))return i}return-1}function Wo(e,t){return Oi(e,t,!0)}function Uo(e,t,n){return Ci(e,t,Dr(n),!0)}function $o(e,t){var n=e?e.length:0;if(n){var i=Oi(e,t,!0)-1;if(ta(e[i],t))return i}return-1}function qo(e){return e&&e.length?ki(e):[]}function Go(e,t){return e&&e.length?ki(e,Dr(t)):[]}function Zo(e){return vo(e,1)}function Xo(e,t,n){return e&&e.length?(t=n||t===K?1:Na(t),Pi(e,0,0>t?0:t)):[]}function Yo(e,t,n){var i=e?e.length:0;return i?(t=n||t===K?1:Na(t),t=i-t,Pi(e,0>t?0:t,i)):[]}function Qo(e,t){return e&&e.length?Bi(e,Dr(t,3),!1,!0):[]}function Ko(e,t){return e&&e.length?Bi(e,Dr(t,3)):[]}function Jo(e){return e&&e.length?Ai(e):[]}function es(e,t){return e&&e.length?Ai(e,Dr(t)):[]}function ts(e,t){return e&&e.length?Ai(e,K,t):[]}function ns(e){if(!e||!e.length)return[];var t=0;return e=f(e,function(e){return oa(e)?(t=Ku(e.length,t),!0):void 0}),O(t,function(t){return g(e,yi(t))})}function is(e,t){if(!e||!e.length)return[];var n=ns(e);return null==t?n:g(n,function(e){return a(t,K,e)})}function rs(e,t){return Ni(e||[],t||[],dn)}function os(e,t){return Ni(e||[],t||[],Ei)}function ss(e){var n=t(e);return n.__chain__=!0,n}function as(e,t){return t(e),e}function ls(e,t){return t(e)}function us(){return ss(this)}function cs(){return new i(this.value(),this.__chain__)}function hs(){this.__values__===K&&(this.__values__=La(this.value()));var e=this.__index__>=this.__values__.length,t=e?K:this.__values__[this.__index__++];return{done:e,value:t}}function fs(){return this}function ds(e){for(var t,i=this;i instanceof n;){var r=ho(i);r.__index__=0,r.__values__=K,t?o.__wrapped__=r:t=r;var o=r;i=i.__wrapped__}return o.__wrapped__=e,t}function ps(){var e=this.__wrapped__;if(e instanceof r){var t=e;return this.__actions__.length&&(t=new r(this)),t=t.reverse(),t.__actions__.push({func:ls,args:[zo],thisArg:K}),new i(t,this.__chain__)}return this.thru(zo)}function gs(){return Li(this.__wrapped__,this.__actions__)}function vs(e,t,n){var i=vh(e)?h:Dn;return n&&Qr(e,t,n)&&(t=K),i(e,Dr(t,3))}function ms(e,t){var n=vh(e)?f:Nn;return n(e,Dr(t,3))}function ys(e,t){return Hn(Ts(e,t),1)}function ws(e,t){return Hn(Ts(e,t),_e)}function xs(e,t,n){return n=n===K?1:Na(n),Hn(Ts(e,t),n)}function Ss(e,t){var n=vh(e)?u:bc;return n(e,Dr(t,3))}function bs(e,t){var n=vh(e)?c:_c;return n(e,Dr(t,3))}function _s(e,t,n,i){e=ra(e)?e:vl(e),n=n&&!i?Na(n):0;var r=e.length;return 0>n&&(n=Ku(r+n,0)),Ia(e)?r>=n&&e.indexOf(t,n)>-1:!!r&&b(e,t,n)>-1}function Ts(e,t){var n=vh(e)?g:ui;return n(e,Dr(t,3))}function Es(e,t,n,i){return null==e?[]:(vh(t)||(t=null==t?[]:[t]),n=i?K:n,vh(n)||(n=null==n?[]:[n]),gi(e,t,n))}function Ps(e,t,n){var i=vh(e)?m:E,r=arguments.length<3;return i(e,Dr(t,4),n,r,bc)}function Rs(e,t,n){var i=vh(e)?y:E,r=arguments.length<3;return i(e,Dr(t,4),n,r,_c)}function Os(e,t){var n=vh(e)?f:Nn;return t=Dr(t,3),n(e,function(e,n,i){return!t(e,n,i)})}function Cs(e){var t=ra(e)?e:vl(e),n=t.length;return n>0?t[bi(0,n-1)]:K}function ks(e,t,n){var i=-1,r=La(e),o=r.length,s=o-1;for(t=(n?Qr(e,t,n):t===K)?1:yn(Na(t),0,o);++i<t;){var a=bi(i,s),l=r[a];r[a]=r[i],r[i]=l}return r.length=t,r}function Is(e){return ks(e,Re)}function Fs(e){if(null==e)return 0;if(ra(e)){var t=e.length;return t&&Ia(e)?Z(e):t}if(ya(e)){var n=jr(e);if(n==Le||n==Ve)return e.size}return il(e).length}function As(e,t,n){var i=vh(e)?w:Ri;return n&&Qr(e,t,n)&&(t=K),i(e,Dr(t,3))}function Ms(){return yu.now()}function Ds(e,t){if("function"!=typeof t)throw new bu(te);return e=Na(e),function(){return--e<1?t.apply(this,arguments):void 0}}function Bs(e,t,n){return t=n?K:t,t=e&&null==t?e.length:t,Rr(e,he,K,K,K,K,t)}function Ls(e,t){var n;if("function"!=typeof t)throw new bu(te);return e=Na(e),function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=K),n}}function zs(e,t,n){t=n?K:t;var i=Rr(e,ae,K,K,K,K,K,t);return i.placeholder=zs.placeholder,i}function Ns(e,t,n){t=n?K:t;var i=Rr(e,le,K,K,K,K,K,t);return i.placeholder=Ns.placeholder,i}function Hs(e,t,n){function i(t){var n=f,i=d;return f=d=K,y=t,g=e.apply(i,n)}function r(e){return y=e,v=$u(a,t),w?i(e):g}function o(e){var n=e-m,i=e-y,r=t-n;return x?Ju(r,p-i):r}function s(e){var n=e-m,i=e-y;return m===K||n>=t||0>n||x&&i>=p}function a(){var e=Ms();return s(e)?l(e):void(v=$u(a,o(e)))}function l(e){return v=K,S&&f?i(e):(f=d=K,g)}function u(){y=0,f=m=d=v=K}function c(){return v===K?g:l(Ms())}function h(){var e=Ms(),n=s(e);if(f=arguments,d=this,m=e,n){if(v===K)return r(m);if(x)return v=$u(a,t),i(m)}return v===K&&(v=$u(a,t)),g}var f,d,p,g,v,m,y=0,w=!1,x=!1,S=!0;if("function"!=typeof e)throw new bu(te);
return t=ja(t)||0,ma(n)&&(w=!!n.leading,x="maxWait"in n,p=x?Ku(ja(n.maxWait)||0,t):p,S="trailing"in n?!!n.trailing:S),h.cancel=u,h.flush=c,h}function js(e){return Rr(e,de)}function Vs(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new bu(te);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(Vs.Cache||Xt),n}function Ws(e){if("function"!=typeof e)throw new bu(te);return function(){return!e.apply(this,arguments)}}function Us(e){return Ls(2,e)}function $s(e,t){if("function"!=typeof e)throw new bu(te);return t=Ku(t===K?e.length-1:Na(t),0),function(){for(var n=arguments,i=-1,r=Ku(n.length-t,0),o=Array(r);++i<r;)o[i]=n[t+i];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var s=Array(t+1);for(i=-1;++i<t;)s[i]=n[i];return s[t]=o,a(e,this,s)}}function qs(e,t){if("function"!=typeof e)throw new bu(te);return t=t===K?0:Ku(Na(t),0),$s(function(n){var i=n[t],r=Wi(n,0,t);return i&&v(r,i),a(e,this,r)})}function Gs(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new bu(te);return ma(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Hs(e,t,{leading:i,maxWait:t,trailing:r})}function Zs(e){return Bs(e,1)}function Xs(e,t){return t=null==t?ql:t,hh(t,e)}function Ys(){if(!arguments.length)return[];var e=arguments[0];return vh(e)?e:[e]}function Qs(e){return Sn(e,!1,!0)}function Ks(e,t){return Sn(e,!1,!0,t)}function Js(e){return Sn(e,!0,!0)}function ea(e,t){return Sn(e,!0,!0,t)}function ta(e,t){return e===t||e!==e&&t!==t}function na(e){return oa(e)&&Cu.call(e,"callee")&&(!Wu.call(e,"callee")||Fu.call(e)==ke)}function ia(e){return ya(e)&&Fu.call(e)==Ge}function ra(e){return null!=e&&va(Cc(e))&&!pa(e)}function oa(e){return ya(e)&&ra(e)}function sa(e){return e===!0||e===!1||ya(e)&&Fu.call(e)==Fe}function aa(e){return ya(e)&&Fu.call(e)==Ae}function la(e){return!!e&&1===e.nodeType&&ya(e)&&!Ra(e)}function ua(e){if(ra(e)&&(vh(e)||Ia(e)||pa(e.splice)||na(e)||mh(e)))return!e.length;if(ya(e)){var t=jr(e);if(t==Le||t==Ve)return!e.size}for(var n in e)if(Cu.call(e,n))return!1;return!(fc&&il(e).length)}function ca(e,t){return ti(e,t)}function ha(e,t,n){n="function"==typeof n?n:K;var i=n?n(e,t):K;return i===K?ti(e,t,n):!!i}function fa(e){return ya(e)?Fu.call(e)==Me||"string"==typeof e.message&&"string"==typeof e.name:!1}function da(e){return"number"==typeof e&&Xu(e)}function pa(e){var t=ma(e)?Fu.call(e):"";return t==De||t==Be}function ga(e){return"number"==typeof e&&e==Na(e)}function va(e){return"number"==typeof e&&e>-1&&e%1==0&&Te>=e}function ma(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ya(e){return!!e&&"object"==typeof e}function wa(e){return ya(e)&&jr(e)==Le}function xa(e,t){return e===t||ii(e,t,Lr(t))}function Sa(e,t,n){return n="function"==typeof n?n:K,ii(e,t,Lr(t),n)}function ba(e){return Pa(e)&&e!=+e}function _a(e){if(Ic(e))throw new wu("This method is not supported with `core-js`. Try https://github.com/es-shims.");return ri(e)}function Ta(e){return null===e}function Ea(e){return null==e}function Pa(e){return"number"==typeof e||ya(e)&&Fu.call(e)==ze}function Ra(e){if(!ya(e)||Fu.call(e)!=Ne||V(e))return!1;var t=Nr(e);if(null===t)return!0;var n=Cu.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ou.call(n)==Iu}function Oa(e){return ma(e)&&Fu.call(e)==je}function Ca(e){return ga(e)&&e>=-Te&&Te>=e}function ka(e){return ya(e)&&jr(e)==Ve}function Ia(e){return"string"==typeof e||!vh(e)&&ya(e)&&Fu.call(e)==We}function Fa(e){return"symbol"==typeof e||ya(e)&&Fu.call(e)==Ue}function Aa(e){return ya(e)&&va(e.length)&&!!Rn[Fu.call(e)]}function Ma(e){return e===K}function Da(e){return ya(e)&&jr(e)==$e}function Ba(e){return ya(e)&&Fu.call(e)==qe}function La(e){if(!e)return[];if(ra(e))return Ia(e)?X(e):nr(e);if(ju&&e[ju])return W(e[ju]());var t=jr(e),n=t==Le?U:t==Ve?q:vl;return n(e)}function za(e){if(!e)return 0===e?e:0;if(e=ja(e),e===_e||e===-_e){var t=0>e?-1:1;return t*Ee}return e===e?e:0}function Na(e){var t=za(e),n=t%1;return t===t?n?t-n:t:0}function Ha(e){return e?yn(Na(e),0,Re):0}function ja(e){if("number"==typeof e)return e;if(Fa(e))return Pe;if(ma(e)){var t=pa(e.valueOf)?e.valueOf():e;e=ma(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(wt,"");var n=Ot.test(e);return n||kt.test(e)?Mn(e.slice(2),n?2:8):Rt.test(e)?Pe:+e}function Va(e){return ir(e,rl(e))}function Wa(e){return yn(Na(e),-Te,Te)}function Ua(e){return null==e?"":Fi(e)}function $a(e,t){var n=kn(e);return t?vn(n,t):n}function qa(e,t){return x(e,Dr(t,3),Wn)}function Ga(e,t){return x(e,Dr(t,3),Un)}function Za(e,t){return null==e?e:Tc(e,Dr(t,3),rl)}function Xa(e,t){return null==e?e:Ec(e,Dr(t,3),rl)}function Ya(e,t){return e&&Wn(e,Dr(t,3))}function Qa(e,t){return e&&Un(e,Dr(t,3))}function Ka(e){return null==e?[]:$n(e,il(e))}function Ja(e){return null==e?[]:$n(e,rl(e))}function el(e,t,n){var i=null==e?K:qn(e,t);return i===K?n:i}function tl(e,t){return null!=e&&Wr(e,t,Xn)}function nl(e,t){return null!=e&&Wr(e,t,Yn)}function il(e){var t=no(e);if(!t&&!ra(e))return si(e);var n=Gr(e),i=!!n,r=n||[],o=r.length;for(var s in e)!Xn(e,s)||i&&("length"==s||Yr(s,o))||t&&"constructor"==s||r.push(s);return r}function rl(e){for(var t=-1,n=no(e),i=ai(e),r=i.length,o=Gr(e),s=!!o,a=o||[],l=a.length;++t<r;){var u=i[t];s&&("length"==u||Yr(u,l))||"constructor"==u&&(n||!Cu.call(e,u))||a.push(u)}return a}function ol(e,t){var n={};return t=Dr(t,3),Wn(e,function(e,i,r){n[t(e,i,r)]=e}),n}function sl(e,t){var n={};return t=Dr(t,3),Wn(e,function(e,i,r){n[i]=t(e,i,r)}),n}function al(e,t){return t=Dr(t),mi(e,function(e,n){return!t(e,n)})}function ll(e,t){return null==e?{}:mi(e,Dr(t))}function ul(e,t,n){t=Kr(t,e)?[t]:Vi(t);var i=-1,r=t.length;for(r||(e=K,r=1);++i<r;){var o=null==e?K:e[uo(t[i])];o===K&&(i=r,o=n),e=pa(o)?o.call(e):o}return e}function cl(e,t,n){return null==e?e:Ei(e,t,n)}function hl(e,t,n,i){return i="function"==typeof i?i:K,null==e?e:Ei(e,t,n,i)}function fl(e,t,n){var i=vh(e)||Aa(e);if(t=Dr(t,4),null==n)if(i||ma(e)){var r=e.constructor;n=i?vh(e)?new r:[]:pa(r)?kn(Nr(e)):{}}else n={};return(i?u:Wn)(e,function(e,i,r){return t(n,e,i,r)}),n}function dl(e,t){return null==e?!0:Mi(e,t)}function pl(e,t,n){return null==e?e:Di(e,t,ji(n))}function gl(e,t,n,i){return i="function"==typeof i?i:K,null==e?e:Di(e,t,ji(n),i)}function vl(e){return e?I(e,il(e)):[]}function ml(e){return null==e?[]:I(e,rl(e))}function yl(e,t,n){return n===K&&(n=t,t=K),n!==K&&(n=ja(n),n=n===n?n:0),t!==K&&(t=ja(t),t=t===t?t:0),yn(ja(e),t,n)}function wl(e,t,n){return t=ja(t)||0,n===K?(n=t,t=0):n=ja(n)||0,e=ja(e),Qn(e,t,n)}function xl(e,t,n){if(n&&"boolean"!=typeof n&&Qr(e,t,n)&&(t=n=K),n===K&&("boolean"==typeof t?(n=t,t=K):"boolean"==typeof e&&(n=e,e=K)),e===K&&t===K?(e=0,t=1):(e=ja(e)||0,t===K?(t=e,e=0):t=ja(t)||0),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=tc();return Ju(e+r*(t-e+An("1e-"+((r+"").length-1))),t)}return bi(e,t)}function Sl(e){return Wh(Ua(e).toLowerCase())}function bl(e){return e=Ua(e),e&&e.replace(Ft,L).replace(xn,"")}function _l(e,t,n){e=Ua(e),t=Fi(t);var i=e.length;return n=n===K?i:yn(Na(n),0,i),n-=t.length,n>=0&&e.indexOf(t,n)==n}function Tl(e){return e=Ua(e),e&&ct.test(e)?e.replace(lt,z):e}function El(e){return e=Ua(e),e&&yt.test(e)?e.replace(mt,"\\$&"):e}function Pl(e,t,n){e=Ua(e),t=Na(t);var i=t?Z(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return xr(Gu(r),n)+e+xr(qu(r),n)}function Rl(e,t,n){e=Ua(e),t=Na(t);var i=t?Z(e):0;return t&&t>i?e+xr(t-i,n):e}function Ol(e,t,n){e=Ua(e),t=Na(t);var i=t?Z(e):0;return t&&t>i?xr(t-i,n)+e:e}function Cl(e,t,n){return n||null==t?t=0:t&&(t=+t),e=Ua(e).replace(wt,""),ec(e,t||(Pt.test(e)?16:10))}function kl(e,t,n){return t=(n?Qr(e,t,n):t===K)?1:Na(t),Ti(Ua(e),t)}function Il(){var e=arguments,t=Ua(e[0]);return e.length<3?t:nc.call(t,e[1],e[2])}function Fl(e,t,n){return n&&"number"!=typeof n&&Qr(e,t,n)&&(t=n=K),(n=n===K?Re:n>>>0)?(e=Ua(e),e&&("string"==typeof t||null!=t&&!Oa(t))&&(t=Fi(t),""==t&&_n.test(e))?Wi(X(e),0,n):rc.call(e,t,n)):[]}function Al(e,t,n){return e=Ua(e),n=yn(Na(n),0,e.length),e.lastIndexOf(Fi(t),n)==n}function Ml(e,n,i){var r=t.templateSettings;i&&Qr(e,n,i)&&(n=K),e=Ua(e),n=bh({},n,r,hn);var o,s,a=bh({},n.imports,r.imports,hn),l=il(a),u=I(a,l),c=0,h=n.interpolate||At,f="__p += '",d=Su((n.escape||At).source+"|"+h.source+"|"+(h===dt?Tt:At).source+"|"+(n.evaluate||At).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Pn+"]")+"\n";e.replace(d,function(t,n,i,r,a,l){return i||(i=r),f+=e.slice(c,l).replace(Mt,N),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),f+="';\n";var g=n.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(rt,""):f).replace(ot,"$1").replace(st,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Uh(function(){return Function(l,p+"return "+f).apply(K,u)});if(v.source=f,fa(v))throw v;return v}function Dl(e){return Ua(e).toLowerCase()}function Bl(e){return Ua(e).toUpperCase()}function Ll(e,t,n){if(e=Ua(e),e&&(n||t===K))return e.replace(wt,"");if(!e||!(t=Fi(t)))return e;var i=X(e),r=X(t),o=A(i,r),s=M(i,r)+1;return Wi(i,o,s).join("")}function zl(e,t,n){if(e=Ua(e),e&&(n||t===K))return e.replace(St,"");if(!e||!(t=Fi(t)))return e;var i=X(e),r=M(i,X(t))+1;return Wi(i,0,r).join("")}function Nl(e,t,n){if(e=Ua(e),e&&(n||t===K))return e.replace(xt,"");if(!e||!(t=Fi(t)))return e;var i=X(e),r=A(i,X(t));return Wi(i,r).join("")}function Hl(e,t){var n=ve,i=me;if(ma(t)){var r="separator"in t?t.separator:r;n="length"in t?Na(t.length):n,i="omission"in t?Fi(t.omission):i}e=Ua(e);var o=e.length;if(_n.test(e)){var s=X(e);o=s.length}if(n>=o)return e;var a=n-Z(i);if(1>a)return i;var l=s?Wi(s,0,a).join(""):e.slice(0,a);if(r===K)return l+i;if(s&&(a+=l.length-a),Oa(r)){if(e.slice(a).search(r)){var u,c=l;for(r.global||(r=Su(r.source,Ua(Et.exec(r))+"g")),r.lastIndex=0;u=r.exec(c);)var h=u.index;l=l.slice(0,h===K?a:h)}}else if(e.indexOf(Fi(r),a)!=a){var f=l.lastIndexOf(r);f>-1&&(l=l.slice(0,f))}return l+i}function jl(e){return e=Ua(e),e&&ut.test(e)?e.replace(at,Y):e}function Vl(e,t,n){return e=Ua(e),t=n?K:t,t===K&&(t=Tn.test(e)?bn:bt),e.match(t)||[]}function Wl(e){var t=e?e.length:0,n=Dr();return e=t?g(e,function(e){if("function"!=typeof e[1])throw new bu(te);return[n(e[0]),e[1]]}):[],$s(function(n){for(var i=-1;++i<t;){var r=e[i];if(a(r[0],this,n))return a(r[1],this,n)}})}function Ul(e){return Cn(Sn(e,!0))}function $l(e){return function(){return e}}function ql(e){return e}function Gl(e){return oi("function"==typeof e?e:Sn(e,!0))}function Zl(e){return ci(Sn(e,!0))}function Xl(e,t){return hi(e,Sn(t,!0))}function Yl(e,t,n){var i=il(t),r=$n(t,i);null!=n||ma(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=$n(t,il(t)));var o=!(ma(n)&&"chain"in n&&!n.chain),s=pa(e);return u(r,function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),r=n.__actions__=nr(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,v([this.value()],arguments))})}),e}function Ql(){return jn._===this&&(jn._=Au),this}function Kl(){}function Jl(e){return e=Na(e),$s(function(t){return pi(t,e)})}function eu(e){return Kr(e)?yi(uo(e)):wi(e)}function tu(e){return function(t){return null==e?K:qn(e,t)}}function nu(){return[]}function iu(){return!1}function ru(){return{}}function ou(){return""}function su(){return!0}function au(e,t){if(e=Na(e),1>e||e>Te)return[];var n=Re,i=Ju(e,Re);t=Dr(t),e-=Re;for(var r=O(i,t);++n<e;)t(n);return r}function lu(e){return vh(e)?g(e,uo):Fa(e)?[e]:nr(Ac(e))}function uu(e){var t=++ku;return Ua(e)+t}function cu(e){return e&&e.length?Bn(e,ql,Zn):K}function hu(e,t){return e&&e.length?Bn(e,Dr(t),Zn):K}function fu(e){return T(e,ql)}function du(e,t){return T(e,Dr(t))}function pu(e){return e&&e.length?Bn(e,ql,li):K}function gu(e,t){return e&&e.length?Bn(e,Dr(t),li):K}function vu(e){return e&&e.length?R(e,ql):0}function mu(e,t){return e&&e.length?R(e,Dr(t)):0}e=e?Vn.defaults({},e,Vn.pick(jn,En)):jn;var yu=e.Date,wu=e.Error,xu=e.Math,Su=e.RegExp,bu=e.TypeError,_u=e.Array.prototype,Tu=e.Object.prototype,Eu=e.String.prototype,Pu=e["__core-js_shared__"],Ru=function(){var e=/[^.]+$/.exec(Pu&&Pu.keys&&Pu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ou=e.Function.prototype.toString,Cu=Tu.hasOwnProperty,ku=0,Iu=Ou.call(Object),Fu=Tu.toString,Au=jn._,Mu=Su("^"+Ou.call(Cu).replace(mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Du=Ln?e.Buffer:K,Bu=e.Reflect,Lu=e.Symbol,zu=e.Uint8Array,Nu=Bu?Bu.enumerate:K,Hu=Object.getOwnPropertySymbols,ju="symbol"==typeof(ju=Lu&&Lu.iterator)?ju:K,Vu=Object.create,Wu=Tu.propertyIsEnumerable,Uu=_u.splice,$u=function(t,n){return e.setTimeout.call(jn,t,n)},qu=xu.ceil,Gu=xu.floor,Zu=Object.getPrototypeOf,Xu=e.isFinite,Yu=_u.join,Qu=Object.keys,Ku=xu.max,Ju=xu.min,ec=e.parseInt,tc=xu.random,nc=Eu.replace,ic=_u.reverse,rc=Eu.split,oc=zr(e,"DataView"),sc=zr(e,"Map"),ac=zr(e,"Promise"),lc=zr(e,"Set"),uc=zr(e,"WeakMap"),cc=zr(Object,"create"),hc=uc&&new uc,fc=!Wu.call({valueOf:1},"valueOf"),dc={},pc=co(oc),gc=co(sc),vc=co(ac),mc=co(lc),yc=co(uc),wc=Lu?Lu.prototype:K,xc=wc?wc.valueOf:K,Sc=wc?wc.toString:K;t.templateSettings={escape:ht,evaluate:ft,interpolate:dt,variable:"",imports:{_:t}},t.prototype=n.prototype,t.prototype.constructor=t,i.prototype=kn(n.prototype),i.prototype.constructor=i,r.prototype=kn(n.prototype),r.prototype.constructor=r,Lt.prototype.clear=zt,Lt.prototype["delete"]=Nt,Lt.prototype.get=Ht,Lt.prototype.has=jt,Lt.prototype.set=Vt,Wt.prototype.clear=Ut,Wt.prototype["delete"]=$t,Wt.prototype.get=qt,Wt.prototype.has=Gt,Wt.prototype.set=Zt,Xt.prototype.clear=Yt,Xt.prototype["delete"]=Qt,Xt.prototype.get=Kt,Xt.prototype.has=Jt,Xt.prototype.set=en,tn.prototype.add=tn.prototype.push=nn,tn.prototype.has=rn,on.prototype.clear=sn,on.prototype["delete"]=an,on.prototype.get=ln,on.prototype.has=un,on.prototype.set=cn;var bc=ar(Wn),_c=ar(Un,!0),Tc=lr(),Ec=lr(!0);Nu&&!Wu.call({valueOf:1},"valueOf")&&(ai=function(e){return W(Nu(e))});var Pc=hc?function(e,t){return hc.set(e,t),e}:ql,Rc=lc&&1/q(new lc([,-0]))[1]==_e?function(e){return new lc(e)}:Kl,Oc=hc?function(e){return hc.get(e)}:Kl,Cc=yi("length");Hu||(Hr=nu);var kc=Hu?function(e){for(var t=[];e;)v(t,Hr(e)),e=Nr(e);return t}:Hr;(oc&&jr(new oc(new ArrayBuffer(1)))!=Ze||sc&&jr(new sc)!=Le||ac&&jr(ac.resolve())!=He||lc&&jr(new lc)!=Ve||uc&&jr(new uc)!=$e)&&(jr=function(e){var t=Fu.call(e),n=t==Ne?e.constructor:K,i=n?co(n):K;if(i)switch(i){case pc:return Ze;case gc:return Le;case vc:return He;case mc:return Ve;case yc:return $e}return t});var Ic=Pu?pa:iu,Fc=function(){var e=0,t=0;return function(n,i){var r=Ms(),o=we-(r-t);if(t=r,o>0){if(++e>=ye)return n}else e=0;return Pc(n,i)}}(),Ac=Vs(function(e){var t=[];return Ua(e).replace(vt,function(e,n,i,r){t.push(i?r.replace(_t,"$1"):n||e)}),t}),Mc=$s(function(e,t){return oa(e)?Fn(e,Hn(t,1,oa,!0)):[]}),Dc=$s(function(e,t){var n=Io(t);return oa(n)&&(n=K),oa(e)?Fn(e,Hn(t,1,oa,!0),Dr(n)):[]}),Bc=$s(function(e,t){var n=Io(t);return oa(n)&&(n=K),oa(e)?Fn(e,Hn(t,1,oa,!0),K,n):[]}),Lc=$s(function(e){var t=g(e,Hi);return t.length&&t[0]===e[0]?Kn(t):[]}),zc=$s(function(e){var t=Io(e),n=g(e,Hi);return t===Io(n)?t=K:n.pop(),n.length&&n[0]===e[0]?Kn(n,Dr(t)):[]}),Nc=$s(function(e){var t=Io(e),n=g(e,Hi);return t===Io(n)?t=K:n.pop(),n.length&&n[0]===e[0]?Kn(n,K,t):[]}),Hc=$s(Mo),jc=$s(function(e,t){t=Hn(t,1);var n=e?e.length:0,i=mn(e,t);return Si(e,g(t,function(e){return Yr(e,n)?+e:e}).sort(Ki)),i}),Vc=$s(function(e){return Ai(Hn(e,1,oa,!0))}),Wc=$s(function(e){var t=Io(e);return oa(t)&&(t=K),Ai(Hn(e,1,oa,!0),Dr(t))}),Uc=$s(function(e){var t=Io(e);return oa(t)&&(t=K),Ai(Hn(e,1,oa,!0),K,t)}),$c=$s(function(e,t){return oa(e)?Fn(e,t):[]}),qc=$s(function(e){return zi(f(e,oa))}),Gc=$s(function(e){var t=Io(e);return oa(t)&&(t=K),zi(f(e,oa),Dr(t))}),Zc=$s(function(e){var t=Io(e);return oa(t)&&(t=K),zi(f(e,oa),K,t)}),Xc=$s(ns),Yc=$s(function(e){var t=e.length,n=t>1?e[t-1]:K;return n="function"==typeof n?(e.pop(),n):K,is(e,n)}),Qc=$s(function(e){e=Hn(e,1);var t=e.length,n=t?e[0]:0,o=this.__wrapped__,s=function(t){return mn(t,e)};return!(t>1||this.__actions__.length)&&o instanceof r&&Yr(n)?(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:ls,args:[s],thisArg:K}),new i(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(K),e})):this.thru(s)}),Kc=or(function(e,t,n){Cu.call(e,n)?++e[n]:e[n]=1}),Jc=pr(So),eh=pr(bo),th=or(function(e,t,n){Cu.call(e,n)?e[n].push(t):e[n]=[t]}),nh=$s(function(e,t,n){var i=-1,r="function"==typeof t,o=Kr(t),s=ra(e)?Array(e.length):[];return bc(e,function(e){var l=r?t:o&&null!=e?e[t]:K;s[++i]=l?a(l,e,n):ei(e,t,n)}),s}),ih=or(function(e,t,n){e[n]=t}),rh=or(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),oh=$s(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Qr(e,t[0],t[1])?t=[]:n>2&&Qr(t[0],t[1],t[2])&&(t=[t[0]]),t=1==t.length&&vh(t[0])?t[0]:Hn(t,1,Xr),gi(e,t,[])}),sh=$s(function(e,t,n){var i=re;if(n.length){var r=$(n,Mr(sh));i|=ue}return Rr(e,i,t,n,r)}),ah=$s(function(e,t,n){var i=re|oe;if(n.length){var r=$(n,Mr(ah));i|=ue}return Rr(t,i,e,n,r)}),lh=$s(function(e,t){return In(e,1,t)}),uh=$s(function(e,t,n){return In(e,ja(t)||0,n)});Vs.Cache=Xt;var ch=$s(function(e,t){t=1==t.length&&vh(t[0])?g(t[0],k(Dr())):g(Hn(t,1,Xr),k(Dr()));var n=t.length;return $s(function(i){for(var r=-1,o=Ju(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return a(e,this,i)})}),hh=$s(function(e,t){var n=$(t,Mr(hh));return Rr(e,ue,K,t,n)}),fh=$s(function(e,t){var n=$(t,Mr(fh));return Rr(e,ce,K,t,n)}),dh=$s(function(e,t){return Rr(e,fe,K,K,K,Hn(t,1))}),ph=_r(Zn),gh=_r(function(e,t){return e>=t}),vh=Array.isArray,mh=Du?function(e){return e instanceof Du}:iu,yh=_r(li),wh=_r(function(e,t){return t>=e}),xh=sr(function(e,t){if(fc||no(t)||ra(t))return void ir(t,il(t),e);for(var n in t)Cu.call(t,n)&&dn(e,n,t[n])}),Sh=sr(function(e,t){if(fc||no(t)||ra(t))return void ir(t,rl(t),e);for(var n in t)dn(e,n,t[n])}),bh=sr(function(e,t,n,i){ir(t,rl(t),e,i)}),_h=sr(function(e,t,n,i){ir(t,il(t),e,i)}),Th=$s(function(e,t){return mn(e,Hn(t,1))}),Eh=$s(function(e){return e.push(K,hn),a(bh,K,e)}),Ph=$s(function(e){return e.push(K,so),a(Ih,K,e)}),Rh=mr(function(e,t,n){e[t]=n},$l(ql)),Oh=mr(function(e,t,n){Cu.call(e,t)?e[t].push(n):e[t]=[n]},Dr),Ch=$s(ei),kh=sr(function(e,t,n){fi(e,t,n)}),Ih=sr(function(e,t,n,i){fi(e,t,n,i)}),Fh=$s(function(e,t){return null==e?{}:(t=g(Hn(t,1),uo),vi(e,Fn(Fr(e),t)))}),Ah=$s(function(e,t){return null==e?{}:vi(e,g(Hn(t,1),uo))}),Mh=Pr(il),Dh=Pr(rl),Bh=hr(function(e,t,n){return t=t.toLowerCase(),e+(n?Sl(t):t)}),Lh=hr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),zh=hr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Nh=cr("toLowerCase"),Hh=hr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),jh=hr(function(e,t,n){return e+(n?" ":"")+Wh(t)}),Vh=hr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Wh=cr("toUpperCase"),Uh=$s(function(e,t){try{return a(e,K,t)}catch(n){return fa(n)?n:new wu(n)}}),$h=$s(function(e,t){return u(Hn(t,1),function(t){t=uo(t),e[t]=sh(e[t],e)}),e}),qh=gr(),Gh=gr(!0),Zh=$s(function(e,t){return function(n){return ei(n,e,t)}}),Xh=$s(function(e,t){return function(n){return ei(e,n,t)}}),Yh=wr(g),Qh=wr(h),Kh=wr(w),Jh=br(),ef=br(!0),tf=yr(function(e,t){return e+t}),nf=Er("ceil"),rf=yr(function(e,t){return e/t}),of=Er("floor"),sf=yr(function(e,t){return e*t}),af=Er("round"),lf=yr(function(e,t){return e-t});return t.after=Ds,t.ary=Bs,t.assign=xh,t.assignIn=Sh,t.assignInWith=bh,t.assignWith=_h,t.at=Th,t.before=Ls,t.bind=sh,t.bindAll=$h,t.bindKey=ah,t.castArray=Ys,t.chain=ss,t.chunk=fo,t.compact=po,t.concat=go,t.cond=Wl,t.conforms=Ul,t.constant=$l,t.countBy=Kc,t.create=$a,t.curry=zs,t.curryRight=Ns,t.debounce=Hs,t.defaults=Eh,t.defaultsDeep=Ph,t.defer=lh,t.delay=uh,t.difference=Mc,t.differenceBy=Dc,t.differenceWith=Bc,t.drop=vo,t.dropRight=mo,t.dropRightWhile=yo,t.dropWhile=wo,t.fill=xo,t.filter=ms,t.flatMap=ys,t.flatMapDeep=ws,t.flatMapDepth=xs,t.flatten=_o,t.flattenDeep=To,t.flattenDepth=Eo,t.flip=js,t.flow=qh,t.flowRight=Gh,t.fromPairs=Po,t.functions=Ka,t.functionsIn=Ja,t.groupBy=th,t.initial=Co,t.intersection=Lc,t.intersectionBy=zc,t.intersectionWith=Nc,t.invert=Rh,t.invertBy=Oh,t.invokeMap=nh,t.iteratee=Gl,t.keyBy=ih,t.keys=il,t.keysIn=rl,t.map=Ts,t.mapKeys=ol,t.mapValues=sl,t.matches=Zl,t.matchesProperty=Xl,t.memoize=Vs,t.merge=kh,t.mergeWith=Ih,t.method=Zh,t.methodOf=Xh,t.mixin=Yl,t.negate=Ws,t.nthArg=Jl,t.omit=Fh,t.omitBy=al,t.once=Us,t.orderBy=Es,t.over=Yh,t.overArgs=ch,t.overEvery=Qh,t.overSome=Kh,t.partial=hh,t.partialRight=fh,t.partition=rh,t.pick=Ah,t.pickBy=ll,t.property=eu,t.propertyOf=tu,t.pull=Hc,t.pullAll=Mo,t.pullAllBy=Do,t.pullAllWith=Bo,t.pullAt=jc,t.range=Jh,t.rangeRight=ef,t.rearg=dh,t.reject=Os,t.remove=Lo,t.rest=$s,t.reverse=zo,t.sampleSize=ks,t.set=cl,t.setWith=hl,t.shuffle=Is,t.slice=No,t.sortBy=oh,t.sortedUniq=qo,t.sortedUniqBy=Go,t.split=Fl,t.spread=qs,t.tail=Zo,t.take=Xo,t.takeRight=Yo,t.takeRightWhile=Qo,t.takeWhile=Ko,t.tap=as,t.throttle=Gs,t.thru=ls,t.toArray=La,t.toPairs=Mh,t.toPairsIn=Dh,t.toPath=lu,t.toPlainObject=Va,t.transform=fl,t.unary=Zs,t.union=Vc,t.unionBy=Wc,t.unionWith=Uc,t.uniq=Jo,t.uniqBy=es,t.uniqWith=ts,t.unset=dl,t.unzip=ns,t.unzipWith=is,t.update=pl,t.updateWith=gl,t.values=vl,t.valuesIn=ml,t.without=$c,t.words=Vl,t.wrap=Xs,t.xor=qc,t.xorBy=Gc,t.xorWith=Zc,t.zip=Xc,t.zipObject=rs,t.zipObjectDeep=os,t.zipWith=Yc,t.entries=Mh,t.entriesIn=Dh,t.extend=Sh,t.extendWith=bh,Yl(t,t),t.add=tf,t.attempt=Uh,t.camelCase=Bh,t.capitalize=Sl,t.ceil=nf,t.clamp=yl,t.clone=Qs,t.cloneDeep=Js,t.cloneDeepWith=ea,t.cloneWith=Ks,t.deburr=bl,t.divide=rf,t.endsWith=_l,t.eq=ta,t.escape=Tl,t.escapeRegExp=El,t.every=vs,t.find=Jc,t.findIndex=So,t.findKey=qa,t.findLast=eh,t.findLastIndex=bo,t.findLastKey=Ga,t.floor=of,t.forEach=Ss,t.forEachRight=bs,t.forIn=Za,t.forInRight=Xa,t.forOwn=Ya,t.forOwnRight=Qa,t.get=el,t.gt=ph,t.gte=gh,t.has=tl,t.hasIn=nl,t.head=Ro,t.identity=ql,t.includes=_s,t.indexOf=Oo,t.inRange=wl,t.invoke=Ch,t.isArguments=na,t.isArray=vh,t.isArrayBuffer=ia,t.isArrayLike=ra,t.isArrayLikeObject=oa,t.isBoolean=sa,t.isBuffer=mh,t.isDate=aa,t.isElement=la,t.isEmpty=ua,t.isEqual=ca,t.isEqualWith=ha,t.isError=fa,t.isFinite=da,t.isFunction=pa,t.isInteger=ga,t.isLength=va,t.isMap=wa,t.isMatch=xa,t.isMatchWith=Sa,t.isNaN=ba,t.isNative=_a,t.isNil=Ea,t.isNull=Ta,t.isNumber=Pa,t.isObject=ma,t.isObjectLike=ya,t.isPlainObject=Ra,t.isRegExp=Oa,t.isSafeInteger=Ca,t.isSet=ka,t.isString=Ia,t.isSymbol=Fa,t.isTypedArray=Aa,t.isUndefined=Ma,t.isWeakMap=Da,t.isWeakSet=Ba,t.join=ko,t.kebabCase=Lh,t.last=Io,t.lastIndexOf=Fo,t.lowerCase=zh,t.lowerFirst=Nh,t.lt=yh,t.lte=wh,t.max=cu,t.maxBy=hu,t.mean=fu,t.meanBy=du,t.min=pu,t.minBy=gu,t.stubArray=nu,t.stubFalse=iu,t.stubObject=ru,t.stubString=ou,t.stubTrue=su,t.multiply=sf,t.nth=Ao,t.noConflict=Ql,t.noop=Kl,t.now=Ms,t.pad=Pl,t.padEnd=Rl,t.padStart=Ol,t.parseInt=Cl,t.random=xl,t.reduce=Ps,t.reduceRight=Rs,t.repeat=kl,t.replace=Il,t.result=ul,t.round=af,t.runInContext=Q,t.sample=Cs,t.size=Fs,t.snakeCase=Hh,t.some=As,t.sortedIndex=Ho,t.sortedIndexBy=jo,t.sortedIndexOf=Vo,t.sortedLastIndex=Wo,t.sortedLastIndexBy=Uo,t.sortedLastIndexOf=$o,t.startCase=jh,t.startsWith=Al,t.subtract=lf,t.sum=vu,t.sumBy=mu,t.template=Ml,t.times=au,t.toFinite=za,t.toInteger=Na,t.toLength=Ha,t.toLower=Dl,t.toNumber=ja,t.toSafeInteger=Wa,t.toString=Ua,t.toUpper=Bl,t.trim=Ll,t.trimEnd=zl,t.trimStart=Nl,t.truncate=Hl,t.unescape=jl,t.uniqueId=uu,t.upperCase=Vh,t.upperFirst=Wh,t.each=Ss,t.eachRight=bs,t.first=Ro,Yl(t,function(){var e={};return Wn(t,function(n,i){Cu.call(t.prototype,i)||(e[i]=n)}),e}(),{chain:!1}),t.VERSION=J,u(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),u(["drop","take"],function(e,t){r.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new r(this);n=n===K?1:Ku(Na(n),0);var o=this.clone();return i?o.__takeCount__=Ju(n,o.__takeCount__):o.__views__.push({size:Ju(n,Re),type:e+(o.__dir__<0?"Right":"")}),o},r.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),u(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==xe||n==be;r.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Dr(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),u(["head","last"],function(e,t){var n="take"+(t?"Right":"");r.prototype[e]=function(){return this[n](1).value()[0]}}),u(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");r.prototype[e]=function(){return this.__filtered__?new r(this):this[n](1)}}),r.prototype.compact=function(){return this.filter(ql)},r.prototype.find=function(e){return this.filter(e).head()},r.prototype.findLast=function(e){return this.reverse().find(e)},r.prototype.invokeMap=$s(function(e,t){return"function"==typeof e?new r(this):this.map(function(n){return ei(n,e,t)})}),r.prototype.reject=function(e){return e=Dr(e,3),this.filter(function(t){return!e(t)})},r.prototype.slice=function(e,t){e=Na(e);var n=this;return n.__filtered__&&(e>0||0>t)?new r(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==K&&(t=Na(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},r.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},r.prototype.toArray=function(){return this.take(Re)},Wn(r.prototype,function(e,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),s=/^(?:head|last)$/.test(n),a=t[s?"take"+("last"==n?"Right":""):n],l=s||/^find/.test(n);a&&(t.prototype[n]=function(){var n=this.__wrapped__,u=s?[1]:arguments,c=n instanceof r,h=u[0],f=c||vh(n),d=function(e){var n=a.apply(t,v([e],u));return s&&p?n[0]:n};f&&o&&"function"==typeof h&&1!=h.length&&(c=f=!1);var p=this.__chain__,g=!!this.__actions__.length,m=l&&!p,y=c&&!g;if(!l&&f){n=y?n:new r(this);var w=e.apply(n,u);return w.__actions__.push({func:ls,args:[d],thisArg:K}),new i(w,p)}return m&&y?e.apply(this,u):(w=this.thru(d),m?s?w.value()[0]:w.value():w)})}),u(["pop","push","shift","sort","splice","unshift"],function(e){var n=_u[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var t=this.value();return n.apply(vh(t)?t:[],e)}return this[i](function(t){return n.apply(vh(t)?t:[],e)})}}),Wn(r.prototype,function(e,n){var i=t[n];if(i){var r=i.name+"",o=dc[r]||(dc[r]=[]);o.push({name:n,func:i})}}),dc[vr(K,oe).name]=[{name:"wrapper",func:K}],r.prototype.clone=D,r.prototype.reverse=Dt,r.prototype.value=Bt,t.prototype.at=Qc,t.prototype.chain=us,t.prototype.commit=cs,t.prototype.next=hs,t.prototype.plant=ds,t.prototype.reverse=ps,t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=gs,ju&&(t.prototype[ju]=fs),t}var K,J="4.13.1",ee=200,te="Expected a function",ne="__lodash_hash_undefined__",ie="__lodash_placeholder__",re=1,oe=2,se=4,ae=8,le=16,ue=32,ce=64,he=128,fe=256,de=512,pe=1,ge=2,ve=30,me="...",ye=150,we=16,xe=1,Se=2,be=3,_e=1/0,Te=9007199254740991,Ee=1.7976931348623157e308,Pe=NaN,Re=4294967295,Oe=Re-1,Ce=Re>>>1,ke="[object Arguments]",Ie="[object Array]",Fe="[object Boolean]",Ae="[object Date]",Me="[object Error]",De="[object Function]",Be="[object GeneratorFunction]",Le="[object Map]",ze="[object Number]",Ne="[object Object]",He="[object Promise]",je="[object RegExp]",Ve="[object Set]",We="[object String]",Ue="[object Symbol]",$e="[object WeakMap]",qe="[object WeakSet]",Ge="[object ArrayBuffer]",Ze="[object DataView]",Xe="[object Float32Array]",Ye="[object Float64Array]",Qe="[object Int8Array]",Ke="[object Int16Array]",Je="[object Int32Array]",et="[object Uint8Array]",tt="[object Uint8ClampedArray]",nt="[object Uint16Array]",it="[object Uint32Array]",rt=/\b__p \+= '';/g,ot=/\b(__p \+=) '' \+/g,st=/(__e\(.*?\)|\b__t\)) \+\n'';/g,at=/&(?:amp|lt|gt|quot|#39|#96);/g,lt=/[&<>"'`]/g,ut=RegExp(at.source),ct=RegExp(lt.source),ht=/<%-([\s\S]+?)%>/g,ft=/<%([\s\S]+?)%>/g,dt=/<%=([\s\S]+?)%>/g,pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gt=/^\w*$/,vt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,mt=/[\\^$.*+?()[\]{}|]/g,yt=RegExp(mt.source),wt=/^\s+|\s+$/g,xt=/^\s+/,St=/\s+$/,bt=/[a-zA-Z0-9]+/g,_t=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Et=/\w*$/,Pt=/^0x/i,Rt=/^[-+]0x[0-9a-f]+$/i,Ot=/^0b[01]+$/i,Ct=/^\[object .+?Constructor\]$/,kt=/^0o[0-7]+$/i,It=/^(?:0|[1-9]\d*)$/,Ft=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,At=/($^)/,Mt=/['\n\r\u2028\u2029\\]/g,Dt="\\ud800-\\udfff",Bt="\\u0300-\\u036f\\ufe20-\\ufe23",Lt="\\u20d0-\\u20f0",zt="\\u2700-\\u27bf",Nt="a-z\\xdf-\\xf6\\xf8-\\xff",Ht="\\xac\\xb1\\xd7\\xf7",jt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vt="\\u2000-\\u206f",Wt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ut="A-Z\\xc0-\\xd6\\xd8-\\xde",$t="\\ufe0e\\ufe0f",qt=Ht+jt+Vt+Wt,Gt="['’]",Zt="["+Dt+"]",Xt="["+qt+"]",Yt="["+Bt+Lt+"]",Qt="\\d+",Kt="["+zt+"]",Jt="["+Nt+"]",en="[^"+Dt+qt+Qt+zt+Nt+Ut+"]",tn="\\ud83c[\\udffb-\\udfff]",nn="(?:"+Yt+"|"+tn+")",rn="[^"+Dt+"]",on="(?:\\ud83c[\\udde6-\\uddff]){2}",sn="[\\ud800-\\udbff][\\udc00-\\udfff]",an="["+Ut+"]",ln="\\u200d",un="(?:"+Jt+"|"+en+")",cn="(?:"+an+"|"+en+")",hn="(?:"+Gt+"(?:d|ll|m|re|s|t|ve))?",fn="(?:"+Gt+"(?:D|LL|M|RE|S|T|VE))?",dn=nn+"?",pn="["+$t+"]?",gn="(?:"+ln+"(?:"+[rn,on,sn].join("|")+")"+pn+dn+")*",vn=pn+dn+gn,mn="(?:"+[Kt,on,sn].join("|")+")"+vn,yn="(?:"+[rn+Yt+"?",Yt,on,sn,Zt].join("|")+")",wn=RegExp(Gt,"g"),xn=RegExp(Yt,"g"),Sn=RegExp(tn+"(?="+tn+")|"+yn+vn,"g"),bn=RegExp([an+"?"+Jt+"+"+hn+"(?="+[Xt,an,"$"].join("|")+")",cn+"+"+fn+"(?="+[Xt,an+un,"$"].join("|")+")",an+"?"+un+"+"+hn,an+"+"+fn,Qt,mn].join("|"),"g"),_n=RegExp("["+ln+Dt+Bt+Lt+$t+"]"),Tn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,En=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","isFinite","parseInt","setTimeout"],Pn=-1,Rn={};Rn[Xe]=Rn[Ye]=Rn[Qe]=Rn[Ke]=Rn[Je]=Rn[et]=Rn[tt]=Rn[nt]=Rn[it]=!0,Rn[ke]=Rn[Ie]=Rn[Ge]=Rn[Fe]=Rn[Ze]=Rn[Ae]=Rn[Me]=Rn[De]=Rn[Le]=Rn[ze]=Rn[Ne]=Rn[je]=Rn[Ve]=Rn[We]=Rn[$e]=!1;var On={};On[ke]=On[Ie]=On[Ge]=On[Ze]=On[Fe]=On[Ae]=On[Xe]=On[Ye]=On[Qe]=On[Ke]=On[Je]=On[Le]=On[ze]=On[Ne]=On[je]=On[Ve]=On[We]=On[Ue]=On[et]=On[tt]=On[nt]=On[it]=!0,On[Me]=On[De]=On[$e]=!1;var Cn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},In={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Fn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},An=parseFloat,Mn=parseInt,Dn="object"==typeof t&&t,Bn=Dn&&"object"==typeof e&&e,Ln=Bn&&Bn.exports===Dn,zn=D("object"==typeof r&&r),Nn=D("object"==typeof self&&self),Hn=D("object"==typeof this&&this),jn=zn||Nn||Hn||Function("return this")(),Vn=Q();(Nn||{})._=Vn,i=function(){return Vn}.call(t,n,t,e),!(i!==K&&(e.exports=i))}).call(this)}).call(t,n(313)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},
e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];n(this,e),this._flush=t,this._images=i,i&&this.flush()}return i(e,[{key:"reset",value:function(){this._images=[]}},{key:"sizeOf",value:function(){return this._images.length}},{key:"push",value:function(e){return this._images.push(e),this}},{key:"pushAll",value:function(e){return"string"==typeof e&&(e=[e]),this._images=[].concat(this._images,e),this}},{key:"onFlushEnd",value:function(e){}},{key:"beforeFlushStart",value:function(e){}},{key:"flush",value:function(){this.beforeFlushStart(this._images),this._images.forEach(this._flush),this.onFlushEnd(this._images)}},{key:"pop",value:function(){var e=this._images.pop();return this.flush(this._images),e}}]),e}();t["default"]=r},function(e,t,n){"use strict";function i(e,t,n){return{render:function(i,r,o,a){var l=arguments.length<=4||void 0===arguments[4]?!0:arguments[4];return(0,s.withContext)(n,function(){n.rect(e,t,10*e,10*t),n.fillStyle="",n.shadowColor=l?"#000":"#FFF",n.shadowBlur=i,n.globalAlpha=r,n.shadowOffsetX=o,n.shadowOffsetY=a,n.fill()}),this}}}function r(e){var t=e.label,n=e.height,r=e.width,a=e.imagePath,l=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],u=l.padding||1.5,c=l.fontSize||20,h=l.fontFamily||"Helvetica",f=l.lineHeight||1.4*c,d=l.color||"#333",p=document.createElement("canvas");p.setAttribute("height",""+12*n),p.setAttribute("width",""+12*r);var g=p.getContext("2d"),v=new i(r,n,g);return o(a).then(function(e){return v.render(40,"0.005",0,15).render(15,"0.05",0,10).render(15,"0.1",0,15).render(1,"0.7",0,-2,!1).render(4,"0.1",0,-5,!1).render(4,"0.2",0,5),(0,s.withContext)(g,function(){e.src="./images/label.png",g.drawImage(e,r,n,10*r,10*n)}),(0,s.withContext)(g,function(){g.fillStyle=d,g.globalAlpha="0.9",g.font="bold "+c+"px "+h;for(var e=(0,s.getCanvasLines)(g,t,9*r),i=0;i<e.length;i++)g.fillText(e[i],r*u,(i+1)*f+n*u)}),(0,s.withContext)(g,function(){var e=g.createRadialGradient(6*r,6*n,0,6*r,6*n,6*n);e.addColorStop(0,"rgba(255,255,255,0.9)"),e.addColorStop(1,"rgba(255,255,255,0)"),g.globalCompositeOperation="soft-light",g.fillStyle=e,g.fillRect(r,n,10*r,10*n)}),p})}function o(e){return a[e]?a[e]:a[e]=new Promise(function(t,n){try{!function(){var n=new Image;n.src=e,n.onload=function(){t(n)}}()}catch(i){n(i)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.LabelShadow=i,t.LabelElement=r,t.asyncCreateImage=o;var s=n(307),a={}},function(e,t,n){var i,r;!function(e){function t(e){var t=e.length,i=n.type(e);return"function"===i||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var n=function(e,t){return new n.fn.init(e,t)};n.isWindow=function(e){return null!=e&&e==e.window},n.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[s.call(e)]||"object":typeof e},n.isArray=Array.isArray||function(e){return"array"===n.type(e)},n.isPlainObject=function(e){var t;if(!e||"object"!==n.type(e)||e.nodeType||n.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}for(t in e);return void 0===t||o.call(e,t)},n.each=function(e,n,i){var r,o=0,s=e.length,a=t(e);if(i){if(a)for(;s>o&&(r=n.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=n.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=n.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=n.call(e[o],o,e[o]),r===!1)break;return e},n.data=function(e,t,r){if(void 0===r){var o=e[n.expando],s=o&&i[o];if(void 0===t)return s;if(s&&t in s)return s[t]}else if(void 0!==t){var o=e[n.expando]||(e[n.expando]=++n.uuid);return i[o]=i[o]||{},i[o][t]=r,r}},n.removeData=function(e,t){var r=e[n.expando],o=r&&i[r];o&&n.each(t,function(e,t){delete o[t]})},n.extend=function(){var e,t,i,r,o,s,a=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[l]||{},l++),"object"!=typeof a&&"function"!==n.type(a)&&(a={}),l===u&&(a=this,l--);u>l;l++)if(null!=(o=arguments[l]))for(r in o)e=a[r],i=o[r],a!==i&&(c&&i&&(n.isPlainObject(i)||(t=n.isArray(i)))?(t?(t=!1,s=e&&n.isArray(e)?e:[]):s=e&&n.isPlainObject(e)?e:{},a[r]=n.extend(c,s,i)):void 0!==i&&(a[r]=i));return a},n.queue=function(e,i,r){function o(e,n){var i=n||[];return null!=e&&(t(Object(e))?!function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e}(i,"string"==typeof e?[e]:e):[].push.call(i,e)),i}if(e){i=(i||"fx")+"queue";var s=n.data(e,i);return r?(!s||n.isArray(r)?s=n.data(e,i,o(r)):s.push(r),s):s||[]}},n.dequeue=function(e,t){n.each(e.nodeType?[e]:e,function(e,i){t=t||"fx";var r=n.queue(i,t),o=r.shift();"inprogress"===o&&(o=r.shift()),o&&("fx"===t&&r.unshift("inprogress"),o.call(i,function(){n.dequeue(i,t)}))})},n.fn=n.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),i=this.offset(),r=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:n(e).offset();return i.top-=parseFloat(t.style.marginTop)||0,i.left-=parseFloat(t.style.marginLeft)||0,e.style&&(r.top+=parseFloat(e.style.borderTopWidth)||0,r.left+=parseFloat(e.style.borderLeftWidth)||0),{top:i.top-r.top,left:i.left-r.left}}};var i={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var r={},o=r.hasOwnProperty,s=r.toString,a="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<a.length;l++)r["[object "+a[l]+"]"]=a[l].toLowerCase();n.fn.init.prototype=n.fn,e.Velocity={Utilities:n}}}(window),function(o){"object"==typeof e&&"object"==typeof e.exports?e.exports=o():(i=o,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r)))}(function(){return function(e,t,n,i){function r(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}function o(e){return g.isWrapped(e)?e=[].slice.call(e):g.isNode(e)&&(e=[e]),e}function s(e){var t=f.data(e,"velocity");return null===t?i:t}function a(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,n,i,r){function o(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function a(e){return 3*e}function l(e,t,n){return((o(t,n)*e+s(t,n))*e+a(t))*e}function u(e,t,n){return 3*o(t,n)*e*e+2*s(t,n)*e+a(t)}function c(t,n){for(var r=0;g>r;++r){var o=u(n,e,i);if(0===o)return n;var s=l(n,e,i)-t;n-=s/o}return n}function h(){for(var t=0;w>t;++t)_[t]=l(t*x,e,i)}function f(t,n,r){var o,s,a=0;do s=n+(r-n)/2,o=l(s,e,i)-t,o>0?r=s:n=s;while(Math.abs(o)>m&&++a<y);return s}function d(t){for(var n=0,r=1,o=w-1;r!=o&&_[r]<=t;++r)n+=x;--r;var s=(t-_[r])/(_[r+1]-_[r]),a=n+s*x,l=u(a,e,i);return l>=v?c(t,a):0==l?a:f(t,n,n+x)}function p(){T=!0,e==n&&i==r||h()}var g=4,v=.001,m=1e-7,y=10,w=11,x=1/(w-1),S="Float32Array"in t;if(4!==arguments.length)return!1;for(var b=0;4>b;++b)if("number"!=typeof arguments[b]||isNaN(arguments[b])||!isFinite(arguments[b]))return!1;e=Math.min(e,1),i=Math.min(i,1),e=Math.max(e,0),i=Math.max(i,0);var _=S?new Float32Array(w):new Array(w),T=!1,E=function(t){return T||p(),e===n&&i===r?t:0===t?0:1===t?1:l(d(t),n,r)};E.getControlPoints=function(){return[{x:e,y:n},{x:i,y:r}]};var P="generateBezier("+[e,n,i,r]+")";return E.toString=function(){return P},E}function u(e,t){var n=e;return g.isString(e)?w.Easings[e]||(n=!1):n=g.isArray(e)&&1===e.length?a.apply(null,e):g.isArray(e)&&2===e.length?x.apply(null,e.concat([t])):g.isArray(e)&&4===e.length?l.apply(null,e):!1,n===!1&&(n=w.Easings[w.defaults.easing]?w.defaults.easing:y),n}function c(e){if(e){var t=(new Date).getTime(),n=w.State.calls.length;n>1e4&&(w.State.calls=r(w.State.calls));for(var o=0;n>o;o++)if(w.State.calls[o]){var a=w.State.calls[o],l=a[0],u=a[2],d=a[3],p=!!d,v=null;d||(d=w.State.calls[o][3]=t-16);for(var m=Math.min((t-d)/u.duration,1),y=0,x=l.length;x>y;y++){var b=l[y],T=b.element;if(s(T)){var E=!1;if(u.display!==i&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var P=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];f.each(P,function(e,t){S.setPropertyValue(T,"display",t)})}S.setPropertyValue(T,"display",u.display)}u.visibility!==i&&"hidden"!==u.visibility&&S.setPropertyValue(T,"visibility",u.visibility);for(var R in b)if("element"!==R){var O,C=b[R],k=g.isString(C.easing)?w.Easings[C.easing]:C.easing;if(1===m)O=C.endValue;else{var I=C.endValue-C.startValue;if(O=C.startValue+I*k(m,u,I),!p&&O===C.currentValue)continue}if(C.currentValue=O,"tween"===R)v=O;else{if(S.Hooks.registered[R]){var F=S.Hooks.getRoot(R),A=s(T).rootPropertyValueCache[F];A&&(C.rootPropertyValue=A)}var M=S.setPropertyValue(T,R,C.currentValue+(0===parseFloat(O)?"":C.unitType),C.rootPropertyValue,C.scrollData);S.Hooks.registered[R]&&(S.Normalizations.registered[F]?s(T).rootPropertyValueCache[F]=S.Normalizations.registered[F]("extract",null,M[1]):s(T).rootPropertyValueCache[F]=M[1]),"transform"===M[0]&&(E=!0)}}u.mobileHA&&s(T).transformCache.translate3d===i&&(s(T).transformCache.translate3d="(0px, 0px, 0px)",E=!0),E&&S.flushTransformCache(T)}}u.display!==i&&"none"!==u.display&&(w.State.calls[o][2].display=!1),u.visibility!==i&&"hidden"!==u.visibility&&(w.State.calls[o][2].visibility=!1),u.progress&&u.progress.call(a[1],a[1],m,Math.max(0,d+u.duration-t),d,v),1===m&&h(o)}}w.State.isTicking&&_(c)}function h(e,t){if(!w.State.calls[e])return!1;for(var n=w.State.calls[e][0],r=w.State.calls[e][1],o=w.State.calls[e][2],a=w.State.calls[e][4],l=!1,u=0,c=n.length;c>u;u++){var h=n[u].element;if(t||o.loop||("none"===o.display&&S.setPropertyValue(h,"display",o.display),"hidden"===o.visibility&&S.setPropertyValue(h,"visibility",o.visibility)),o.loop!==!0&&(f.queue(h)[1]===i||!/\.velocityQueueEntryFlag/i.test(f.queue(h)[1]))&&s(h)){s(h).isAnimating=!1,s(h).rootPropertyValueCache={};var d=!1;f.each(S.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,r=s(h).transformCache[t];s(h).transformCache[t]!==i&&new RegExp("^\\("+n+"[^.]").test(r)&&(d=!0,delete s(h).transformCache[t])}),o.mobileHA&&(d=!0,delete s(h).transformCache.translate3d),d&&S.flushTransformCache(h),S.Values.removeClass(h,"velocity-animating")}if(!t&&o.complete&&!o.loop&&u===c-1)try{o.complete.call(r,r)}catch(p){setTimeout(function(){throw p},1)}a&&o.loop!==!0&&a(r),s(h)&&o.loop===!0&&!t&&(f.each(s(h).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),w(h,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&f.dequeue(h,o.queue)}w.State.calls[e]=!1;for(var g=0,v=w.State.calls.length;v>g;g++)if(w.State.calls[g]!==!1){l=!0;break}l===!1&&(w.State.isTicking=!1,delete w.State.calls,w.State.calls=[])}var f,d=function(){if(n.documentMode)return n.documentMode;for(var e=7;e>4;e--){var t=n.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return i}(),p=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-e)),e=i+n,setTimeout(function(){t(i+n)},n)}}(),g={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==i&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},v=!1;if(e.fn&&e.fn.jquery?(f=e,v=!0):f=t.Velocity.Utilities,8>=d&&!v)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=d)return void(jQuery.fn.velocity=jQuery.fn.animate);var m=400,y="swing",w={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:f,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:m,easing:y,begin:i,complete:i,progress:i,display:i,visibility:i,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){f.data(e,"velocity",{isSVG:g.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==i?(w.State.scrollAnchor=t,w.State.scrollPropertyLeft="pageXOffset",w.State.scrollPropertyTop="pageYOffset"):(w.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,w.State.scrollPropertyLeft="scrollLeft",w.State.scrollPropertyTop="scrollTop");var x=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,i){var r={x:t.x+i.dx*n,v:t.v+i.dv*n,tension:t.tension,friction:t.friction};return{dx:r.v,dv:e(r)}}function n(n,i){var r={dx:n.v,dv:e(n)},o=t(n,.5*i,r),s=t(n,.5*i,o),a=t(n,i,s),l=1/6*(r.dx+2*(o.dx+s.dx)+a.dx),u=1/6*(r.dv+2*(o.dv+s.dv)+a.dv);return n.x=n.x+l*i,n.v=n.v+u*i,n}return function i(e,t,r){var o,s,a,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,h=1e-4,f=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,r=r||null,l.tension=e,l.friction=t,o=null!==r,o?(c=i(e,t),s=c/r*f):s=f;;)if(a=n(a||l,s),u.push(1+a.x),c+=16,!(Math.abs(a.x)>h&&Math.abs(a.v)>h))break;return o?function(e){return u[e*(u.length-1)|0]}:c}}();w.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},f.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){w.Easings[t[0]]=l.apply(null,t[1])});var S=w.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<S.Lists.colors.length;e++){var t="color"===S.Lists.colors[e]?"0 0 0 1":"255 255 255 1";S.Hooks.templates[S.Lists.colors[e]]=["Red Green Blue Alpha",t]}var n,i,r;if(d)for(n in S.Hooks.templates){i=S.Hooks.templates[n],r=i[0].split(" ");var o=i[1].match(S.RegEx.valueSplit);"Color"===r[0]&&(r.push(r.shift()),o.push(o.shift()),S.Hooks.templates[n]=[r.join(" "),o.join(" ")])}for(n in S.Hooks.templates){i=S.Hooks.templates[n],r=i[0].split(" ");for(var e in r){var s=n+r[e],a=e;S.Hooks.registered[s]=[n,a]}}},getRoot:function(e){var t=S.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return S.RegEx.valueUnwrap.test(t)&&(t=t.match(S.RegEx.valueUnwrap)[1]),S.Values.isCSSNullValue(t)&&(t=S.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=S.Hooks.registered[e];if(n){var i=n[0],r=n[1];return t=S.Hooks.cleanRootPropertyValue(i,t),t.toString().match(S.RegEx.valueSplit)[r]}return t},injectValue:function(e,t,n){var i=S.Hooks.registered[e];if(i){var r,o,s=i[0],a=i[1];return n=S.Hooks.cleanRootPropertyValue(s,n),r=n.toString().match(S.RegEx.valueSplit),r[a]=t,o=r.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var i;return S.RegEx.wrappedValueAlreadyExtracted.test(n)?i=n:(i=n.toString().match(S.RegEx.valueUnwrap),i=i?i[1].replace(/,(\s+)?/g," "):n),i;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return w.State.isFirefox?"filter":"-webkit-filter";case"extract":var i=parseFloat(n);if(!i&&0!==i){var r=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=r?r[1]:0}return i;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(8>=d)switch(e){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=i?i[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":return n;case"inject":return n}}},register:function(){9>=d||w.State.isGingerbread||(S.Lists.transformsBase=S.Lists.transformsBase.concat(S.Lists.transforms3D));for(var e=0;e<S.Lists.transformsBase.length;e++)!function(){var t=S.Lists.transformsBase[e];S.Normalizations.registered[t]=function(e,n,r){switch(e){case"name":return"transform";case"extract":return s(n)===i||s(n).transformCache[t]===i?/^scale/i.test(t)?1:0:s(n).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(r);break;case"scal":case"scale":w.State.isAndroid&&s(n).transformCache[t]===i&&1>r&&(r=1),o=!/(\d)$/i.test(r);break;case"skew":o=!/(deg|\d)$/i.test(r);break;case"rotate":o=!/(deg|\d)$/i.test(r)}return o||(s(n).transformCache[t]="("+r+")"),s(n).transformCache[t]}}}();for(var e=0;e<S.Lists.colors.length;e++)!function(){var t=S.Lists.colors[e];S.Normalizations.registered[t]=function(e,n,r){switch(e){case"name":return t;case"extract":var o;if(S.RegEx.wrappedValueAlreadyExtracted.test(r))o=r;else{var s,a={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(r)?s=a[r]!==i?a[r]:a.black:S.RegEx.isHex.test(r)?s="rgb("+S.Values.hexToRgb(r).join(" ")+")":/^rgba?\(/i.test(r)||(s=a.black),o=(s||r).toString().match(S.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=d||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=d?4===r.split(" ").length&&(r=r.split(/\s+/).slice(0,3).join(" ")):3===r.split(" ").length&&(r+=" 1"),(8>=d?"rgb":"rgba")+"("+r.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(d||w.State.isAndroid&&!w.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(w.State.prefixMatches[e])return[w.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,i=t.length;i>n;n++){var r;if(r=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase()}),g.isString(w.State.prefixElement.style[r]))return w.State.prefixMatches[e]=r,[r,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(n,function(e,t,n,i){return t+t+n+n+i+i}),t=i.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,n,r,o){function a(e,n){function r(){u&&S.setPropertyValue(e,"display","none")}var l=0;if(8>=d)l=f.css(e,n);else{var u=!1;if(/^(width|height)$/.test(n)&&0===S.getPropertyValue(e,"display")&&(u=!0,S.setPropertyValue(e,"display",S.Values.getDisplayType(e))),!o){if("height"===n&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(S.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(S.getPropertyValue(e,"paddingBottom"))||0);return r(),c}if("width"===n&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var h=e.offsetWidth-(parseFloat(S.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(S.getPropertyValue(e,"paddingRight"))||0);return r(),h}}var p;p=s(e)===i?t.getComputedStyle(e,null):s(e).computedStyle?s(e).computedStyle:s(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===n&&(n="borderTopColor"),l=9===d&&"filter"===n?p.getPropertyValue(n):p[n],""!==l&&null!==l||(l=e.style[n]),r()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(n)){var g=a(e,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(l=f(e).position()[n]+"px")}return l}var l;if(S.Hooks.registered[n]){var u=n,c=S.Hooks.getRoot(u);r===i&&(r=S.getPropertyValue(e,S.Names.prefixCheck(c)[0])),S.Normalizations.registered[c]&&(r=S.Normalizations.registered[c]("extract",e,r)),l=S.Hooks.extractValue(u,r)}else if(S.Normalizations.registered[n]){var h,p;h=S.Normalizations.registered[n]("name",e),"transform"!==h&&(p=a(e,S.Names.prefixCheck(h)[0]),S.Values.isCSSNullValue(p)&&S.Hooks.templates[n]&&(p=S.Hooks.templates[n][1])),l=S.Normalizations.registered[n]("extract",e,p)}if(!/^[\d-]/.test(l))if(s(e)&&s(e).isSVG&&S.Names.SVGAttribute(n))if(/^(height|width)$/i.test(n))try{l=e.getBBox()[n]}catch(g){l=0}else l=e.getAttribute(n);else l=a(e,S.Names.prefixCheck(n)[0]);return S.Values.isCSSNullValue(l)&&(l=0),w.debug>=2&&console.log("Get "+n+": "+l),l},setPropertyValue:function(e,n,i,r,o){var a=n;if("scroll"===n)o.container?o.container["scroll"+o.direction]=i:"Left"===o.direction?t.scrollTo(i,o.alternateValue):t.scrollTo(o.alternateValue,i);else if(S.Normalizations.registered[n]&&"transform"===S.Normalizations.registered[n]("name",e))S.Normalizations.registered[n]("inject",e,i),a="transform",i=s(e).transformCache[n];else{if(S.Hooks.registered[n]){var l=n,u=S.Hooks.getRoot(n);r=r||S.getPropertyValue(e,u),i=S.Hooks.injectValue(l,i,r),n=u}if(S.Normalizations.registered[n]&&(i=S.Normalizations.registered[n]("inject",e,i),n=S.Normalizations.registered[n]("name",e)),a=S.Names.prefixCheck(n)[0],8>=d)try{e.style[a]=i}catch(c){w.debug&&console.log("Browser does not support ["+i+"] for ["+a+"]")}else s(e)&&s(e).isSVG&&S.Names.SVGAttribute(n)?e.setAttribute(n,i):e.style[a]=i;w.debug>=2&&console.log("Set "+n+" ("+a+"): "+i)}return[a,i]},flushTransformCache:function(e){function t(t){return parseFloat(S.getPropertyValue(e,t))}var n="";if((d||w.State.isAndroid&&!w.State.isChrome)&&s(e).isSVG){var i={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};f.each(s(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),i[e]&&(n+=e+"("+i[e].join(" ")+") ",delete i[e])})}else{var r,o;f.each(s(e).transformCache,function(t){return r=s(e).transformCache[t],"transformPerspective"===t?(o=r,!0):(9===d&&"rotateZ"===t&&(t="rotate"),void(n+=t+r+" "))}),o&&(n="perspective"+o+" "+n)}S.setPropertyValue(e,"transform",n)}};S.Hooks.register(),S.Normalizations.register(),w.hook=function(e,t,n){var r=i;return e=o(e),f.each(e,function(e,o){if(s(o)===i&&w.init(o),n===i)r===i&&(r=w.CSS.getPropertyValue(o,t));else{var a=w.CSS.setPropertyValue(o,t,n);"transform"===a[0]&&w.CSS.flushTransformCache(o),r=a}}),r};var b=function(){function e(){return a?R.promise||null:l}function r(){function e(e){function h(e,t){var n=i,r=i,s=i;return g.isArray(e)?(n=e[0],!g.isArray(e[1])&&/^[\d-]/.test(e[1])||g.isFunction(e[1])||S.RegEx.isHex.test(e[1])?s=e[1]:(g.isString(e[1])&&!S.RegEx.isHex.test(e[1])||g.isArray(e[1]))&&(r=t?e[1]:u(e[1],a.duration),e[2]!==i&&(s=e[2]))):n=e,t||(r=r||a.easing),g.isFunction(n)&&(n=n.call(o,T,_)),g.isFunction(s)&&(s=s.call(o,T,_)),[n||0,r,s]}function d(e,t){var n,i;return i=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n||(n=S.Values.getUnitType(e)),[i,n]}function m(){var e={myParent:o.parentNode||n.body,position:S.getPropertyValue(o,"position"),fontSize:S.getPropertyValue(o,"fontSize")},i=e.position===M.lastPosition&&e.myParent===M.lastParent,r=e.fontSize===M.lastFontSize;M.lastParent=e.myParent,M.lastPosition=e.position,M.lastFontSize=e.fontSize;var a=100,l={};if(r&&i)l.emToPx=M.lastEmToPx,l.percentToPxWidth=M.lastPercentToPxWidth,l.percentToPxHeight=M.lastPercentToPxHeight;else{var u=s(o).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");w.init(u),e.myParent.appendChild(u),f.each(["overflow","overflowX","overflowY"],function(e,t){w.CSS.setPropertyValue(u,t,"hidden")}),w.CSS.setPropertyValue(u,"position",e.position),w.CSS.setPropertyValue(u,"fontSize",e.fontSize),w.CSS.setPropertyValue(u,"boxSizing","content-box"),f.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){w.CSS.setPropertyValue(u,t,a+"%")}),w.CSS.setPropertyValue(u,"paddingLeft",a+"em"),l.percentToPxWidth=M.lastPercentToPxWidth=(parseFloat(S.getPropertyValue(u,"width",null,!0))||1)/a,l.percentToPxHeight=M.lastPercentToPxHeight=(parseFloat(S.getPropertyValue(u,"height",null,!0))||1)/a,l.emToPx=M.lastEmToPx=(parseFloat(S.getPropertyValue(u,"paddingLeft"))||1)/a,e.myParent.removeChild(u)}return null===M.remToPx&&(M.remToPx=parseFloat(S.getPropertyValue(n.body,"fontSize"))||16),null===M.vwToPx&&(M.vwToPx=parseFloat(t.innerWidth)/100,M.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=M.remToPx,l.vwToPx=M.vwToPx,l.vhToPx=M.vhToPx,w.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),o),l}if(a.begin&&0===T)try{a.begin.call(p,p)}catch(x){setTimeout(function(){throw x},1)}if("scroll"===O){var b,E,P,C=/^x$/i.test(a.axis)?"Left":"Top",k=parseFloat(a.offset)||0;a.container?g.isWrapped(a.container)||g.isNode(a.container)?(a.container=a.container[0]||a.container,b=a.container["scroll"+C],P=b+f(o).position()[C.toLowerCase()]+k):a.container=null:(b=w.State.scrollAnchor[w.State["scrollProperty"+C]],E=w.State.scrollAnchor[w.State["scrollProperty"+("Left"===C?"Top":"Left")]],P=f(o).offset()[C.toLowerCase()]+k),l={scroll:{rootPropertyValue:!1,startValue:b,currentValue:b,endValue:P,unitType:"",easing:a.easing,scrollData:{container:a.container,direction:C,alternateValue:E}},element:o},w.debug&&console.log("tweensContainer (scroll): ",l.scroll,o)}else if("reverse"===O){if(!s(o).tweensContainer)return void f.dequeue(o,a.queue);"none"===s(o).opts.display&&(s(o).opts.display="auto"),"hidden"===s(o).opts.visibility&&(s(o).opts.visibility="visible"),s(o).opts.loop=!1,s(o).opts.begin=null,s(o).opts.complete=null,y.easing||delete a.easing,y.duration||delete a.duration,a=f.extend({},s(o).opts,a);var I=f.extend(!0,{},s(o).tweensContainer);for(var F in I)if("element"!==F){var A=I[F].startValue;I[F].startValue=I[F].currentValue=I[F].endValue,I[F].endValue=A,g.isEmptyObject(y)||(I[F].easing=a.easing),w.debug&&console.log("reverse tweensContainer ("+F+"): "+JSON.stringify(I[F]),o)}l=I}else if("start"===O){var I;s(o).tweensContainer&&s(o).isAnimating===!0&&(I=s(o).tweensContainer),f.each(v,function(e,t){if(RegExp("^"+S.Lists.colors.join("$|^")+"$").test(e)){var n=h(t,!0),r=n[0],o=n[1],s=n[2];if(S.RegEx.isHex.test(r)){for(var a=["Red","Green","Blue"],l=S.Values.hexToRgb(r),u=s?S.Values.hexToRgb(s):i,c=0;c<a.length;c++){var f=[l[c]];o&&f.push(o),u!==i&&f.push(u[c]),v[e+a[c]]=f}delete v[e]}}});for(var B in v){var L=h(v[B]),z=L[0],N=L[1],H=L[2];B=S.Names.camelCase(B);var j=S.Hooks.getRoot(B),V=!1;if(s(o).isSVG||"tween"===j||S.Names.prefixCheck(j)[1]!==!1||S.Normalizations.registered[j]!==i){(a.display!==i&&null!==a.display&&"none"!==a.display||a.visibility!==i&&"hidden"!==a.visibility)&&/opacity|filter/.test(B)&&!H&&0!==z&&(H=0),a._cacheValues&&I&&I[B]?(H===i&&(H=I[B].endValue+I[B].unitType),V=s(o).rootPropertyValueCache[j]):S.Hooks.registered[B]?H===i?(V=S.getPropertyValue(o,j),H=S.getPropertyValue(o,B,V)):V=S.Hooks.templates[j][1]:H===i&&(H=S.getPropertyValue(o,B));var W,U,$,q=!1;if(W=d(B,H),H=W[0],$=W[1],W=d(B,z),z=W[0].replace(/^([+-\/*])=/,function(e,t){return q=t,""}),U=W[1],H=parseFloat(H)||0,z=parseFloat(z)||0,"%"===U&&(/^(fontSize|lineHeight)$/.test(B)?(z/=100,U="em"):/^scale/.test(B)?(z/=100,U=""):/(Red|Green|Blue)$/i.test(B)&&(z=z/100*255,U="")),/[\/*]/.test(q))U=$;else if($!==U&&0!==H)if(0===z)U=$;else{r=r||m();var G=/margin|padding|left|right|width|text|word|letter/i.test(B)||/X$/.test(B)||"x"===B?"x":"y";switch($){case"%":H*="x"===G?r.percentToPxWidth:r.percentToPxHeight;break;case"px":break;default:H*=r[$+"ToPx"]}switch(U){case"%":H*=1/("x"===G?r.percentToPxWidth:r.percentToPxHeight);break;case"px":break;default:H*=1/r[U+"ToPx"]}}switch(q){case"+":z=H+z;break;case"-":z=H-z;break;case"*":z=H*z;break;case"/":z=H/z}l[B]={rootPropertyValue:V,startValue:H,currentValue:H,endValue:z,unitType:U,easing:N},w.debug&&console.log("tweensContainer ("+B+"): "+JSON.stringify(l[B]),o)}else w.debug&&console.log("Skipping ["+j+"] due to a lack of browser support.")}l.element=o}l.element&&(S.Values.addClass(o,"velocity-animating"),D.push(l),""===a.queue&&(s(o).tweensContainer=l,
s(o).opts=a),s(o).isAnimating=!0,T===_-1?(w.State.calls.push([D,p,a,null,R.resolver]),w.State.isTicking===!1&&(w.State.isTicking=!0,c())):T++)}var r,o=this,a=f.extend({},w.defaults,y),l={};switch(s(o)===i&&w.init(o),parseFloat(a.delay)&&a.queue!==!1&&f.queue(o,a.queue,function(e){w.velocityQueueEntryFlag=!0,s(o).delayTimer={setTimeout:setTimeout(e,parseFloat(a.delay)),next:e}}),a.duration.toString().toLowerCase()){case"fast":a.duration=200;break;case"normal":a.duration=m;break;case"slow":a.duration=600;break;default:a.duration=parseFloat(a.duration)||1}w.mock!==!1&&(w.mock===!0?a.duration=a.delay=1:(a.duration*=parseFloat(w.mock)||1,a.delay*=parseFloat(w.mock)||1)),a.easing=u(a.easing,a.duration),a.begin&&!g.isFunction(a.begin)&&(a.begin=null),a.progress&&!g.isFunction(a.progress)&&(a.progress=null),a.complete&&!g.isFunction(a.complete)&&(a.complete=null),a.display!==i&&null!==a.display&&(a.display=a.display.toString().toLowerCase(),"auto"===a.display&&(a.display=w.CSS.Values.getDisplayType(o))),a.visibility!==i&&null!==a.visibility&&(a.visibility=a.visibility.toString().toLowerCase()),a.mobileHA=a.mobileHA&&w.State.isMobile&&!w.State.isGingerbread,a.queue===!1?a.delay?setTimeout(e,a.delay):e():f.queue(o,a.queue,function(t,n){return n===!0?(R.promise&&R.resolver(p),!0):(w.velocityQueueEntryFlag=!0,void e(t))}),""!==a.queue&&"fx"!==a.queue||"inprogress"===f.queue(o)[0]||f.dequeue(o)}var a,l,d,p,v,y,x=arguments[0]&&(arguments[0].p||f.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties));if(g.isWrapped(this)?(a=!1,d=0,p=this,l=this):(a=!0,d=1,p=x?arguments[0].elements||arguments[0].e:arguments[0]),p=o(p)){x?(v=arguments[0].properties||arguments[0].p,y=arguments[0].options||arguments[0].o):(v=arguments[d],y=arguments[d+1]);var _=p.length,T=0;if(!/^(stop|finish|finishAll)$/i.test(v)&&!f.isPlainObject(y)){var E=d+1;y={};for(var P=E;P<arguments.length;P++)g.isArray(arguments[P])||!/^(fast|normal|slow)$/i.test(arguments[P])&&!/^\d/.test(arguments[P])?g.isString(arguments[P])||g.isArray(arguments[P])?y.easing=arguments[P]:g.isFunction(arguments[P])&&(y.complete=arguments[P]):y.duration=arguments[P]}var R={promise:null,resolver:null,rejecter:null};a&&w.Promise&&(R.promise=new w.Promise(function(e,t){R.resolver=e,R.rejecter=t}));var O;switch(v){case"scroll":O="scroll";break;case"reverse":O="reverse";break;case"finish":case"finishAll":case"stop":f.each(p,function(e,t){s(t)&&s(t).delayTimer&&(clearTimeout(s(t).delayTimer.setTimeout),s(t).delayTimer.next&&s(t).delayTimer.next(),delete s(t).delayTimer),"finishAll"!==v||y!==!0&&!g.isString(y)||(f.each(f.queue(t,g.isString(y)?y:""),function(e,t){g.isFunction(t)&&t()}),f.queue(t,g.isString(y)?y:"",[]))});var C=[];return f.each(w.State.calls,function(e,t){t&&f.each(t[1],function(n,r){var o=y===i?"":y;return o===!0||t[2].queue===o||y===i&&t[2].queue===!1?void f.each(p,function(n,i){i===r&&((y===!0||g.isString(y))&&(f.each(f.queue(i,g.isString(y)?y:""),function(e,t){g.isFunction(t)&&t(null,!0)}),f.queue(i,g.isString(y)?y:"",[])),"stop"===v?(s(i)&&s(i).tweensContainer&&o!==!1&&f.each(s(i).tweensContainer,function(e,t){t.endValue=t.currentValue}),C.push(e)):"finish"!==v&&"finishAll"!==v||(t[2].duration=1))}):!0})}),"stop"===v&&(f.each(C,function(e,t){h(t,!0)}),R.promise&&R.resolver(p)),e();default:if(!f.isPlainObject(v)||g.isEmptyObject(v)){if(g.isString(v)&&w.Redirects[v]){var k=f.extend({},y),I=k.duration,F=k.delay||0;return k.backwards===!0&&(p=f.extend(!0,[],p).reverse()),f.each(p,function(e,t){parseFloat(k.stagger)?k.delay=F+parseFloat(k.stagger)*e:g.isFunction(k.stagger)&&(k.delay=F+k.stagger.call(t,e,_)),k.drag&&(k.duration=parseFloat(I)||(/^(callout|transition)/.test(v)?1e3:m),k.duration=Math.max(k.duration*(k.backwards?1-e/_:(e+1)/_),.75*k.duration,200)),w.Redirects[v].call(t,t,k||{},e,_,p,R.promise?R:i)}),e()}var A="Velocity: First argument ("+v+") was not a property map, a known action, or a registered redirect. Aborting.";return R.promise?R.rejecter(new Error(A)):console.log(A),e()}O="start"}var M={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},D=[];f.each(p,function(e,t){g.isNode(t)&&r.call(t)});var B,k=f.extend({},w.defaults,y);if(k.loop=parseInt(k.loop),B=2*k.loop-1,k.loop)for(var L=0;B>L;L++){var z={delay:k.delay,progress:k.progress};L===B-1&&(z.display=k.display,z.visibility=k.visibility,z.complete=k.complete),b(p,"reverse",z)}return e()}};w=f.extend(b,w),w.animate=b;var _=t.requestAnimationFrame||p;return w.State.isMobile||n.hidden===i||n.addEventListener("visibilitychange",function(){n.hidden?(_=function(e){return setTimeout(function(){e(!0)},16)},c()):_=t.requestAnimationFrame||p}),e.Velocity=w,e!==t&&(e.fn.velocity=b,e.fn.velocity.defaults=w.defaults),f.each(["Down","Up"],function(e,t){w.Redirects["slide"+t]=function(e,n,r,o,s,a){var l=f.extend({},n),u=l.begin,c=l.complete,h={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};l.display===i&&(l.display="Down"===t?"inline"===w.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(s,s);for(var n in h){d[n]=e.style[n];var i=w.CSS.getPropertyValue(e,n);h[n]="Down"===t?[i,0]:[0,i]}d.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in d)e.style[t]=d[t];c&&c.call(s,s),a&&a.resolver(s)},w(e,h,l)}}),f.each(["In","Out"],function(e,t){w.Redirects["fade"+t]=function(e,n,r,o,s,a){var l=f.extend({},n),u={opacity:"In"===t?1:0},c=l.complete;r!==o-1?l.complete=l.begin=null:l.complete=function(){c&&c.call(s,s),a&&a.resolver(s)},l.display===i&&(l.display="In"===t?"auto":"none"),w(this,u,l)}}),w}(window.jQuery||window.Zepto||window,window,document)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return Promise.all(e.manifests.map(function(t,n){var i=s(t,1,!1);return i.length>0?(console.info("Called using new manifest method."),i[0]):(i=t.getImageSource(),(0,f.fetch)(i).then(function(r){return{type:"image",payload:{image:i,collection:e,key:n,related:t.getRelatedItem(),label:t.label,height:r.height,width:r.width,source:r}}}))}))}function o(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=e.getImageSource();return(0,f.fetch)(i).then(function(r){return{type:"image",payload:{image:i,collection:n,key:t,related:e.getRelatedItem(),label:e.label,height:r.height,width:r.width,source:r}}})}function s(e,t){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],i=[],r=!0,o=!1,s=void 0;try{for(var a,l=(0,f.take)(e.getAllImages(),t)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;u.related=e.getRelatedItem(),i.push({type:"image",payload:u})}}catch(c){o=!0,s=c}finally{try{!r&&l["return"]&&l["return"]()}finally{if(o)throw s}}return n?Promise.all(i):i}function a(e){var t=arguments.length<=1||void 0===arguments[1]?20:arguments[1];return(0,f.fetch)(e).then(function(e){return"sc:Manifest"===e["@type"]?s(new h["default"](e),t):r(new u["default"](e))})}Object.defineProperty(t,"__esModule",{value:!0}),t.payloadsFromCollection=r,t.singlePayloadFromManifest=o,t.payloadsFromManifest=s,t.IIIFCollectionResolver=a;var l=n(306),u=i(l),c=n(309),h=i(c),f=n(307)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(m){var n=s(e,{"@id":t});m.appendChild(s(e,n)),n.onclick()}else e.resetAllTiles(t)}function o(e){return function(){e.resetAllTiles(this.getAttribute("data-uri")),(0,p["default"])(m,{top:30,right:20,margin:0},{duration:300})}}function s(e,t){var n=document.createElement("li");return n.innerText=t.label||"Default collection",n.setAttribute("data-uri",t["@id"]),n.onclick=o(e),n}function a(e){var t=arguments.length<=1||void 0===arguments[1]?"./collections.json":arguments[1];if(!e instanceof f["default"])throw"You must pass an instance of the Gallery as the first option";return(0,g.fetch)(t).then(function(t){var n=t.members,i=!0,r=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;m.appendChild(s(e,u))}}catch(c){r=!0,o=c}finally{try{!i&&l["return"]&&l["return"]()}finally{if(r)throw o}}}),e}function l(e){var t=arguments.length<=1||void 0===arguments[1]?"collection":arguments[1];if(!e instanceof f["default"])throw"You must pass an instance of the Gallery as the first option";var n=(0,g.getQueryString)(t);return n&&r(e,n),e}function u(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(!e instanceof f["default"])throw"You must pass an instance of the Gallery as the first option";return document.addEventListener("paste",function(n){var i=n.isTrusted,o=n.type,s=n.clipboardData;if(i&&"paste"===o&&void 0!==s){n.preventDefault();var a=s.getData("Text").trim();(0,g.validateIIIFUri)(a)&&t&&r(e,a)}}),e}function c(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.onDragOver,i=void 0===n?v:n,o=t.onDragLeave,s=void 0===o?v:o,a=t.onDragEnd,l=void 0===a?v:a,u=document.getElementById(e.id);u.addEventListener("dragover",function(t){return i(t,e)&&t.preventDefault()}),u.addEventListener("dragend",function(t){return l(t,e)&&t.preventDefault()}),u.addEventListener("dragleave",function(t){return s(t,e)}),u.addEventListener("drop",function(t){t.preventDefault();var n=t.dataTransfer,i=(0,g.getUriFromDropTarget)(n);if(i){var o=(0,g.getQueryString)("manifest",i),s=((0,g.getQueryString)("image",i),(0,g.getQueryString)("canvas",i));o&&r(e,o,s)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.multipleChoiceBehaviour=a,t.queryStringBehaviour=l,t.clipBoardBehaviour=u,t.dragDropBehaviour=c;var h=n(305),f=i(h),d=n(316),p=i(d),g=n(307),v=function(){},m=document.getElementById("chooser")}]);
//# sourceMappingURL=bundle.js.map
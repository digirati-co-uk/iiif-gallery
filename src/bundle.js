!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){n(1),n(292),e.exports=n(292)},function(e,t,n){(function(e){"use strict";function t(e,t,n){e[t]||Object[i](e,t,{writable:!0,configurable:!0,value:n})}if(n(2),n(287),n(289),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var i="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,n){n(3),n(50),n(51),n(52),n(53),n(55),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(68),n(70),n(72),n(74),n(77),n(78),n(79),n(83),n(85),n(87),n(91),n(92),n(93),n(94),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(104),n(105),n(106),n(108),n(109),n(110),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(130),n(131),n(135),n(136),n(137),n(138),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(158),n(159),n(165),n(166),n(168),n(169),n(170),n(173),n(174),n(175),n(176),n(177),n(179),n(180),n(181),n(182),n(185),n(187),n(188),n(189),n(191),n(193),n(195),n(196),n(197),n(199),n(200),n(201),n(202),n(208),n(211),n(212),n(214),n(215),n(218),n(219),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(242),n(243),n(244),n(245),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(254),n(256),n(257),n(259),n(260),n(261),n(262),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(285),n(286),e.exports=n(5)},function(e,t,n){"use strict";var i=n(4),r=n(5),o=n(6),s=n(7),a=n(9),l=n(18),u=n(22).KEY,c=n(8),h=n(23),d=n(24),f=n(19),p=n(25),g=n(26),m=n(39),v=n(42),y=n(12),w=n(29),S=n(16),x=n(17),T=n(43),b=n(46),E=n(48),P=n(11),_=E.f,O=P.f,C=b.f,R=i.Symbol,k=i.JSON,I=k&&k.stringify,F=!1,M="prototype",D=p("_hidden"),A=p("toPrimitive"),L={}.propertyIsEnumerable,z=h("symbol-registry"),H=h("symbols"),N=Object[M],B="function"==typeof R,j=i.QObject,V=s&&c(function(){return 7!=T(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=_(N,t);i&&delete N[t],O(e,t,n),i&&e!==N&&O(N,t,i)}:O,W=function(e){var t=H[e]=T(R[M]);return t._k=e,s&&F&&V(N,e,{configurable:!0,set:function(t){o(this,D)&&o(this[D],e)&&(this[D][e]=!1),V(this,e,x(1,t))}}),t},U=B&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},$=function(e,t,n){return y(e),t=S(t,!0),y(n),o(H,t)?(n.enumerable?(o(e,D)&&e[D][t]&&(e[D][t]=!1),n=T(n,{enumerable:x(0,!1)})):(o(e,D)||O(e,D,x(1,{})),e[D][t]=!0),V(e,t,n)):O(e,t,n)},G=function(e,t){y(e);for(var n,i=m(t=w(t)),r=0,o=i.length;o>r;)$(e,n=i[r++],t[n]);return e},q=function(e,t){return void 0===t?T(e):G(T(e),t)},Z=function(e){var t=L.call(this,e=S(e,!0));return t||!o(this,e)||!o(H,e)||o(this,D)&&this[D][e]?t:!0},X=function(e,t){var n=_(e=w(e),t=S(t,!0));return!n||!o(H,t)||o(e,D)&&e[D][t]||(n.enumerable=!0),n},Y=function(e){for(var t,n=C(w(e)),i=[],r=0;n.length>r;)o(H,t=n[r++])||t==D||t==u||i.push(t);return i},Q=function(e){for(var t,n=C(w(e)),i=[],r=0;n.length>r;)o(H,t=n[r++])&&i.push(H[t]);return i},J=function(e){if(void 0!==e&&!U(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return t=i[1],"function"==typeof t&&(n=t),!n&&v(t)||(t=function(e,t){return n&&(t=n.call(this,e,t)),U(t)?void 0:t}),i[1]=t,I.apply(k,i)}},K=c(function(){var e=R();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))});B||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");return W(f(arguments.length>0?arguments[0]:void 0))},l(R[M],"toString",function(){return this._k}),E.f=X,P.f=$,n(47).f=b.f=Y,n(41).f=Z,n(40).f=Q,s&&!n(49)&&l(N,"propertyIsEnumerable",Z,!0)),a(a.G+a.W+a.F*!B,{Symbol:R});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;){var ne=ee[te++],ie=r.Symbol,re=p(ne);ne in ie||O(ie,ne,{value:B?re:W(re)})}j&&j[M]&&j[M].findChild||(F=!0),a(a.S+a.F*!B,"Symbol",{"for":function(e){return o(z,e+="")?z[e]:z[e]=R(e)},keyFor:function(e){if(U(e))return g(z,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){F=!0},useSimple:function(){F=!1}}),a(a.S+a.F*!B,"Object",{create:q,defineProperty:$,defineProperties:G,getOwnPropertyDescriptor:X,getOwnPropertyNames:Y,getOwnPropertySymbols:Q}),k&&a(a.S+a.F*(!B||K),"JSON",{stringify:J}),R[M][A]||n(10)(R[M],A,R[M].valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.2.2"};"number"==typeof __e&&(__e=n)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var i=n(4),r=n(5),o=n(10),s=n(18),a=n(20),l="prototype",u=function(e,t,n){var c,h,d,f,p=e&u.F,g=e&u.G,m=e&u.S,v=e&u.P,y=e&u.B,w=g?i:m?i[t]||(i[t]={}):(i[t]||{})[l],S=g?r:r[t]||(r[t]={}),x=S[l]||(S[l]={});g&&(n=t);for(c in n)h=!p&&w&&void 0!==w[c],d=(h?w:n)[c],f=y&&h?a(d,i):v&&"function"==typeof d?a(Function.call,d):d,w&&s(w,c,d,e&u.U),S[c]!=d&&o(S,c,f),v&&x[c]!=d&&(x[c]=d)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var i=n(11),r=n(17);e.exports=n(7)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(12),r=n(14),o=n(16),s=Object.defineProperty;t.f=n(7)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(13);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(7)&&!n(8)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(13),r=n(4).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(13);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(4),r=n(10),o=n(6),s=n(19)("src"),a="toString",l=Function[a],u=(""+l).split(a);n(5).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,a){var l="function"==typeof n;l&&(o(n,"name")||r(n,"name",t)),e[t]!==n&&(l&&(o(n,s)||r(n,s,e[t]?""+e[t]:u.join(String(t)))),e===i?e[t]=n:a?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||l.call(this)})},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(21);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(19)("meta"),r=n(13),o=n(6),s=n(11).f,a=0,l=Object.isExtensible||function(){return!0},u=!n(8)(function(){return l(Object.preventExtensions({}))}),c=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},h=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},d=function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},f=function(e){return u&&p.NEED&&l(e)&&!o(e,i)&&c(e),e},p=e.exports={KEY:i,NEED:!1,fastKey:h,getWeak:d,onFreeze:f}},function(e,t,n){var i=n(4),r="__core-js_shared__",o=i[r]||(i[r]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){var i=n(11).f,r=n(6),o=n(25)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){var i=n(23)("wks"),r=n(19),o=n(4).Symbol,s="function"==typeof o;e.exports=function(e){return i[e]||(i[e]=s&&o[e]||(s?o:r)("Symbol."+e))}},function(e,t,n){var i=n(27),r=n(29);e.exports=function(e,t){for(var n,o=r(e),s=i(o),a=s.length,l=0;a>l;)if(o[n=s[l++]]===t)return n}},function(e,t,n){var i=n(28),r=n(38);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(6),r=n(29),o=n(33)(!1),s=n(37)("IE_PROTO");e.exports=function(e,t){var n,a=r(e),l=0,u=[];for(n in a)n!=s&&i(a,n)&&u.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var i=n(30),r=n(32);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(29),r=n(34),o=n(36);e.exports=function(e){return function(t,n,s){var a,l=i(t),u=r(l.length),c=o(s,u);if(e&&n!=n){for(;u>c;)if(a=l[c++],a!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(35),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(35),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),0>e?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(23)("keys"),r=n(19);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(27),r=n(40),o=n(41);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var s,a=n(e),l=o.f,u=0;a.length>u;)l.call(e,s=a[u++])&&t.push(s);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(31);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(12),r=n(44),o=n(38),s=n(37)("IE_PROTO"),a=function(){},l="prototype",u=function(){var e,t=n(15)("iframe"),i=o.length,r=">";for(t.style.display="none",n(45).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script"+r),e.close(),u=e.F;i--;)delete u[l][o[i]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[l]=i(e),n=new a,a[l]=null,n[s]=e):n=u(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(11),r=n(12),o=n(27);e.exports=n(7)?Object.defineProperties:function(e,t){r(e);for(var n,s=o(t),a=s.length,l=0;a>l;)i.f(e,n=s[l++],t[n]);return e}},function(e,t,n){e.exports=n(4).document&&document.documentElement},function(e,t,n){var i=n(29),r=n(47).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return r(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):r(i(e))}},function(e,t,n){var i=n(28),r=n(38).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(41),r=n(17),o=n(29),s=n(16),a=n(6),l=n(14),u=Object.getOwnPropertyDescriptor;t.f=n(7)?u:function(e,t){if(e=o(e),t=s(t,!0),l)try{return u(e,t)}catch(n){}return a(e,t)?r(!i.f.call(e,t),e[t]):void 0}},function(e,t){e.exports=!1},function(e,t,n){var i=n(9);i(i.S,"Object",{create:n(43)})},function(e,t,n){var i=n(9);i(i.S+i.F*!n(7),"Object",{defineProperty:n(11).f})},function(e,t,n){var i=n(9);i(i.S+i.F*!n(7),"Object",{defineProperties:n(44)})},function(e,t,n){var i=n(29),r=n(48).f;n(54)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){var i=n(9),r=n(5),o=n(8);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(e,t,n){var i=n(56),r=n(57);n(54)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(32);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(6),r=n(56),o=n(37)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var i=n(56),r=n(27);n(54)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){n(54)("getOwnPropertyNames",function(){return n(46).f})},function(e,t,n){var i=n(13),r=n(22).onFreeze;n(54)("freeze",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(13),r=n(22).onFreeze;n(54)("seal",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(13),r=n(22).onFreeze;n(54)("preventExtensions",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(13);n(54)("isFrozen",function(e){return function(t){return i(t)?e?e(t):!1:!0}})},function(e,t,n){var i=n(13);n(54)("isSealed",function(e){return function(t){return i(t)?e?e(t):!1:!0}})},function(e,t,n){var i=n(13);n(54)("isExtensible",function(e){return function(t){return i(t)?e?e(t):!0:!1}})},function(e,t,n){var i=n(9);i(i.S+i.F,"Object",{assign:n(67)})},function(e,t,n){"use strict";var i=n(27),r=n(40),o=n(41),s=n(56),a=n(30),l=Object.assign;e.exports=!l||n(8)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=s(e),l=arguments.length,u=1,c=r.f,h=o.f;l>u;)for(var d,f=a(arguments[u++]),p=c?i(f).concat(c(f)):i(f),g=p.length,m=0;g>m;)h.call(f,d=p[m++])&&(n[d]=f[d]);return n}:l},function(e,t,n){var i=n(9);i(i.S,"Object",{is:n(69)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var i=n(9);i(i.S,"Object",{setPrototypeOf:n(71).set})},function(e,t,n){var i=n(13),r=n(12),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(20)(Function.call,n(48).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){"use strict";var i=n(73),r={};r[n(25)("toStringTag")]="z",r+""!="[object z]"&&n(18)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(e,t,n){var i=n(31),r=n(25)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),r))?n:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var i=n(9);i(i.P,"Function",{bind:n(75)})},function(e,t,n){"use strict";var i=n(21),r=n(13),o=n(76),s=[].slice,a={},l=function(e,t,n){if(!(t in a)){for(var i=[],r=0;t>r;r++)i[r]="a["+r+"]";a[t]=Function("F,a","return new F("+i.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=s.call(arguments,1),a=function(){var i=n.concat(s.call(arguments));return this instanceof a?l(t,i.length,i):o(t,i,e)};return r(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(11).f,r=n(17),o=n(6),s=Function.prototype,a=/^\s*function ([^ (]*)/,l="name";l in s||n(7)&&i(s,l,{configurable:!0,get:function(){var e=(""+this).match(a),t=e?e[1]:"";return o(this,l)||i(this,l,r(5,t)),t}})},function(e,t,n){"use strict";var i=n(13),r=n(57),o=n(25)("hasInstance"),s=Function.prototype;o in s||n(11).f(s,o,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var i=n(9),r=n(80);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(e,t,n){var i=n(4).parseInt,r=n(81).trim,o=n(82),s=/^[\-+]?0[xX]/;e.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(s.test(n)?16:10))}:i},function(e,t,n){var i=n(9),r=n(32),o=n(8),s=n(82),a="["+s+"]",l="​",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),h=function(e,t,n){var r={},a=o(function(){return!!s[e]()||l[e]()!=l}),u=r[e]=a?t(d):s[e];n&&(r[n]=u),i(i.P+i.F*a,"String",r)},d=h.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=h},function(e,t){e.exports="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var i=n(9),r=n(84);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(e,t,n){var i=n(4).parseFloat,r=n(81).trim;e.exports=1/i(n(82)+"-0")!==-(1/0)?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},function(e,t,n){"use strict";var i=n(4),r=n(6),o=n(31),s=n(86),a=n(16),l=n(8),u=n(47).f,c=n(48).f,h=n(11).f,d=n(81).trim,f="Number",p=i[f],g=p,m=p.prototype,v=o(n(43)(m))==f,y="trim"in String.prototype,w=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():d(t,3);var n,i,r,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var s,l=t.slice(2),u=0,c=l.length;c>u;u++)if(s=l.charCodeAt(u),48>s||s>r)return NaN;return parseInt(l,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(v?l(function(){m.valueOf.call(n)}):o(n)!=f)?s(new g(w(t)),n,p):w(t)};for(var S,x=n(7)?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;x.length>T;T++)r(g,S=x[T])&&!r(p,S)&&h(p,S,c(g,S));p.prototype=m,m.constructor=p,n(18)(i,f,p)}},function(e,t,n){var i=n(13),r=n(71).set;e.exports=function(e,t,n){var o,s=t.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&i(o)&&r&&r(e,o),e}},function(e,t,n){"use strict";var i=n(9),r=(n(88),n(35)),o=n(89),s=n(90),a=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h="0",d=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*u[n],u[n]=i%1e7,i=l(i/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=l(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+s.call(h,7-n.length)+n}return t},g=function(e,t,n){return 0===t?n:t%2===1?g(e,t-1,n*e):g(e*e,t/2,n)},m=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!n(8)(function(){a.call({})})),"Number",{toFixed:function(e){var t,n,i,a,l=o(this,c),u=r(e),v="",y=h;if(0>u||u>20)throw RangeError(c);if(l!=l)return"NaN";if(-1e21>=l||l>=1e21)return String(l);if(0>l&&(v="-",l=-l),l>1e-21)if(t=m(l*g(2,69,1))-69,n=0>t?l*g(2,-t,1):l/g(2,t,1),n*=4503599627370496,t=52-t,t>0){for(d(0,n),i=u;i>=7;)d(1e7,0),i-=7;for(d(g(10,i,1),0),i=t-1;i>=23;)f(1<<23),i-=23;f(1<<i),d(1,1),f(2),y=p()}else d(0,n),d(1<<-t,0),y=p()+s.call(h,u);return u>0?(a=y.length,y=v+(u>=a?"0."+s.call(h,u-a)+y:y.slice(0,a-u)+"."+y.slice(a-u))):y=v+y,y}})},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(31);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var i=n(35),r=n(32);e.exports=function(e){var t=String(r(this)),n="",o=i(e);if(0>o||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){"use strict";var i=n(9),r=n(8),o=n(89),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},function(e,t,n){var i=n(9);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var i=n(9),r=n(4).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},function(e,t,n){var i=n(9);i(i.S,"Number",{isInteger:n(95)})},function(e,t,n){var i=n(13),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},function(e,t,n){var i=n(9);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(9),r=n(95),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&o(e)<=9007199254740991}})},function(e,t,n){var i=n(9);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var i=n(9);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var i=n(9),r=n(84);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(e,t,n){var i=n(9),r=n(80);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(e,t,n){var i=n(9),r=n(103),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:r(e-1+o(e-1)*o(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&1e-8>e?e-e*e/2:Math.log(1+e)}},function(e,t,n){function i(e){return isFinite(e=+e)&&0!=e?0>e?-i(-e):Math.log(e+Math.sqrt(e*e+1)):e}var r=n(9),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:i})},function(e,t,n){var i=n(9),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var i=n(9),r=n(107);i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},function(e,t,n){var i=n(9);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var i=n(9),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var i=n(9),r=n(111);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&1e-6>e?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var i=n(9),r=n(107),o=Math.pow,s=o(2,-52),a=o(2,-23),l=o(2,127)*(2-a),u=o(2,-126),c=function(e){return e+1/s-1/s};i(i.S,"Math",{fround:function(e){var t,n,i=Math.abs(e),o=r(e);return u>i?o*c(i/u/a)*u*a:(t=(1+a/s)*i,n=t-(t-i),n>l||n!=n?o*(1/0):o*n)}})},function(e,t,n){var i=n(9),r=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,o=0,s=0,a=arguments.length,l=0;a>s;)n=r(arguments[s++]),n>l?(i=l/n,o=o*i*i+1,l=n):n>0?(i=n/l,o+=i*i):o+=n;return l===1/0?1/0:l*Math.sqrt(o)}})},function(e,t,n){var i=n(9),r=Math.imul;i(i.S+i.F*n(8)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(e,t){var n=65535,i=+e,r=+t,o=n&i,s=n&r;return 0|o*s+((n&i>>>16)*s+o*(n&r>>>16)<<16>>>0)}})},function(e,t,n){var i=n(9);i(i.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){var i=n(9);i(i.S,"Math",{log1p:n(103)})},function(e,t,n){var i=n(9);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var i=n(9);i(i.S,"Math",{sign:n(107)})},function(e,t,n){var i=n(9),r=n(111),o=Math.exp;i(i.S+i.F*n(8)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var i=n(9),r=n(111),o=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var i=n(9);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var i=n(9),r=n(36),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(65536>t?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){var i=n(9),r=n(29),o=n(34);i(i.S,"String",{raw:function(e){for(var t=r(e.raw),n=o(t.length),i=arguments.length,s=[],a=0;n>a;)s.push(String(t[a++])),i>a&&s.push(String(arguments[a]));return s.join("")}})},function(e,t,n){"use strict";n(81)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var i=n(126)(!0);n(127)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(35),r=n(32);e.exports=function(e){return function(t,n){var o,s,a=String(r(t)),l=i(n),u=a.length;return 0>l||l>=u?e?"":void 0:(o=a.charCodeAt(l),55296>o||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):(o-55296<<10)+(s-56320)+65536)}}},function(e,t,n){"use strict";var i=n(49),r=n(9),o=n(18),s=n(10),a=n(6),l=n(128),u=n(129),c=n(24),h=n(57),d=n(25)("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",g="keys",m="values",v=function(){return this};e.exports=function(e,t,n,y,w,S,x){u(n,t,y);var T,b,E,P=function(e){if(!f&&e in R)return R[e];switch(e){case g:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",O=w==m,C=!1,R=e.prototype,k=R[d]||R[p]||w&&R[w],I=k||P(w),F=w?O?P("entries"):I:void 0,M="Array"==t?R.entries||k:k;if(M&&(E=h(M.call(new e)),E!==Object.prototype&&(c(E,_,!0),i||a(E,d)||s(E,d,v))),O&&k&&k.name!==m&&(C=!0,I=function(){return k.call(this)}),i&&!x||!f&&!C&&R[d]||s(R,d,I),l[t]=I,l[_]=v,w)if(T={values:O?I:P(m),keys:S?I:P(g),entries:F},x)for(b in T)b in R||o(R,b,T[b]);else r(r.P+r.F*(f||C),t,T);return T}},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(43),r=n(17),o=n(24),s={};n(10)(s,n(25)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(s,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){"use strict";var i=n(9),r=n(126)(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(9),r=n(34),o=n(132),s="endsWith",a=""[s];i(i.P+i.F*n(134)(s),"String",{endsWith:function(e){var t=o(this,e,s),n=arguments.length>1?arguments[1]:void 0,i=r(t.length),l=void 0===n?i:Math.min(r(n),i),u=String(e);return a?a.call(t,u,l):t.slice(l-u.length,l)===u}})},function(e,t,n){var i=n(133),r=n(32);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){var i=n(13),r=n(31),o=n(25)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(25)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(r){}}return!0}},function(e,t,n){"use strict";var i=n(9),r=n(132),o="includes";i(i.P+i.F*n(134)(o),"String",{includes:function(e){return!!~r(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(9);i(i.P,"String",{repeat:n(90)})},function(e,t,n){"use strict";var i=n(9),r=n(34),o=n(132),s="startsWith",a=""[s];i(i.P+i.F*n(134)(s),"String",{startsWith:function(e){var t=o(this,e,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return a?a.call(t,i,n):t.slice(n,n+i.length)===i}})},function(e,t,n){"use strict";n(139)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){var i=n(9),r=n(8),o=n(32),s=/"/g,a=function(e,t,n,i){var r=String(o(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(a),i(i.P+i.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";n(139)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(139)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(139)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(139)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(139)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(139)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(139)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(139)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(139)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(139)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(139)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(139)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var i=n(9);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var i=n(9),r=n(56),o=n(16);i(i.P+i.F*n(8)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=r(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){"use strict";var i=n(9),r=n(8),o=Date.prototype.getTime,s=function(e){return e>9?e:"0"+e};i(i.P+i.F*(r(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=0>t?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}})},function(e,t,n){var i=Date.prototype,r="Invalid Date",o="toString",s=i[o],a=i.getTime;new Date(NaN)+""!=r&&n(18)(i,o,function(){var e=a.call(this);return e===e?s.call(this):r;
})},function(e,t,n){var i=n(25)("toPrimitive"),r=Date.prototype;i in r||n(10)(r,i,n(157))},function(e,t,n){"use strict";var i=n(12),r=n(16),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),e!=o)}},function(e,t,n){var i=n(9);i(i.S,"Array",{isArray:n(42)})},function(e,t,n){"use strict";var i=n(20),r=n(9),o=n(56),s=n(160),a=n(161),l=n(34),u=n(162),c=n(163);r(r.S+r.F*!n(164)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,h,d=o(e),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(d);if(m&&(g=i(g,p>2?arguments[2]:void 0,2)),void 0==y||f==Array&&a(y))for(t=l(d.length),n=new f(t);t>v;v++)u(n,v,m?g(d[v],v):d[v]);else for(h=y.call(d),n=new f;!(r=h.next()).done;v++)u(n,v,m?s(h,g,[r.value,v],!0):r.value);return n.length=v,n}})},function(e,t,n){var i=n(12);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(o){var s=e["return"];throw void 0!==s&&i(s.call(e)),o}}},function(e,t,n){var i=n(128),r=n(25)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){"use strict";var i=n(11),r=n(17);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(73),r=n(25)("iterator"),o=n(128);e.exports=n(5).getIteratorMethod=function(e){return void 0!=e?e[r]||e["@@iterator"]||o[i(e)]:void 0}},function(e,t,n){var i=n(25)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(s){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},e(o)}catch(a){}return n}},function(e,t,n){"use strict";var i=n(9),r=n(162);i(i.S+i.F*n(8)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var i=n(9),r=n(29),o=[].join;i(i.P+i.F*(n(30)!=Object||!n(167)(o)),"Array",{join:function(e){return o.call(r(this),void 0===e?",":e)}})},function(e,t,n){var i=n(8);e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";var i=n(9),r=n(45),o=n(31),s=n(36),a=n(34),l=[].slice;i(i.P+i.F*n(8)(function(){r&&l.call(r)}),"Array",{slice:function(e,t){var n=a(this.length),i=o(this);if(t=void 0===t?n:t,"Array"==i)return l.call(this,e,t);for(var r=s(e,n),u=s(t,n),c=a(u-r),h=Array(c),d=0;c>d;d++)h[d]="String"==i?this.charAt(r+d):this[r+d];return h}})},function(e,t,n){"use strict";var i=n(9),r=n(21),o=n(56),s=n(8),a=[].sort,l=[1,2,3];i(i.P+i.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!n(167)(a)),"Array",{sort:function(e){return void 0===e?a.call(o(this)):a.call(o(this),r(e))}})},function(e,t,n){"use strict";var i=n(9),r=n(171)(0),o=n(167)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(20),r=n(30),o=n(56),s=n(34),a=n(172);e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,h=6==e,d=5==e||h,f=t||a;return function(t,a,p){for(var g,m,v=o(t),y=r(v),w=i(a,p,3),S=s(y.length),x=0,T=n?f(t,S):l?f(t,0):void 0;S>x;x++)if((d||x in y)&&(g=y[x],m=w(g,x,v),e))if(n)T[x]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return x;case 2:T.push(g)}else if(c)return!1;return h?-1:u||c?c:T}}},function(e,t,n){var i=n(13),r=n(42),o=n(25)("species");e.exports=function(e,t){var n;return r(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)||(n=void 0),i(n)&&(n=n[o],null===n&&(n=void 0))),new(void 0===n?Array:n)(t)}},function(e,t,n){"use strict";var i=n(9),r=n(171)(1);i(i.P+i.F*!n(167)([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(171)(2);i(i.P+i.F*!n(167)([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(171)(3);i(i.P+i.F*!n(167)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(171)(4);i(i.P+i.F*!n(167)([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(178);i(i.P+i.F*!n(167)([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){var i=n(21),r=n(56),o=n(30),s=n(34);e.exports=function(e,t,n,a,l){i(t);var u=r(e),c=o(u),h=s(u.length),d=l?h-1:0,f=l?-1:1;if(2>n)for(;;){if(d in c){a=c[d],d+=f;break}if(d+=f,l?0>d:d>=h)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:h>d;d+=f)d in c&&(a=t(a,c[d],d,u));return a}},function(e,t,n){"use strict";var i=n(9),r=n(178);i(i.P+i.F*!n(167)([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var i=n(9),r=n(33)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n(167)(o)),"Array",{indexOf:function(e){return s?o.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(29),o=n(35),s=n(34),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(167)(a)),"Array",{lastIndexOf:function(e){if(l)return a.apply(this,arguments)||0;var t=r(this),n=s(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),0>i&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},function(e,t,n){var i=n(9);i(i.P,"Array",{copyWithin:n(183)}),n(184)("copyWithin")},function(e,t,n){"use strict";var i=n(56),r=n(36),o=n(34);e.exports=[].copyWithin||function(e,t){var n=i(this),s=o(n.length),a=r(e,s),l=r(t,s),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?s:r(u,s))-l,s-a),h=1;for(a>l&&l+c>a&&(h=-1,l+=c-1,a+=c-1);c-- >0;)l in n?n[a]=n[l]:delete n[a],a+=h,l+=h;return n}},function(e,t,n){var i=n(25)("unscopables"),r=Array.prototype;void 0==r[i]&&n(10)(r,i,{}),e.exports=function(e){r[i][e]=!0}},function(e,t,n){var i=n(9);i(i.P,"Array",{fill:n(186)}),n(184)("fill")},function(e,t,n){"use strict";var i=n(56),r=n(36),o=n(34);e.exports=function(e){for(var t=i(this),n=o(t.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,u=void 0===l?n:r(l,n);u>a;)t[a++]=e;return t}},function(e,t,n){"use strict";var i=n(9),r=n(171)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(184)(o)},function(e,t,n){"use strict";var i=n(9),r=n(171)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(184)(o)},function(e,t,n){n(190)("Array")},function(e,t,n){"use strict";var i=n(4),r=n(11),o=n(7),s=n(25)("species");e.exports=function(e){var t=i[e];o&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var i=n(184),r=n(192),o=n(128),s=n(29);e.exports=n(127)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(4),r=n(86),o=n(11).f,s=n(47).f,a=n(133),l=n(194),u=i.RegExp,c=u,h=u.prototype,d=/a/g,f=/a/g,p=new u(d)!==d;if(n(7)&&(!p||n(8)(function(){return f[n(25)("match")]=!1,u(d)!=d||u(f)==f||"/a/i"!=u(d,"i")}))){u=function(e,t){var n=this instanceof u,i=a(e),o=void 0===t;return!n&&i&&e.constructor===u&&o?e:r(p?new c(i&&!o?e.source:e,t):c((i=e instanceof u)?e.source:e,i&&o?l.call(e):t),n?this:h,u)};for(var g=(function(e){e in u||o(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})}),m=s(c),v=0;m.length>v;)g(m[v++]);h.constructor=u,u.prototype=h,n(18)(i,"RegExp",u)}n(190)("RegExp")},function(e,t,n){"use strict";var i=n(12);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";n(196);var i=n(12),r=n(194),o=n(7),s="toString",a=/./[s],l=function(e){n(18)(RegExp.prototype,s,e,!0)};n(8)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?l(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?r.call(e):void 0)}):a.name!=s&&l(function(){return a.call(this)})},function(e,t,n){n(7)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(194)})},function(e,t,n){n(198)("match",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},function(e,t,n){"use strict";var i=n(10),r=n(18),o=n(8),s=n(32),a=n(25);e.exports=function(e,t,n){var l=a(e),u=n(s,l,""[e]),c=u[0],h=u[1];o(function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})&&(r(String.prototype,e,c),i(RegExp.prototype,l,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},function(e,t,n){n(198)("replace",2,function(e,t,n){return[function(i,r){"use strict";var o=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},function(e,t,n){n(198)("search",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},function(e,t,n){n(198)("split",2,function(e,t,i){"use strict";var r=n(133),o=i,s=[].push,a="split",l="length",u="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[l]||2!="ab"[a](/(?:ab)*/)[l]||4!="."[a](/(.?)(.?)/)[l]||"."[a](/()()/)[l]>1||""[a](/.?/)[l]){var c=void 0===/()??/.exec("")[1];i=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return o.call(n,e,t);var i,a,h,d,f,p=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,g+"g");for(c||(i=new RegExp("^"+y.source+"$(?!\\s)",g));(a=y.exec(n))&&(h=a.index+a[0][l],!(h>m&&(p.push(n.slice(m,a.index)),!c&&a[l]>1&&a[0].replace(i,function(){for(f=1;f<arguments[l]-2;f++)void 0===arguments[f]&&(a[f]=void 0)}),a[l]>1&&a.index<n[l]&&s.apply(p,a.slice(1)),d=a[0][l],m=h,p[l]>=v)));)y[u]===a.index&&y[u]++;return m===n[l]?!d&&y.test("")||p.push(""):p.push(n.slice(m)),p[l]>v?p.slice(0,v):p}}else"0"[a](void 0,0)[l]&&(i=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(n,r){var o=e(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},i]})},function(e,t,n){"use strict";var i,r,o,s=n(49),a=n(4),l=n(20),u=n(73),c=n(9),h=n(13),d=(n(12),n(21)),f=n(88),p=n(203),g=(n(71).set,n(204)),m=n(205).set,v=n(206),y="Promise",w=a.TypeError,S=a.process,x=a[y],S=a.process,T="process"==u(S),b=function(){},E=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[n(25)("species")]=function(e){e(b,b)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(b)instanceof t}catch(i){}}(),P=function(e,t){return e===t||e===x&&t===o},_=function(e){var t;return h(e)&&"function"==typeof(t=e.then)?t:!1},O=function(e){return P(x,e)?new C(e):new r(e)},C=r=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw w("Bad Promise constructor");t=e,n=i}),this.resolve=d(t),this.reject=d(n)},R=function(e){try{e()}catch(t){return{error:t}}},k=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var i=e._v,r=1==e._s,o=0,s=function(t){var n,o,s=r?t.ok:t.fail,a=t.resolve,l=t.reject,u=t.domain;try{s?(r||(2==e._h&&M(e),e._h=1),s===!0?n=i:(u&&u.enter(),n=s(i),u&&u.exit()),n===t.promise?l(w("Promise-chain cycle")):(o=_(n))?o.call(n,a,l):a(n)):l(i)}catch(c){l(c)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){m.call(a,function(){var t,n,i,r=e._v;if(F(e)&&(t=R(function(){T?S.emit("unhandledRejection",r,e):(n=a.onunhandledrejection)?n({promise:e,reason:r}):(i=a.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=T||F(e)?2:1),e._a=void 0,t)throw t.error})},F=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;)if(t=n[i++],t.fail||!F(t.promise))return!1;return!0},M=function(e){m.call(a,function(){var t;T?S.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),k(t,!0))},A=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=_(e))?v(function(){var i={_w:n,_d:!1};try{t.call(e,l(A,i,1),l(D,i,1))}catch(r){D.call(i,r)}}):(n._v=e,n._s=1,k(n,!1))}catch(i){D.call({_w:n,_d:!1},i)}}};E||(x=function(e){f(this,x,y,"_h"),d(e),i.call(this);try{e(l(A,this,1),l(D,this,1))}catch(t){D.call(this,t)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(207)(x.prototype,{then:function(e,t){var n=O(g(this,x));return n.ok="function"==typeof e?e:!0,n.fail="function"==typeof t&&t,n.domain=T?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),C=function(){var e=new i;this.promise=e,this.resolve=l(A,e,1),this.reject=l(D,e,1)}),c(c.G+c.W+c.F*!E,{Promise:x}),n(24)(x,y),n(190)(y),o=n(5)[y],c(c.S+c.F*!E,y,{reject:function(e){var t=O(this),n=t.reject;return n(e),t.promise}}),c(c.S+c.F*(s||!E),y,{resolve:function(e){if(e instanceof x&&P(e.constructor,this))return e;var t=O(this),n=t.resolve;return n(e),t.promise}}),c(c.S+c.F*!(E&&n(164)(function(e){x.all(e)["catch"](b)})),y,{all:function(e){var t=this,n=O(t),i=n.resolve,r=n.reject,o=R(function(){var n=[],o=0,s=1;p(e,!1,function(e){var a=o++,l=!1;n.push(void 0),s++,t.resolve(e).then(function(e){l||(l=!0,n[a]=e,--s||i(n))},r)}),--s||i(n)});return o&&r(o.error),n.promise},race:function(e){var t=this,n=O(t),i=n.reject,r=R(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(e,t,n){var i=n(20),r=n(160),o=n(161),s=n(12),a=n(34),l=n(163);e.exports=function(e,t,n,u,c){var h,d,f,p=c?function(){return e}:l(e),g=i(n,u,t?2:1),m=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(o(p))for(h=a(e.length);h>m;m++)t?g(s(d=e[m])[0],d[1]):g(e[m]);else for(f=p.call(e);!(d=f.next()).done;)r(f,g,d.value,t)}},function(e,t,n){var i=n(12),r=n(21),o=n(25)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||void 0==(n=i(s)[o])?t:r(n)}},function(e,t,n){var i,r,o,s=n(20),a=n(76),l=n(45),u=n(15),c=n(4),h=c.process,d=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,g=0,m={},v="onreadystatechange",y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},w=function(e){y.call(e.data)};d&&f||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){a("function"==typeof e?e:Function(e),t)},i(g),g},f=function(e){delete m[e]},"process"==n(31)(h)?i=function(e){h.nextTick(s(y,e,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=w,i=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",w,!1)):i=v in u("script")?function(e){l.appendChild(u("script"))[v]=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(s(y,e,1),0)}),e.exports={set:d,clear:f}},function(e,t,n){var i,r,o,s=n(4),a=n(205).set,l=s.MutationObserver||s.WebKitMutationObserver,u=s.process,c=s.Promise,h="process"==n(31)(u),d=function(){var e,t;for(h&&(e=u.domain)&&e.exit();i;)t=i.fn,t(),i=i.next;r=void 0,e&&e.enter()};if(h)o=function(){u.nextTick(d)};else if(l){var f=!0,p=document.createTextNode("");new l(d).observe(p,{characterData:!0}),o=function(){p.data=f=!f}}else o=c&&c.resolve?function(){c.resolve().then(d)}:function(){a.call(s,d)};e.exports=function(e){var t={fn:e,next:void 0};r&&(r.next=t),i||(i=t,o()),r=t}},function(e,t,n){var i=n(18);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){"use strict";var i=n(209);e.exports=n(210)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var i=n(11).f,r=n(43),o=(n(10),n(207)),s=n(20),a=n(88),l=n(32),u=n(203),c=n(127),h=n(192),d=n(190),f=n(7),p=n(22).fastKey,g=f?"_s":"size",m=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var h=e(function(e,i){a(e,h,t,"_i"),e._i=r(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=i&&u(i,n,e[c],e)});return o(h.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[g]=0},"delete":function(e){var t=this,n=m(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t._f==n&&(t._f=i),t._l==n&&(t._l=r),t[g]--}return!!n},forEach:function(e){a(this,h,"forEach");for(var t,n=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!m(this,e)}}),f&&i(h.prototype,"size",{get:function(){return l(this[g])}}),h},def:function(e,t,n){var i,r,o=m(e,t);return o?o.v=n:(e._l=o={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[g]++,"F"!==r&&(e._i[r]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?h(0,n.k):"values"==t?h(0,n.v):h(0,[n.k,n.v]):(e._t=void 0,h(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var i=n(4),r=n(9),o=n(18),s=n(207),a=n(22),l=n(203),u=n(88),c=n(13),h=n(8),d=n(164),f=n(24),p=n(86);e.exports=function(e,t,n,g,m,v){var y=i[e],w=y,S=m?"set":"add",x=w&&w.prototype,T={},b=function(e){var t=x[e];o(x,e,"delete"==e?function(e){return v&&!c(e)?!1:t.call(this,0===e?0:e)}:"has"==e?function(e){return v&&!c(e)?!1:t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof w&&(v||x.forEach&&!h(function(){(new w).entries().next()}))){var E=new w,P=E[S](v?{}:-0,1)!=E,_=h(function(){E.has(1)}),O=d(function(e){new w(e)}),C=!v&&h(function(){for(var e=new w,t=5;t--;)e[S](t,t);return!e.has(-0)});O||(w=t(function(t,n){u(t,w,e);var i=p(new y,t,w);return void 0!=n&&l(n,m,i[S],i),i}),w.prototype=x,x.constructor=w),(_||C)&&(b("delete"),b("has"),m&&b("get")),(C||P)&&b(S),v&&x.clear&&delete x.clear}else w=g.getConstructor(t,e,m,S),s(w.prototype,n),a.NEED=!0;return f(w,e),T[e]=w,r(r.G+r.W+r.F*(w!=y),T),v||g.setStrong(w,e,m),w}},function(e,t,n){"use strict";var i=n(209);e.exports=n(210)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(this,e=0===e?0:e,e)}},i)},function(e,t,n){"use strict";var i,r=n(171)(0),o=n(18),s=n(22),a=n(67),l=n(213),u=n(13),c=(n(6),s.getWeak),h=Object.isExtensible,d=l.ufstore,f={},p=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(u(e)){var t=c(e);return t===!0?d(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(this,e,t)}},m=e.exports=n(210)("WeakMap",p,g,l,!0,!0);7!=(new m).set((Object.freeze||Object)(f),7).get(f)&&(i=l.getConstructor(p),a(i.prototype,g),s.NEED=!0,r(["delete","has","get","set"],function(e){var t=m.prototype,n=t[e];o(t,e,function(t,r){if(u(t)&&!h(t)){this._f||(this._f=new i);var o=this._f[e](t,r);return"set"==e?this:o}return n.call(this,t,r)})}))},function(e,t,n){"use strict";var i=n(207),r=n(22).getWeak,o=n(12),s=n(13),a=n(88),l=n(203),u=n(171),c=n(6),h=u(5),d=u(6),f=0,p=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},m=function(e,t){return h(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=m(this,e);return t?t[1]:void 0},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},"delete":function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e(function(e,i){a(e,u,t,"_i"),e._i=f++,e._l=void 0,void 0!=i&&l(i,n,e[o],e)});return i(u.prototype,{"delete":function(e){if(!s(e))return!1;var t=r(e);return t===!0?p(this)["delete"](e):t&&c(t,this._i)&&delete t[this._i]},has:function(e){if(!s(e))return!1;var t=r(e);return t===!0?p(this).has(e):t&&c(t,this._i)}}),u},def:function(e,t,n){var i=r(o(t),!0);return i===!0?p(e).set(t,n):i[e._i]=n,e},ufstore:p}},function(e,t,n){"use strict";var i=n(213);n(210)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(this,e,!0)}},i,!1,!0)},function(e,t,n){"use strict";var i=n(9),r=n(216),o=n(217),s=n(12),a=n(36),l=n(34),u=n(13),c=(n(25)("typed_array"),n(4).ArrayBuffer),h=n(204),d=o.ArrayBuffer,f=o.DataView,p=r.ABV&&c.isView,g=d.prototype.slice,m=r.VIEW,v="ArrayBuffer";i(i.G+i.W+i.F*(c!==d),{ArrayBuffer:d}),i(i.S+i.F*!r.CONSTR,v,{isView:function(e){return p&&p(e)||u(e)&&m in e}}),i(i.P+i.U+i.F*n(8)(function(){return!new d(2).slice(1,void 0).byteLength}),v,{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(s(this),e);for(var n=s(this).byteLength,i=a(e,n),r=a(void 0===t?n:t,n),o=new(h(this,d))(l(r-i)),u=new f(this),c=new f(o),p=0;r>i;)c.setUint8(p++,u.getUint8(i++));return o}}),n(190)(v)},function(e,t,n){for(var i,r=n(4),o=n(10),s=n(19),a=s("typed_array"),l=s("view"),u=!(!r.ArrayBuffer||!r.DataView),c=u,h=0,d=9,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d>h;)(i=r[f[h++]])?(o(i.prototype,a,!0),o(i.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:a,VIEW:l}},function(e,t,n){"use strict";var i=n(4),r=n(7),o=n(49),s=n(216),a=n(10),l=n(207),u=n(8),c=n(88),h=n(35),d=n(34),f=n(47).f,p=n(11).f,g=n(186),m=n(24),v="ArrayBuffer",y="DataView",w="prototype",S="Wrong length!",x="Wrong index!",T=i[v],b=i[y],E=i.Math,P=(i.parseInt,i.RangeError),_=i.Infinity,O=T,C=E.abs,R=E.pow,k=(E.min,E.floor),I=E.log,F=E.LN2,M="buffer",D="byteLength",A="byteOffset",L=r?"_b":M,z=r?"_l":D,H=r?"_o":A,N=function(e,t,n){var i,r,o,s=Array(n),a=8*n-t-1,l=(1<<a)-1,u=l>>1,c=23===t?R(2,-24)-R(2,-77):0,h=0,d=0>e||0===e&&0>1/e?1:0;for(e=C(e),e!=e||e===_?(r=e!=e?1:0,i=l):(i=k(I(e)/F),e*(o=R(2,-i))<1&&(i--,o*=2),e+=i+u>=1?c/o:c*R(2,1-u),e*o>=2&&(i++,o/=2),i+u>=l?(r=0,i=l):i+u>=1?(r=(e*o-1)*R(2,t),i+=u):(r=e*R(2,u-1)*R(2,t),i=0));t>=8;s[h++]=255&r,r/=256,t-=8);for(i=i<<t|r,a+=t;a>0;s[h++]=255&i,i/=256,a-=8);return s[--h]|=128*d,s},B=function(e,t,n){var i,r=8*n-t-1,o=(1<<r)-1,s=o>>1,a=r-7,l=n-1,u=e[l--],c=127&u;for(u>>=7;a>0;c=256*c+e[l],l--,a-=8);for(i=c&(1<<-a)-1,c>>=-a,a+=t;a>0;i=256*i+e[l],l--,a-=8);if(0===c)c=1-s;else{if(c===o)return i?NaN:u?-_:_;i+=R(2,t),c-=s}return(u?-1:1)*i*R(2,c-t)},j=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},V=function(e){return[255&e]},W=function(e){return[255&e,e>>8&255]},U=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},$=function(e){return N(e,52,8)},G=function(e){return N(e,23,4)},q=function(e,t,n){p(e[w],t,{get:function(){return this[n]}})},Z=function(e,t,n,i){var r=+n,o=h(r);if(r!=o||0>o||o+t>e[z])throw P(x);var s=e[L]._b,a=o+e[H],l=s.slice(a,a+t);return i?l:l.reverse()},X=function(e,t,n,i,r,o){var s=+n,a=h(s);if(s!=a||0>a||a+t>e[z])throw P(x);for(var l=e[L]._b,u=a+e[H],c=i(+r),d=0;t>d;d++)l[u+d]=c[o?d:t-d-1]},Y=function(e,t){c(e,T,v);var n=+t,i=d(n);if(n!=i)throw P(S);return i};if(s.ABV){if(!u(function(){new T})||!u(function(){new T(.5)})){T=function(e){return new O(Y(this,e))};for(var Q,J=T[w]=O[w],K=f(O),ee=0;K.length>ee;)(Q=K[ee++])in T||a(T,Q,O[Q]);o||(J.constructor=T)}var te=new b(new T(2)),ne=b[w].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||l(b[w],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else T=function(e){var t=Y(this,e);this._b=g.call(Array(t),0),this[z]=t},b=function(e,t,n){c(this,b,y),c(e,T,y);var i=e[z],r=h(t);if(0>r||r>i)throw P("Wrong offset!");if(n=void 0===n?i-r:d(n),r+n>i)throw P(S);this[L]=e,this[H]=r,this[z]=n},r&&(q(T,D,"_l"),q(b,M,"_b"),q(b,D,"_l"),q(b,A,"_o")),l(b[w],{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return j(Z(this,4,e,arguments[1]))},getUint32:function(e){return j(Z(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return B(Z(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return B(Z(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){X(this,1,e,V,t)},setUint8:function(e,t){X(this,1,e,V,t)},setInt16:function(e,t){X(this,2,e,W,t,arguments[2])},setUint16:function(e,t){X(this,2,e,W,t,arguments[2])},setInt32:function(e,t){X(this,4,e,U,t,arguments[2])},setUint32:function(e,t){X(this,4,e,U,t,arguments[2])},setFloat32:function(e,t){X(this,4,e,G,t,arguments[2])},setFloat64:function(e,t){X(this,8,e,$,t,arguments[2])}});m(T,v),m(b,y),a(b[w],s.VIEW,!0),t[v]=T,t[y]=b},function(e,t,n){var i=n(9);i(i.G+i.W+i.F*!n(216).ABV,{DataView:n(217).DataView})},function(e,t,n){n(220)("Int8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){"use strict";if(n(7)){var i=n(49),r=n(4),o=n(8),s=n(9),a=n(216),l=n(217),u=n(20),c=n(88),h=n(17),d=n(10),f=n(207),p=(n(95),n(35)),g=n(34),m=n(36),v=n(16),y=n(6),w=n(69),S=n(73),x=n(13),T=n(56),b=n(161),E=n(43),P=n(57),_=n(47).f,O=(n(221),n(163)),C=n(19),R=n(25),k=n(171),I=n(33),F=n(204),M=n(191),D=n(128),A=n(164),L=n(190),z=n(186),H=n(183),N=n(11),B=n(48),j=N.f,V=B.f,W=r.RangeError,U=r.TypeError,$=r.Uint8Array,G="ArrayBuffer",q="Shared"+G,Z="BYTES_PER_ELEMENT",X="prototype",Y=Array[X],Q=l.ArrayBuffer,J=l.DataView,K=k(0),ee=k(2),te=k(3),ne=k(4),ie=k(5),re=k(6),oe=I(!0),se=I(!1),ae=M.values,le=M.keys,ue=M.entries,ce=Y.lastIndexOf,he=Y.reduce,de=Y.reduceRight,fe=Y.join,pe=Y.sort,ge=Y.slice,me=Y.toString,ve=Y.toLocaleString,ye=R("iterator"),we=R("toStringTag"),Se=C("typed_constructor"),xe=C("def_constructor"),Te=a.CONSTR,be=a.TYPED,Ee=a.VIEW,Pe="Wrong length!",_e=k(1,function(e,t){return Fe(F(e,e[xe]),t)}),Oe=o(function(){return 1===new $(new Uint16Array([1]).buffer)[0]}),Ce=!!$&&!!$[X].set&&o(function(){new $(1).set({})}),Re=function(e,t){if(void 0===e)throw U(Pe);var n=+e,i=g(e);if(t&&!w(n,i))throw W(Pe);return i},ke=function(e,t){var n=p(e);if(0>n||n%t)throw W("Wrong offset!");return n},Ie=function(e){if(x(e)&&be in e)return e;throw U(e+" is not a typed array!")},Fe=function(e,t){if(!(x(e)&&Se in e))throw U("It is not a typed array constructor!");return new e(t)},Me=function(e,t){return De(F(e,e[xe]),t)},De=function(e,t){for(var n=0,i=t.length,r=Fe(e,i);i>n;)r[n]=t[n++];return r},Ae=function(e,t,n){j(e,t,{get:function(){return this._d[n]}})},Le=function(e){var t,n,i,r,o,s,a=T(e),l=arguments.length,c=l>1?arguments[1]:void 0,h=void 0!==c,d=O(a);if(void 0!=d&&!b(d)){for(s=d.call(a),i=[],t=0;!(o=s.next()).done;t++)i.push(o.value);a=i}for(h&&l>2&&(c=u(c,arguments[2],2)),t=0,n=g(a.length),r=Fe(this,n);n>t;t++)r[t]=h?c(a[t],t):a[t];return r},ze=function(){for(var e=0,t=arguments.length,n=Fe(this,t);t>e;)n[e]=arguments[e++];return n},He=!!$&&o(function(){ve.call(new $(1))}),Ne=function(){return ve.apply(He?ge.call(Ie(this)):Ie(this),arguments)},Be={copyWithin:function(e,t){return H.call(Ie(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return ne(Ie(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return z.apply(Ie(this),arguments)},filter:function(e){return Me(this,ee(Ie(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ie(Ie(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return re(Ie(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){K(Ie(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return se(Ie(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return oe(Ie(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return fe.apply(Ie(this),arguments)},lastIndexOf:function(e){return ce.apply(Ie(this),arguments)},map:function(e){return _e(Ie(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return he.apply(Ie(this),arguments)},reduceRight:function(e){return de.apply(Ie(this),arguments)},reverse:function(){for(var e,t=this,n=Ie(t).length,i=Math.floor(n/2),r=0;i>r;)e=t[r],t[r++]=t[--n],t[n]=e;return t},some:function(e){return te(Ie(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return pe.call(Ie(this),e)},subarray:function(e,t){var n=Ie(this),i=n.length,r=m(e,i);return new(F(n,n[xe]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,g((void 0===t?i:m(t,i))-r))}},je=function(e,t){return Me(this,ge.call(Ie(this),e,t))},Ve=function(e){Ie(this);var t=ke(arguments[1],1),n=this.length,i=T(e),r=g(i.length),o=0;if(r+t>n)throw W(Pe);for(;r>o;)this[t+o]=i[o++]},We={entries:function(){return ue.call(Ie(this))},keys:function(){return le.call(Ie(this))},values:function(){return ae.call(Ie(this))}},Ue=function(e,t){return x(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},$e=function(e,t){return Ue(e,t=v(t,!0))?h(2,e[t]):V(e,t)},Ge=function(e,t,n){return!(Ue(e,t=v(t,!0))&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};Te||(B.f=$e,N.f=Ge),s(s.S+s.F*!Te,"Object",{getOwnPropertyDescriptor:$e,defineProperty:Ge}),o(function(){me.call({})})&&(me=ve=function(){return fe.call(this)});var qe=f({},Be);f(qe,We),d(qe,ye,We.values),f(qe,{slice:je,set:Ve,constructor:function(){},toString:me,toLocaleString:Ne}),Ae(qe,"buffer","b"),Ae(qe,"byteOffset","o"),Ae(qe,"byteLength","l"),Ae(qe,"length","e"),j(qe,we,{get:function(){return this[be]}}),e.exports=function(e,t,n,l){l=!!l;var u=e+(l?"Clamped":"")+"Array",h="Uint8Array"!=u,f="get"+e,p="set"+e,m=r[u],v=m||{},y=m&&P(m),w=!m||!a.ABV,T={},b=m&&m[X],O=function(e,n){var i=e._d;return i.v[f](n*t+i.o,Oe)},C=function(e,n,i){var r=e._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*t+r.o,i,Oe)},R=function(e,t){j(e,t,{get:function(){return O(this,t)},set:function(e){return C(this,t,e)},enumerable:!0})};w?(m=n(function(e,n,i,r){c(e,m,u,"_d");var o,s,a,l,h=0,f=0;if(x(n)){if(!(n instanceof Q||(l=S(n))==G||l==q))return be in n?De(m,n):Le.call(m,n);o=n,f=ke(i,t);var p=n.byteLength;if(void 0===r){if(p%t)throw W(Pe);if(s=p-f,0>s)throw W(Pe)}else if(s=g(r)*t,s+f>p)throw W(Pe);a=s/t}else a=Re(n,!0),s=a*t,o=new Q(s);for(d(e,"_d",{b:o,o:f,l:s,e:a,v:new J(o)});a>h;)R(e,h++)}),b=m[X]=E(qe),d(b,"constructor",m)):A(function(e){new m(null),new m(e)},!0)||(m=n(function(e,n,i,r){c(e,m,u);var o;return x(n)?n instanceof Q||(o=S(n))==G||o==q?void 0!==r?new v(n,ke(i,t),r):void 0!==i?new v(n,ke(i,t)):new v(n):be in n?De(m,n):Le.call(m,n):new v(Re(n,h))}),K(y!==Function.prototype?_(v).concat(_(y)):_(v),function(e){e in m||d(m,e,v[e])}),m[X]=b,i||(b.constructor=m));var k=b[ye],I=!!k&&("values"==k.name||void 0==k.name),F=We.values;d(m,Se,!0),d(b,be,u),d(b,Ee,!0),d(b,xe,m),(l?new m(1)[we]==u:we in b)||j(b,we,{get:function(){return u}}),T[u]=m,s(s.G+s.W+s.F*(m!=v),T),s(s.S,u,{BYTES_PER_ELEMENT:t,from:Le,of:ze}),Z in b||d(b,Z,t),s(s.P,u,Be),L(u),s(s.P+s.F*Ce,u,{set:Ve}),s(s.P+s.F*!I,u,We),s(s.P+s.F*(b.toString!=me),u,{toString:me}),s(s.P+s.F*o(function(){new m(1).slice()}),u,{slice:je}),s(s.P+s.F*(o(function(){
return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!o(function(){b.toLocaleString.call([1,2])})),u,{toLocaleString:Ne}),D[u]=I?k:F,i||I||d(b,ye,F)}}else e.exports=function(){}},function(e,t,n){var i=n(73),r=n(25)("iterator"),o=n(128);e.exports=n(5).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(i(t))}},function(e,t,n){n(220)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(220)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}},!0)},function(e,t,n){n(220)("Int16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(220)("Uint16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(220)("Int32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(220)("Uint32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(220)("Float32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(220)("Float64",8,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){var i=n(9),r=Function.apply;i(i.S,"Reflect",{apply:function(e,t,n){return r.call(e,t,n)}})},function(e,t,n){var i=n(9),r=n(43),o=n(21),s=n(12),a=n(13),l=n(75);i(i.S+i.F*n(8)(function(){function e(){}return!(Reflect.construct(function(){},[],e)instanceof e)}),"Reflect",{construct:function(e,t){o(e);var n=arguments.length<3?e:o(arguments[2]);if(e==n){if(void 0!=t)switch(s(t).length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(l.apply(e,i))}var u=n.prototype,c=r(a(u)?u:Object.prototype),h=Function.apply.call(e,c,t);return a(h)?h:c}})},function(e,t,n){var i=n(11),r=n(9),o=n(12),s=n(16);r(r.S+r.F*n(8)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=s(t,!0),o(n);try{return i.f(e,t,n),!0}catch(r){return!1}}})},function(e,t,n){var i=n(9),r=n(48).f,o=n(12);i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(o(e),t);return n&&!n.configurable?!1:delete e[t]}})},function(e,t,n){"use strict";var i=n(9),r=n(12),o=function(e){this._t=r(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(129)(o,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){function i(e,t){var n,a,c=arguments.length<3?e:arguments[2];return u(e)===c?e[t]:(n=r.f(e,t))?s(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:l(a=o(e))?i(a,t,c):void 0}var r=n(48),o=n(57),s=n(6),a=n(9),l=n(13),u=n(12);a(a.S,"Reflect",{get:i})},function(e,t,n){var i=n(48),r=n(9),o=n(12);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(o(e),t)}})},function(e,t,n){var i=n(9),r=n(57),o=n(12);i(i.S,"Reflect",{getPrototypeOf:function(e){return r(o(e))}})},function(e,t,n){var i=n(9);i(i.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var i=n(9),r=n(12),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),o?o(e):!0}})},function(e,t,n){var i=n(9);i(i.S,"Reflect",{ownKeys:n(241)})},function(e,t,n){var i=n(47),r=n(40),o=n(12),s=n(4).Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(9),r=n(12),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return o&&o(e),!0}catch(t){return!1}}})},function(e,t,n){function i(e,t,n){var l,d,f=arguments.length<4?e:arguments[3],p=o.f(c(e),t);if(!p){if(h(d=s(e)))return i(d,t,n,f);p=u(0)}return a(p,"value")?p.writable!==!1&&h(f)?(l=o.f(f,t)||u(0),l.value=n,r.f(f,t,l),!0):!1:void 0===p.set?!1:(p.set.call(f,n),!0)}var r=n(11),o=n(48),s=n(57),a=n(6),l=n(9),u=n(17),c=n(12),h=n(13);l(l.S,"Reflect",{set:i})},function(e,t,n){var i=n(9),r=n(71);r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(n){return!1}}})},function(e,t,n){"use strict";var i=n(9),r=n(33)(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(184)("includes")},function(e,t,n){"use strict";var i=n(9),r=n(126)(!0);i(i.P,"String",{at:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(9),r=n(248);i(i.P,"String",{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){var i=n(34),r=n(90),o=n(32);e.exports=function(e,t,n,s){var a=String(o(e)),l=a.length,u=void 0===n?" ":String(n),c=i(t);if(l>=c)return a;""==u&&(u=" ");var h=c-l,d=r.call(u,Math.ceil(h/u.length));return d.length>h&&(d=d.slice(0,h)),s?d+a:a+d}},function(e,t,n){"use strict";var i=n(9),r=n(248);i(i.P,"String",{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(81)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(81)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var i=n(9),r=n(32),o=n(34),s=n(133),a=n(194),l=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(129)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),i(i.P,"String",{matchAll:function(e){if(r(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in l?String(e.flags):a.call(e),i=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=o(e.lastIndex),new u(i,t)}})},function(e,t,n){var i=n(9),r=n(241),o=n(29),s=n(48),a=n(162);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=o(e),i=s.f,l=r(n),u={},c=0;l.length>c;)a(u,t=l[c++],i(n,t));return u}})},function(e,t,n){var i=n(9),r=n(255)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var i=n(27),r=n(29),o=n(41).f;e.exports=function(e){return function(t){for(var n,s=r(t),a=i(s),l=a.length,u=0,c=[];l>u;)o.call(s,n=a[u++])&&c.push(e?[n,s[n]]:s[n]);return c}}},function(e,t,n){var i=n(9),r=n(255)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},function(e,t,n){"use strict";var i=n(9),r=n(56),o=n(21),s=n(11);n(7)&&i(i.P+n(258),"Object",{__defineGetter__:function(e,t){s.f(r(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){e.exports=n(49)||!n(8)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(4)[e]})},function(e,t,n){"use strict";var i=n(9),r=n(56),o=n(21),s=n(11);n(7)&&i(i.P+n(258),"Object",{__defineSetter__:function(e,t){s.f(r(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var i=n(9),r=n(56),o=n(16),s=n(57),a=n(48).f;n(7)&&i(i.P+n(258),"Object",{__lookupGetter__:function(e){var t,n=r(this),i=o(e,!0);do if(t=a(n,i))return t.get;while(n=s(n))}})},function(e,t,n){"use strict";var i=n(9),r=n(56),o=n(16),s=n(57),a=n(48).f;n(7)&&i(i.P+n(258),"Object",{__lookupSetter__:function(e){var t,n=r(this),i=o(e,!0);do if(t=a(n,i))return t.set;while(n=s(n))}})},function(e,t,n){var i=n(9);i(i.P+i.R,"Map",{toJSON:n(263)("Map")})},function(e,t,n){var i=n(73),r=n(264);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(203);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){var i=n(9);i(i.P+i.R,"Set",{toJSON:n(263)("Set")})},function(e,t,n){var i=n(9);i(i.S,"System",{global:n(4)})},function(e,t,n){var i=n(9),r=n(31);i(i.S,"Error",{isError:function(e){return"Error"===r(e)}})},function(e,t,n){var i=n(9);i(i.S,"Math",{iaddh:function(e,t,n,i){var r=e>>>0,o=t>>>0,s=n>>>0;return o+(i>>>0)+((r&s|(r|s)&~(r+s>>>0))>>>31)|0}})},function(e,t,n){var i=n(9);i(i.S,"Math",{isubh:function(e,t,n,i){var r=e>>>0,o=t>>>0,s=n>>>0;return o-(i>>>0)-((~r&s|~(r^s)&r-s>>>0)>>>31)|0}})},function(e,t,n){var i=n(9);i(i.S,"Math",{imulh:function(e,t){var n=65535,i=+e,r=+t,o=i&n,s=r&n,a=i>>16,l=r>>16,u=(a*s>>>0)+(o*s>>>16);return a*l+(u>>16)+((o*l>>>0)+(u&n)>>16)}})},function(e,t,n){var i=n(9);i(i.S,"Math",{umulh:function(e,t){var n=65535,i=+e,r=+t,o=i&n,s=r&n,a=i>>>16,l=r>>>16,u=(a*s>>>0)+(o*s>>>16);return a*l+(u>>>16)+((o*l>>>0)+(u&n)>>>16)}})},function(e,t,n){var i=n(273),r=n(12),o=i.key,s=i.set;i.exp({defineMetadata:function(e,t,n,i){s(e,t,r(n),o(i))}})},function(e,t,n){var i=n(208),r=n(9),o=n(23)("metadata"),s=o.store||(o.store=new(n(212))),a=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}return o},l=function(e,t,n){var i=a(t,n,!1);return void 0===i?!1:i.has(e)},u=function(e,t,n){var i=a(t,n,!1);return void 0===i?void 0:i.get(e)},c=function(e,t,n,i){a(n,i,!0).set(e,t)},h=function(e,t){var n=a(e,t,!1),i=[];return n&&n.forEach(function(e,t){i.push(t)}),i},d=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},f=function(e){r(r.S,"Reflect",e)};e.exports={store:s,map:a,has:l,get:u,set:c,keys:h,key:d,exp:f}},function(e,t,n){var i=n(273),r=n(12),o=i.key,s=i.map,a=i.store;i.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),i=s(r(t),n,!1);if(void 0===i||!i["delete"](e))return!1;if(i.size)return!0;var l=a.get(t);return l["delete"](n),!!l.size||a["delete"](t)}})},function(e,t,n){var i=n(273),r=n(12),o=n(57),s=i.has,a=i.get,l=i.key,u=function(e,t,n){var i=s(e,t,n);if(i)return a(e,t,n);var r=o(t);return null!==r?u(e,r,n):void 0};i.exp({getMetadata:function(e,t){return u(e,r(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,n){var i=n(211),r=n(264),o=n(273),s=n(12),a=n(57),l=o.keys,u=o.key,c=function(e,t){var n=l(e,t),o=a(e);if(null===o)return n;var s=c(o,t);return s.length?n.length?r(new i(n.concat(s))):s:n};o.exp({getMetadataKeys:function(e){return c(s(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){var i=n(273),r=n(12),o=i.get,s=i.key;i.exp({getOwnMetadata:function(e,t){return o(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var i=n(273),r=n(12),o=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(e){return o(r(e),arguments.length<2?void 0:s(arguments[1]))}})},function(e,t,n){var i=n(273),r=n(12),o=n(57),s=i.has,a=i.key,l=function(e,t,n){var i=s(e,t,n);if(i)return!0;var r=o(t);return null!==r?l(e,r,n):!1};i.exp({hasMetadata:function(e,t){return l(e,r(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var i=n(273),r=n(12),o=i.has,s=i.key;i.exp({hasOwnMetadata:function(e,t){return o(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var i=n(273),r=n(12),o=n(21),s=i.key,a=i.set;i.exp({metadata:function(e,t){return function(n,i){a(e,t,(void 0!==i?r:o)(n),s(i))}}})},function(e,t,n){var i=n(4),r=n(9),o=n(76),s=n(283),a=i.navigator,l=!!a&&/MSIE .\./.test(a.userAgent),u=function(e){return l?function(t,n){return e(o(s,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};r(r.G+r.B+r.F*l,{setTimeout:u(i.setTimeout),setInterval:u(i.setInterval)})},function(e,t,n){"use strict";var i=n(284),r=n(76),o=n(21);e.exports=function(){for(var e=o(this),t=arguments.length,n=Array(t),s=0,a=i._,l=!1;t>s;)(n[s]=arguments[s++])===a&&(l=!0);return function(){var i,o=this,s=arguments.length,u=0,c=0;if(!l&&!s)return r(e,n,o);if(i=n.slice(),l)for(;t>u;u++)i[u]===a&&(i[u]=arguments[c++]);for(;s>c;)i.push(arguments[c++]);return r(e,i,o)}}},function(e,t,n){e.exports=n(4)},function(e,t,n){var i=n(9),r=n(205);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){for(var i=n(191),r=n(18),o=n(4),s=n(10),a=n(128),l=n(25),u=l("iterator"),c=l("toStringTag"),h=a.Array,d=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;5>f;f++){var p,g=d[f],m=o[g],v=m&&m.prototype;if(v){v[u]||s(v,u,h),v[c]||s(v,c,g),a[g]=h;for(p in i)v[p]||r(v,p,i[p],!0)}}},function(e,t,n){(function(t,n){!function(t){"use strict";function i(e,t,n,i){var r=Object.create((t||o).prototype),s=new p(i||[]);return r._invoke=h(e,n,s),r}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}function o(){}function s(){}function a(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){this.arg=e}function c(e){function t(t,n){var i=e[t](n),r=i.value;return r instanceof u?Promise.resolve(r.arg).then(o,s):Promise.resolve(r).then(function(e){return i.value=e,i})}function i(e,n){function i(){return t(e,n)}return r=r?r.then(i,i):new Promise(function(e){e(i())})}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var r,o=t.bind(e,"next"),s=t.bind(e,"throw");t.bind(e,"return");this._invoke=i}function h(e,t,n){var i=T;return function(o,s){if(i===E)throw new Error("Generator is already running");if(i===P){if("throw"===o)throw s;return m()}for(;;){var a=n.delegate;if(a){if("return"===o||"throw"===o&&a.iterator[o]===v){n.delegate=null;var l=a.iterator["return"];if(l){var u=r(l,a.iterator,s);if("throw"===u.type){o="throw",s=u.arg;continue}}if("return"===o)continue}var u=r(a.iterator[o],a.iterator,s);if("throw"===u.type){n.delegate=null,o="throw",s=u.arg;continue}o="next",s=v;var c=u.arg;if(!c.done)return i=b,c;n[a.resultName]=c.value,n.next=a.nextLoc,n.delegate=null}if("next"===o)n._sent=s,i===b?n.sent=s:n.sent=v;else if("throw"===o){if(i===T)throw i=P,s;n.dispatchException(s)&&(o="next",s=v)}else"return"===o&&n.abrupt("return",s);i=E;var u=r(e,t,n);if("normal"===u.type){i=n.done?P:b;var c={value:u.arg,done:n.done};if(u.arg!==_)return c;n.delegate&&"next"===o&&(s=v)}else"throw"===u.type&&(i=P,o="throw",s=u.arg)}}}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function g(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(y.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=v,r.done=!0,r};return i.next=i}}return{next:m}}function m(){return{value:v,done:!0}}var v,y=Object.prototype.hasOwnProperty,w="function"==typeof Symbol&&Symbol.iterator||"@@iterator",S="object"==typeof e,x=t.regeneratorRuntime;if(x)return void(S&&(e.exports=x));x=t.regeneratorRuntime=S?e.exports:{},x.wrap=i;var T="suspendedStart",b="suspendedYield",E="executing",P="completed",_={},O=a.prototype=o.prototype;s.prototype=O.constructor=a,a.constructor=s,s.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===s||"GeneratorFunction"===(t.displayName||t.name):!1},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a,e.prototype=Object.create(O),e},x.awrap=function(e){return new u(e)},l(c.prototype),x.async=function(e,t,n,r){var o=new c(i(e,t,n,r));return x.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},l(O),O[w]=function(){return this},O.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},x.values=g,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,n.next=t,!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=y.call(r,"catchLoc"),a=y.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&y.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?this.next=r.finallyLoc:this.complete(o),_},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),_}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:g(e),resultName:t,nextLoc:n},_}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),n(288))},function(e,t){function n(){u=!1,s.length?l=s.concat(l):c=-1,l.length&&i()}function i(){if(!u){var e=setTimeout(n);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function o(){}var s,a=e.exports={},l=[],u=!1,c=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new r(e,t)),1!==l.length||u||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){n(290),e.exports=n(5).RegExp.escape},function(e,t,n){var i=n(9),r=n(291)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(e){return r(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(293),o=(i(r),n(294)),s=(i(o),n(298)),a=i(s),l=n(305),u=i(l),c=n(300),h=new a["default"]({id:"player"});(0,c.fetch)("./collections.json").then(function(e){var t=document.getElementById("chooser"),n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=document.createElement("li");l.innerText=a.label,l.setAttribute("data-uri",a.id),l.onclick=function(){h.resetAllTiles(this.getAttribute("data-uri")),(0,u["default"])(t,{top:30,right:20,margin:0},{duration:300})},t.appendChild(l)}}catch(c){i=!0,r=c}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw r}}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;//! openseadragon 2.1.0
//! Built on 2015-12-01
//! Git commit: v2.1.0-3-b2c17b5-dirty
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
window.OpenSeadragon=window.OpenSeadragon||function(e){return new OpenSeadragon.Viewer(e)},__WEBPACK_AMD_DEFINE_RESULT__=function(){return window.OpenSeadragon}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),function(e){e.version={versionStr:"2.1.0",major:parseInt("2",10),minor:parseInt("1",10),revision:parseInt("0",10)};var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,i=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.type=function(e){return null===e||void 0===e?String(e):t[n.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==OpenSeadragon.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!i.call(t,"constructor")&&!i.call(t.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var r in t)n=r;return void 0===n||i.call(t,n)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.supportsCanvas=function(){var t=document.createElement("canvas");return!(!e.isFunction(t.getContext)||!t.getContext("2d"))}(),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(n){t=!0}return t},e.pixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}return 1}()}(OpenSeadragon),function($){function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}function processDZIResponse(e,t){var n,i,r=null;if(!e)throw new Error($.getString("Errors.Security"));if(200!==e.status&&0!==e.status)throw n=e.status,i=404==n?"Not Found":e.statusText,new Error($.getString("Errors.Status",n,i));return e.responseXML&&e.responseXML.documentElement?r=e.responseXML:e.responseText&&(r=$.parseXml(e.responseText)),processDZIXml(r,t)}function processDZIXml(e,t){if(!e||!e.documentElement)throw new Error($.getString("Errors.Xml"));var n=e.documentElement,i=n.tagName;if("Image"==i)try{return processDZI(n,t)}catch(r){throw r instanceof Error?r:new Error($.getString("Errors.Dzi"))}else{if("Collection"==i)throw new Error($.getString("Errors.Dzc"));if("Error"==i)return $._processDZIError(n)}throw new Error($.getString("Errors.Dzi"))}function processDZI(e,t){var n,i,r,o=e.getAttribute("Format"),s=e.getElementsByTagName("Size")[0],a=e.getElementsByTagName("DisplayRect"),l=parseInt(s.getAttribute("Width"),10),u=parseInt(s.getAttribute("Height"),10),c=parseInt(e.getAttribute("TileSize"),10),h=parseInt(e.getAttribute("Overlap"),10),d=[];if(!$.imageFormatSupported(o))throw new Error($.getString("Errors.ImageFormat",o.toUpperCase()));for(r=0;r<a.length;r++)n=a[r],i=n.getElementsByTagName("Rect")[0],d.push(new $.DisplayRect(parseInt(i.getAttribute("X"),10),parseInt(i.getAttribute("Y"),10),parseInt(i.getAttribute("Width"),10),parseInt(i.getAttribute("Height"),10),0,parseInt(n.getAttribute("MaxLevel"),10)));return new $.DziTileSource(l,u,c,h,t,o,d)}function processDZIJSON(e,t){var n,i,r=e.Format,o=e.Size,s=e.DisplayRect||[],a=parseInt(o.Width,10),l=parseInt(o.Height,10),u=parseInt(e.TileSize,10),c=parseInt(e.Overlap,10),h=[];if(!$.imageFormatSupported(r))throw new Error($.getString("Errors.ImageFormat",r.toUpperCase()));for(i=0;i<s.length;i++)n=s[i].Rect,h.push(new $.DisplayRect(parseInt(n.X,10),parseInt(n.Y,10),parseInt(n.Width,10),parseInt(n.Height,10),0,parseInt(n.MaxLevel,10)));return new $.DziTileSource(a,l,u,c,t,r,h)}$.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=arguments.length,l=!1,u=1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},u=2),"object"==typeof s||OpenSeadragon.isFunction(s)||(s={}),a===u&&(s=this,--u);a>u;u++)if(e=arguments[u],null!==e||void 0!==e)for(t in e)n=s[t],i=e[t],s!==i&&(l&&i&&(OpenSeadragon.isPlainObject(i)||(r=OpenSeadragon.isArray(i)))?(r?(r=!1,o=n&&OpenSeadragon.isArray(n)?n:[]):o=n&&OpenSeadragon.isPlainObject(n)?n:{},s[t]=OpenSeadragon.extend(l,o,i)):void 0!==i&&(s[t]=i));return s},$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,pixelsPerWheelLine:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorRotate:!0,degrees:0,opacity:1,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var n=arguments;return void 0===n&&(n=[]),t.apply(e,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,n,i=new $.Point;for(e=$.getElement(e),t="fixed"==$.getElementStyle(e).position,n=getOffsetParent(e,t);n;)i.x+=e.offsetLeft,i.y+=e.offsetTop,t&&(i=i.plus($.getPageScroll())),e=n,t="fixed"==$.getElementStyle(e).position,n=getOffsetParent(e,t);return i},getElementOffset:function(e){e=$.getElement(e);var t,n,i=e&&e.ownerDocument,r={top:0,left:0};return i?(t=i.documentElement,"undefined"!=typeof e.getBoundingClientRect&&(r=e.getBoundingClientRect()),n=i==i.window?i:9===i.nodeType?i.defaultView||i.parentWindow:!1,new $.Point(r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0),r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return e=$.getElement(e),e.currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},pointInElement:function(e,t){e=$.getElement(e);var n=$.getElementOffset(e),i=$.getElementSize(e);return t.x>=n.x&&t.x<n.x+i.x&&t.y<n.y+i.y&&t.y>=n.y},getEvent:function(e){return e?$.getEvent=function(e){return e}:$.getEvent=function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if("undefined"!=typeof window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var n=$.getPageScroll();if(n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,n=$.getPageScroll(),n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(e){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),n=t.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),n=null;return n=$.makeNeutralElement("span"),n.style.display="inline-block",t.onload=function(){n.style.width=n.style.width||t.width+"px",n.style.height=n.style.height||t.height+"px",t.onload=null,t=null},t.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",n}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,n){var i,r;e=$.getElement(e),n&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=1>t?t:"":1>t?(i=Math.round(100*t),r="alpha(opacity="+i+")",e.style.filter=r):e.style.filter=""},setElementTouchActionNone:function(e){e=$.getElement(e),"undefined"!=typeof e.style.touchAction?e.style.touchAction="none":"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){e=$.getElement(e),e.className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var i,r,o=n?n:0;if(!e)throw new TypeError;if(r=e.length,0===r||o>=r)return-1;for(0>o&&(o=r-Math.abs(o)),i=o;r>i;i++)if(e[i]===t)return i;return-1},this.indexOf(e,t,n)},removeClass:function(e,t){var n,i,r=[];for(e=$.getElement(e),n=e.className.split(/\s+/),i=0;i<n.length;i++)n[i]&&n[i]!==t&&r.push(n[i]);e.className=r.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,n,i){e=$.getElement(e),e.addEventListener(t,n,i)};if(window.attachEvent)return function(e,t,n,i){e=$.getElement(e),e.attachEvent("on"+t,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,n,i){e=$.getElement(e),e.removeEventListener(t,n,i)};if(window.detachEvent)return function(e,t,n,i){e=$.getElement(e),e.detachEvent("on"+t,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){e=$.getEvent(e),e.preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){e=$.getEvent(e),e.cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){e=$.getEvent(e),e.stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){e=$.getEvent(e),e.cancelBubble=!0},$.stopEvent(e)},createCallback:function(e,t){var n,i=[];for(n=2;n<arguments.length;n++)i.push(arguments[n]);return function(){var n,r=i.concat([]);for(n=0;n<arguments.length;n++)r.push(arguments[n]);return t.apply(e,r)}},getUrlParameter:function(e){var t=URLPARAMS[e];return t?t:null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(n){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,t,n){var i;$.isPlainObject(e)&&(t=e.success,n=e.error,i=e.withCredentials,e=e.url);var r=$.getUrlProtocol(e),o=$.createAjaxRequest("file:"===r);if(!$.isFunction(t))throw new Error("makeAjaxRequest requires a success callback");o.onreadystatechange=function(){4==o.readyState&&(o.onreadystatechange=function(){},200===o.status||0===o.status&&"http:"!==r&&"https:"!==r?t(o):($.console.log("AJAX request returned %d: %s",o.status,e),$.isFunction(n)&&n(o)))},i&&(o.withCredentials=!0);try{o.open("GET",e,!0),o.send(null)}catch(s){var a=s.message,l=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(l&&"undefined"!=typeof s.number&&-2147024891==s.number&&(a+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",s.name,a),o.onreadystatechange=function(){},window.XDomainRequest){var u=new XDomainRequest;if(u){u.onload=function(e){$.isFunction(t)&&t({responseText:u.responseText,status:200,statusText:"OK"})},u.onerror=function(e){$.isFunction(n)&&n({responseText:u.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{u.open("GET",e),u.send()}catch(c){$.isFunction(n)&&n(o,s)}}}else $.isFunction(n)&&n(o,s)}},jsonp:function(e){var t,n=e.url,i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=e.callbackName||"openseadragon"+$.now(),o=window[r],s="$1"+r+"$2",a=e.param||"callback",l=e.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,s),n+=(/\?/.test(n)?"&":"?")+a+"="+r,window[r]=function(e){if(o)window[r]=o;else try{delete window[r]}catch(t){}l&&$.isFunction(l)&&l(e)},t=document.createElement("script"),void 0===e.async&&!1===e.async||(t.async="async"),e.scriptCharset&&(t.charset=e.scriptCharset),t.src=n,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,i&&t.parentNode&&i.removeChild(t),t=void 0)},i.insertBefore(t,i.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){var t,n=null;return t=new DOMParser,n=t.parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return e=e?e:"",!!FILEFORMATS[e.toLowerCase()]}}),$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};!function(){var e,t=(navigator.appName,navigator.appVersion),n=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(n.substring(n.indexOf("MSIE")+5,n.indexOf(";",n.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(n.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(n.substring(n.indexOf("Firefox")+8))):n.indexOf("Safari")>=0?($.Browser.vendor=n.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(n.substring(n.substring(0,n.indexOf("Safari")).lastIndexOf("/")+1,n.indexOf("Safari")))):(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(t)}var i,r,o,s=window.location.search.substring(1),a=s.split("&");for(o=0;o<a.length;o++)i=a[o],r=i.indexOf("="),r>0&&(URLPARAMS[i.substring(0,r)]=decodeURIComponent(i.substring(r+1)));$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}();var nullfunction=function(e){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&n)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return n.apply(e,arguments)};else{var i,r=[],o=[],s=0;$.requestAnimationFrame=function(e){return r.push([++s,e]),i||(i=setInterval(function(){if(r.length){var e=$.now(),t=o;for(o=r,r=t;o.length;)o.shift()[1](e)}else clearInterval(i),i=void 0},20)),s},$.cancelAnimationFrame=function(e){var t,n;for(t=0,n=r.length;n>t;t+=1)if(r[t][0]===e)return void r.splice(t,1);for(t=0,n=o.length;n>t;t+=1)if(o[t][0]===e)return void o.splice(t,1)}}}(window),$._processDZIError=function(e){var t=e.getElementsByTagName("Message")[0],n=t.firstChild.nodeValue;throw new Error(n)}}(OpenSeadragon),function(e){var t={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.fullscreenElement},t.requestFullScreen=function(e){return e.requestFullscreen()},t.exitFullScreen=function(){document.exitFullscreen()},t.fullScreenEventName="fullscreenchange",t.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.msFullscreenElement},t.requestFullScreen=function(e){return e.msRequestFullscreen()},t.exitFullScreen=function(){document.msExitFullscreen()},t.fullScreenEventName="MSFullscreenChange",t.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitFullscreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullscreen()},t.exitFullScreen=function(){document.webkitExitFullscreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},t.requestFullScreen=function(e){return e.webkitRequestFullScreen()},t.exitFullScreen=function(){document.webkitCancelFullScreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.mozFullScreenElement},t.requestFullScreen=function(e){return e.mozRequestFullScreen()},t.exitFullScreen=function(){document.mozCancelFullScreen()},t.fullScreenEventName="mozfullscreenchange",t.fullScreenErrorEventName="mozfullscreenerror"),t.isFullScreen=function(){return null!==t.getFullScreenElement()},t.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),t.exitFullScreen()},e.extend(e,t)}(OpenSeadragon),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addHandler:function(t,n,i){var r=this.events[t];r||(this.events[t]=r=[]),n&&e.isFunction(n)&&(r[r.length]={handler:n,userData:i||null})},removeHandler:function(t,n){var i,r=this.events[t],o=[];if(r&&e.isArray(r)){for(i=0;i<r.length;i++)r[i].handler!==n&&o.push(r[i]);this.events[t]=o}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,n){var i,r=t.length;for(i=0;r>i;i++)t[i]&&(n.eventSource=e,n.userData=t[i].userData,t[i].handler(n))}):null},raiseEvent:function(e,t){var n=this.getHandler(e);n&&(t||(t={}),n(this,t))}}}(OpenSeadragon),function(e){function t(t){var n,i=pe[t.hash],r=i.activePointersLists.length;for(n=0;r>n;n++)i.activePointersLists[n].captureCount>0&&(e.removeEvent(e.MouseTracker.captureElement,"mousemove",i.mousemovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"mouseup",i.mouseupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",i.pointermovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",i.pointerupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchmove",i.touchmovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchend",i.touchendcaptured,!0),i.activePointersLists[n].captureCount=0);for(n=0;r>n;n++)i.activePointersLists.pop()}function n(n){var i,r,o=pe[n.hash];if(!o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)i=e.MouseTracker.subscribeEvents[r],e.addEvent(n.element,i,o[i],!1);t(n),o.tracking=!0}}function i(n){var i,r,o=pe[n.hash];if(o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)i=e.MouseTracker.subscribeEvents[r],e.removeEvent(n.element,i,o[i],!1);t(n),o.tracking=!1}}function r(t,n){var i=pe[t.hash];if("pointerevent"===n)return{upName:e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:i.pointerupcaptured,moveName:e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:i.pointermovecaptured};if("mouse"===n)return{upName:"mouseup",upHandler:i.mouseupcaptured,moveName:"mousemove",moveHandler:i.mousemovecaptured};if("touch"===n)return{upName:"touchend",upHandler:i.touchendcaptured,moveName:"touchmove",moveHandler:i.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function o(t,n){var i,o=t.getActivePointersListByType(n);o.captureCount++,1===o.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.setCapture(!0):(i=r(t,e.MouseTracker.havePointerEvents?"pointerevent":n),e.addEvent(e.MouseTracker.captureElement,i.upName,i.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,i.moveName,i.moveHandler,!0)))}function s(t,n){var i,o=t.getActivePointersListByType(n);o.captureCount--,0===o.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.releaseCapture():(i=r(t,e.MouseTracker.havePointerEvents?"pointerevent":n),e.removeEvent(e.MouseTracker.captureElement,i.moveName,i.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,i.upName,i.upHandler,!0)))}function a(t){var n;if(e.MouseTracker.unprefixedPointerEvents)n=t.pointerType;else switch(t.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function l(t){return e.getMousePosition(t)}function u(e,t){return c(l(e),t)}function c(t,n){var i=e.getElementOffset(n);return t.minus(i)}function h(t,n){return new e.Point((t.x+n.x)/2,(t.y+n.y)/2)}function d(t,n){t.clickHandler&&e.cancelEvent(n)}function f(t,n){t.dblClickHandler&&e.cancelEvent(n)}function p(t,n){var i;t.keyDownHandler&&(n=e.getEvent(n),i=t.keyDownHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function g(t,n){var i;t.keyUpHandler&&(n=e.getEvent(n),i=t.keyUpHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function m(t,n){var i;t.keyHandler&&(n=e.getEvent(n),i=t.keyHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i||e.cancelEvent(n))}function v(t,n){var i;t.focusHandler&&(n=e.getEvent(n),i=t.focusHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i===!1&&e.cancelEvent(n))}function y(t,n){var i;t.blurHandler&&(n=e.getEvent(n),i=t.blurHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),i===!1&&e.cancelEvent(n))}function w(e,t){x(e,t,t)}function S(t,n){n=e.getEvent(n);var i={target:n.target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==e.MouseTracker.wheelEventName?i.deltaY=-1/e.DEFAULT_SETTINGS.pixelsPerWheelLine*n.wheelDelta:i.deltaY=n.detail,x(t,i,n)}function x(t,n,i){var r,o=0;o=n.deltaY<0?1:-1,t.scrollHandler&&(r=t.scrollHandler({eventSource:t,pointerType:"mouse",position:u(n,t.element),scroll:o,shift:n.shiftKey,isTouchEvent:!1,originalEvent:i,preventDefaultAction:!1,userData:t.userData}),r===!1&&e.cancelEvent(i))}function T(e,t){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e}function b(t,n){n=e.getEvent(n),P(t,n)}function E(t,n){n=e.getEvent(n),n.currentTarget===n.relatedTarget||T(n.currentTarget,n.relatedTarget)||P(t,n)}function P(t,n){var i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()};se(t,n,[i])}function _(t,n){n=e.getEvent(n),C(t,n)}function O(t,n){n=e.getEvent(n),n.currentTarget===n.relatedTarget||T(n.currentTarget,n.relatedTarget)||C(t,n)}function C(t,n){var i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()};ae(t,n,[i])}function R(t){return e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?1===t?0:2===t?2:4===t?1:-1:t}function k(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()},le(t,n,[i],R(n.button))&&(e.stopEvent(n),o(t,"mouse")),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler)&&e.cancelEvent(n)}function I(e,t){M(e,t)}function F(t,n){M(t,n),e.stopEvent(n)}function M(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()},ue(t,n,[i],R(n.button))&&s(t,"mouse")}function D(e,t){L(e,t)}function A(t,n){L(t,n),e.stopEvent(n)}function L(t,n){var i;n=e.getEvent(n),i={id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:l(n),currentTime:e.now()},ce(t,n,[i])}function z(e,t,n){var i,r=n.getLength(),o=[];for(i=0;r>i;i++)o.push(n.getByIndex(i));o.length>0&&(ue(e,t,o,0),n.captureCount=1,s(e,"touch"),ae(e,t,o))}function H(t,n){var i,r,s,a,u=n.changedTouches.length,c=[],h=t.getActivePointersListByType("touch");for(i=e.now(),h.getLength()>n.touches.length-u&&(e.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),z(t,n,h)),r=0;u>r;r++)c.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:l(n.changedTouches[r]),currentTime:i});for(se(t,n,c),r=0;r<fe.length;r++)if(fe[r]!==t&&fe[r].isTracking()&&T(fe[r].element,t.element)){for(a=[],s=0;u>s;s++)a.push({id:n.changedTouches[s].identifier,type:"touch",currentPos:l(n.changedTouches[s]),currentTime:i});se(fe[r],n,a)}le(t,n,c,0)&&(e.stopEvent(n),o(t,"touch")),e.cancelEvent(n)}function N(e,t){j(e,t)}function B(t,n){j(t,n),e.stopEvent(n)}function j(t,n){var i,r,o,a,u=n.changedTouches.length,c=[];for(i=e.now(),r=0;u>r;r++)c.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:l(n.changedTouches[r]),currentTime:i});for(ue(t,n,c,0)&&s(t,"touch"),ae(t,n,c),r=0;r<fe.length;r++)if(fe[r]!==t&&fe[r].isTracking()&&T(fe[r].element,t.element)){for(a=[],o=0;u>o;o++)a.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:l(n.changedTouches[o]),currentTime:i});ae(fe[r],n,a)}e.cancelEvent(n)}function V(e,t){U(e,t)}function W(t,n){U(t,n),e.stopEvent(n)}function U(t,n){var i,r=n.changedTouches.length,o=[];for(i=0;r>i;i++)o.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:l(n.changedTouches[i]),currentTime:e.now()});ce(t,n,o),e.cancelEvent(n)}function $(e,t){
var n=(t.changedTouches.length,e.getActivePointersListByType("touch"));z(e,t,n)}function G(e,t){return t.stopPropagation(),t.preventDefault(),!1}function q(e,t){return t.stopPropagation(),t.preventDefault(),!1}function Z(t,n){var i;n.currentTarget===n.relatedTarget||T(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},se(t,n,[i]))}function X(t,n){var i;n.currentTarget===n.relatedTarget||T(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},ae(t,n,[i]))}function Y(t,n){var i;i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},le(t,n,[i],n.button)&&(e.stopEvent(n),o(t,i.type)),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.cancelEvent(n)}function Q(e,t){K(e,t)}function J(t,n){var i=t.getActivePointersListByType(a(n));i.getById(n.pointerId)&&K(t,n),e.stopEvent(n)}function K(t,n){var i;i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},ue(t,n,[i],n.button)&&s(t,i.type)}function ee(e,t){ne(e,t)}function te(t,n){var i=t.getActivePointersListByType(a(n));i.getById(n.pointerId)&&ne(t,n),e.stopEvent(n)}function ne(t,n){var i;i={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:l(n),currentTime:e.now()},ce(t,n,[i])}function ie(e,t){var n;n={id:t.pointerId,type:a(t)},he(e,t,[n])}function re(e,t){return t.hasOwnProperty("isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function oe(e,t){var n,i;return e.getById(t.id)?(n=e.removeById(t.id),t.hasOwnProperty("isPrimary")||(i=e.getPrimary(),i||(i=e.getByIndex(0),i&&(i.isPrimary=!0)))):n=e.getLength(),n}function se(t,n,i){var r,o,s,a,l=t.getActivePointersListByType(i[0].type),u=i.length;for(r=0;u>r;r++)o=i[r],s=l.getById(o.id),s?(s.insideElement=!0,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime,o=s):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,re(l,o)),t.enterHandler&&(a=t.enterHandler({eventSource:t,pointerType:o.type,position:c(o.currentPos,t.element),buttons:l.buttons,pointers:t.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==l.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),a===!1&&e.cancelEvent(n))}function ae(t,n,i){var r,o,s,a,l=(pe[t.hash],t.getActivePointersListByType(i[0].type)),u=i.length;for(r=0;u>r;r++)o=i[r],s=l.getById(o.id),s&&(s.captured?(s.insideElement=!1,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime):oe(l,s),o=s),t.exitHandler&&(a=t.exitHandler({eventSource:t,pointerType:o.type,position:c(o.currentPos,t.element),buttons:l.buttons,pointers:t.getActivePointerCount(),insideElementPressed:s?s.insideElementPressed:!1,buttonDownAny:0!==l.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),a===!1&&e.cancelEvent(n))}function le(t,n,i,r){var o,s,a,l,u=pe[t.hash],d=t.getActivePointersListByType(i[0].type),f=i.length;if("undefined"!=typeof n.buttons?d.buttons=n.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===r?d.buttons+=1:1===r?d.buttons+=4:2===r?d.buttons+=2:3===r?d.buttons+=8:4===r?d.buttons+=16:5===r&&(d.buttons+=32):0===r?d.buttons|=1:1===r?d.buttons|=4:2===r?d.buttons|=2:3===r?d.buttons|=8:4===r?d.buttons|=16:5===r&&(d.buttons|=32),0!==r)return t.nonPrimaryPressHandler&&(o=t.nonPrimaryPressHandler({eventSource:t,pointerType:i[0].type,position:c(i[0].currentPos,t.element),button:r,buttons:d.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),!1;for(s=0;f>s;s++)a=i[s],l=d.getById(a.id),l?(l.captured=!0,l.insideElementPressed=!0,l.insideElement=!0,l.contactPos=a.currentPos,l.contactTime=a.currentTime,l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=a.currentPos,l.currentTime=a.currentTime,a=l):(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,re(d,a)),d.contacts++,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,a),1===d.contacts?t.pressHandler&&(o=t.pressHandler({eventSource:t,pointerType:a.type,position:c(a.contactPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)):2===d.contacts&&t.pinchHandler&&"touch"===a.type&&(u.pinchGPoints=d.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=h(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos));return!0}function ue(t,n,i,r){var o,s,a,l,u,d,f,p=pe[t.hash],g=t.getActivePointersListByType(i[0].type),m=i.length,v=!1,y=!1;if("undefined"!=typeof n.buttons?g.buttons=n.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===r?g.buttons-=1:1===r?g.buttons-=4:2===r?g.buttons-=2:3===r?g.buttons-=8:4===r?g.buttons-=16:5===r&&(g.buttons-=32):0===r?g.buttons^=-2:1===r?g.buttons^=-5:2===r?g.buttons^=-3:3===r?g.buttons^=-9:4===r?g.buttons^=-17:5===r&&(g.buttons^=-33),0!==r)return t.nonPrimaryReleaseHandler&&(o=t.nonPrimaryReleaseHandler({eventSource:t,pointerType:i[0].type,position:c(i[0].currentPos,t.element),button:r,buttons:g.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),!1;for(l=0;m>l;l++)u=i[l],d=g.getById(u.id),d&&(d.captured&&(d.captured=!1,v=!0,y=!0),d.lastPos=d.currentPos,d.lastTime=d.currentTime,d.currentPos=u.currentPos,d.currentTime=u.currentTime,d.insideElement||oe(g,d),s=d.currentPos,a=d.currentTime,y?(g.contacts--,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,d),0===g.contacts?(t.releaseHandler&&(o=t.releaseHandler({eventSource:t,pointerType:d.type,position:c(s,t.element),buttons:g.buttons,insideElementPressed:d.insideElementPressed,insideElementReleased:d.insideElement,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),t.dragEndHandler&&!d.currentPos.equals(d.contactPos)&&(o=t.dragEndHandler({eventSource:t,pointerType:d.type,position:c(d.currentPos,t.element),speed:d.speed,direction:d.direction,shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),(t.clickHandler||t.dblClickHandler)&&d.insideElement&&(f=a-d.contactTime<=t.clickTimeThreshold&&d.contactPos.distanceTo(s)<=t.clickDistThreshold,t.clickHandler&&(o=t.clickHandler({eventSource:t,pointerType:d.type,position:c(d.currentPos,t.element),quick:f,shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),t.dblClickHandler&&f&&(g.clicks++,1===g.clicks?(p.lastClickPos=s,p.dblClickTimeOut=setTimeout(function(){g.clicks=0},t.dblClickTimeThreshold)):2===g.clicks&&(clearTimeout(p.dblClickTimeOut),g.clicks=0,p.lastClickPos.distanceTo(s)<=t.dblClickDistThreshold&&(o=t.dblClickHandler({eventSource:t,pointerType:d.type,position:c(d.currentPos,t.element),shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)),p.lastClickPos=null)))):2===g.contacts&&t.pinchHandler&&"touch"===d.type&&(p.pinchGPoints=g.asArray(),p.lastPinchDist=p.currentPinchDist=p.pinchGPoints[0].currentPos.distanceTo(p.pinchGPoints[1].currentPos),p.lastPinchCenter=p.currentPinchCenter=h(p.pinchGPoints[0].currentPos,p.pinchGPoints[1].currentPos))):t.releaseHandler&&(o=t.releaseHandler({eventSource:t,pointerType:d.type,position:c(s,t.element),buttons:g.buttons,insideElementPressed:d.insideElementPressed,insideElementReleased:d.insideElement,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),o===!1&&e.cancelEvent(n)));return v}function ce(t,n,i){var r,o,s,a,l,u,d=pe[t.hash],f=t.getActivePointersListByType(i[0].type),p=i.length;for("undefined"!=typeof n.buttons&&(f.buttons=n.buttons),r=0;p>r;r++)o=i[r],s=f.getById(o.id),s?(o.hasOwnProperty("isPrimary")&&(s.isPrimary=o.isPrimary),s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,re(f,o));t.stopHandler&&"mouse"===i[0].type&&(clearTimeout(t.stopTimeOut),t.stopTimeOut=setTimeout(function(){de(t,n,i[0].type)},t.stopDelay)),0===f.contacts?t.moveHandler&&(u=t.moveHandler({eventSource:t,pointerType:i[0].type,position:c(i[0].currentPos,t.element),buttons:f.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n)):1===f.contacts?(t.moveHandler&&(s=f.asArray()[0],u=t.moveHandler({eventSource:t,pointerType:s.type,position:c(s.currentPos,t.element),buttons:f.buttons,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n)),t.dragHandler&&(s=f.asArray()[0],l=s.currentPos.minus(s.lastPos),u=t.dragHandler({eventSource:t,pointerType:s.type,position:c(s.currentPos,t.element),buttons:f.buttons,delta:l,speed:s.speed,direction:s.direction,shift:n.shiftKey,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n))):2===f.contacts&&(t.moveHandler&&(a=f.asArray(),u=t.moveHandler({eventSource:t,pointerType:a[0].type,position:c(h(a[0].currentPos,a[1].currentPos),t.element),buttons:f.buttons,isTouchEvent:"touch"===a[0].type,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n)),t.pinchHandler&&"touch"===i[0].type&&(l=d.pinchGPoints[0].currentPos.distanceTo(d.pinchGPoints[1].currentPos),l!=d.currentPinchDist&&(d.lastPinchDist=d.currentPinchDist,d.currentPinchDist=l,d.lastPinchCenter=d.currentPinchCenter,d.currentPinchCenter=h(d.pinchGPoints[0].currentPos,d.pinchGPoints[1].currentPos),u=t.pinchHandler({eventSource:t,pointerType:"touch",gesturePoints:d.pinchGPoints,lastCenter:c(d.lastPinchCenter,t.element),center:c(d.currentPinchCenter,t.element),lastDistance:d.lastPinchDist,distance:d.currentPinchDist,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData}),u===!1&&e.cancelEvent(n))))}function he(e,t,n){ue(e,t,n,0),ae(e,t,n)}function de(e,t,n){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:u(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:t,preventDefaultAction:!1,userData:e.userData})}var fe=[],pe={};e.MouseTracker=function(t){fe.push(this);var n=arguments;e.isPlainObject(t)||(t={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=e.getElement(t.element),this.clickTimeThreshold=t.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=t.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=t.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=t.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=t.userData||null,this.stopDelay=t.stopDelay||50,this.enterHandler=t.enterHandler||null,this.exitHandler=t.exitHandler||null,this.pressHandler=t.pressHandler||null,this.nonPrimaryPressHandler=t.nonPrimaryPressHandler||null,this.releaseHandler=t.releaseHandler||null,this.nonPrimaryReleaseHandler=t.nonPrimaryReleaseHandler||null,this.moveHandler=t.moveHandler||null,this.scrollHandler=t.scrollHandler||null,this.clickHandler=t.clickHandler||null,this.dblClickHandler=t.dblClickHandler||null,this.dragHandler=t.dragHandler||null,this.dragEndHandler=t.dragEndHandler||null,this.pinchHandler=t.pinchHandler||null,this.stopHandler=t.stopHandler||null,this.keyDownHandler=t.keyDownHandler||null,this.keyUpHandler=t.keyUpHandler||null,this.keyHandler=t.keyHandler||null,this.focusHandler=t.focusHandler||null,this.blurHandler=t.blurHandler||null;var i=this;pe[this.hash]={click:function(e){d(i,e)},dblclick:function(e){f(i,e)},keydown:function(e){p(i,e)},keyup:function(e){g(i,e)},keypress:function(e){m(i,e)},focus:function(e){v(i,e)},blur:function(e){y(i,e)},wheel:function(e){w(i,e)},mousewheel:function(e){S(i,e)},DOMMouseScroll:function(e){S(i,e)},MozMousePixelScroll:function(e){S(i,e)},mouseenter:function(e){b(i,e)},mouseleave:function(e){_(i,e)},mouseover:function(e){E(i,e)},mouseout:function(e){O(i,e)},mousedown:function(e){k(i,e)},mouseup:function(e){I(i,e)},mouseupcaptured:function(e){F(i,e)},mousemove:function(e){D(i,e)},mousemovecaptured:function(e){A(i,e)},touchstart:function(e){H(i,e)},touchend:function(e){N(i,e)},touchendcaptured:function(e){B(i,e)},touchmove:function(e){V(i,e)},touchmovecaptured:function(e){W(i,e)},touchcancel:function(e){$(i,e)},gesturestart:function(e){G(i,e)},gesturechange:function(e){q(i,e)},pointerover:function(e){Z(i,e)},MSPointerOver:function(e){Z(i,e)},pointerout:function(e){X(i,e)},MSPointerOut:function(e){X(i,e)},pointerdown:function(e){Y(i,e)},MSPointerDown:function(e){Y(i,e)},pointerup:function(e){Q(i,e)},MSPointerUp:function(e){Q(i,e)},pointermove:function(e){ee(i,e)},MSPointerMove:function(e){ee(i,e)},pointercancel:function(e){ie(i,e)},MSPointerCancel:function(e){ie(i,e)},pointerupcaptured:function(e){J(i,e)},pointermovecaptured:function(e){te(i,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},t.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(i(this),this.element=null,e=0;e<fe.length;e++)if(fe[e]===this){fe.splice(e,1);break}pe[this.hash]=null,delete pe[this.hash]},isTracking:function(){return pe[this.hash].tracking},setTracking:function(e){return e?n(this):i(this),this},getActivePointersListByType:function(t){var n,i,r=pe[this.hash],o=r.activePointersLists.length;for(n=0;o>n;n++)if(r.activePointersLists[n].type===t)return r.activePointersLists[n];return i=new e.MouseTracker.GesturePointList(t),r.activePointersLists.push(i),i},getActivePointerCount:function(){var e,t=pe[this.hash],n=t.activePointersLists.length,i=0;for(e=0;n>e;e++)i+=t.activePointersLists[e].getLength();return i},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},e.MouseTracker.gesturePointVelocityTracker=function(){var t=[],n=0,i=0,r=function(e,t){return e.hash.toString()+t.type+t.id.toString()},o=function(){var n,r,o,s,a,l,u=t.length,c=e.now();for(s=c-i,i=c,n=0;u>n;n++)r=t[n],o=r.gPoint,o.direction=Math.atan2(o.currentPos.y-r.lastPos.y,o.currentPos.x-r.lastPos.x),a=r.lastPos.distanceTo(o.currentPos),r.lastPos=o.currentPos,l=1e3*a/(s+1),o.speed=.75*l+.25*o.speed},s=function(s,a){var l=r(s,a);t.push({guid:l,gPoint:a,lastPos:a.currentPos}),1===t.length&&(i=e.now(),n=window.setInterval(o,50))},a=function(e,i){var o,s=r(e,i),a=t.length;for(o=0;a>o;o++)if(t[o].guid===s){t.splice(o,1),a--,0===a&&window.clearInterval(n);break}};return{addPoint:s,removePoint:a}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor==e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.supportsMouseCapture=function(){var t=document.createElement("div");return e.isFunction(t.setCapture)&&e.isFunction(t.releaseCapture)}(),e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",e.MouseTracker.wheelEventName],"DOMMouseScroll"==e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||e.Browser.vendor!==e.BROWSERS.IE)?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),e.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):(e.MouseTracker.havePointerEvents=!1,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?(e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),e.MouseTracker.haveMouseEnter=!0):(e.MouseTracker.subscribeEvents.push("mouseover","mouseout"),e.MouseTracker.haveMouseEnter=!1),e.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.maxTouchPoints=10),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;n>t;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;n>t;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,n=this._gPoints.length;for(t=0;n>t;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,n,i){var r=t.parentNode;"number"==typeof n&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer="undefined"==typeof n.attachToViewer?!0:n.attachToViewer,this.autoFade="undefined"==typeof n.autoFade?!0:n.autoFade,this.element=t,this.anchor=n.anchor,this.container=i,this.anchor==e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==e.ControlAnchor.TOP_RIGHT||this.anchor==e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor==e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor==e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(OpenSeadragon),function(e){function t(e,t){var n,i=e.controls;for(n=i.length-1;n>=0;n--)if(i[n].element==t)return n;return-1}e.ControlDock=function(t){var n,i,r=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;i<r.length;i++)n=r[i],this.controls[n]=e.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,i){n=e.getElement(n);var r=null;if(!(t(this,n)>=0)){switch(i.anchor){case e.ControlAnchor.TOP_RIGHT:r=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:r=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:r=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case e.ControlAnchor.NONE:r=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new e.Control(n,i,r)),n.style.display="inline-block"}},removeControl:function(n){n=e.getElement(n);var i=t(this,n);return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(OpenSeadragon),function(e){function t(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function n(t,n,i,r){function o(e,t){e.ready?i(e):(e.addHandler("ready",function(){i(e)}),e.addHandler("open-failed",function(e){r({message:e.message,source:t})}))}var s=t;"string"==e.type(n)&&(n.match(/\s*<.*/)?n=e.parseXml(n):n.match(/\s*[\{\[].*/)&&(n=e.parseJSON(n))),setTimeout(function(){if("string"==e.type(n))n=new e.TileSource({url:n,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,useCanvas:t.useCanvas,success:function(e){i(e.tileSource)}}),n.addHandler("open-failed",function(e){r(e)});else if(e.isPlainObject(n)||n.nodeType)if(!n.crossOriginPolicy&&t.crossOriginPolicy&&(n.crossOriginPolicy=t.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=t.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=t.useCanvas),e.isFunction(n.getTileUrl)){var a=new e.TileSource(n);a.getTileUrl=n.getTileUrl,i(a)}else{var l=e.TileSource.determineType(s,n);if(!l)return void r({message:"Unable to load TileSource",source:n});var u=l.prototype.configure.apply(s,[n]);o(new l(u),n)}else o(n,n)})}function i(t,n){if(n instanceof e.Overlay)return n;var i=null;if(n.element)i=e.getElement(n.element);else{var r=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());i=e.getElement(n.id),i||(i=document.createElement("a"),i.href="#/overlay/"+r),i.id=r,e.addClass(i,n.className?n.className:"openseadragon-overlay")}var o=n.location;o||(o=n.width&&n.height?void 0!==n.px?t.viewport.imageToViewportRectangle(new e.Rect(n.px,n.py,n.width,n.height)):new e.Rect(n.x,n.y,n.width,n.height):void 0!==n.px?t.viewport.imageToViewportCoordinates(new e.Point(n.px,n.py)):new e.Point(n.x,n.y));var s=n.placement;return s&&"string"===e.type(s)&&(s=e.OverlayPlacement[n.placement.toUpperCase()]),new e.Overlay({element:i,location:o,placement:s,onDraw:n.onDraw,checkResize:n.checkResize})}function r(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n].element===t)return n;return-1}function o(t,n){return e.requestAnimationFrame(function(){n(t)})}function s(t){e.requestAnimationFrame(function(){l(t)})}function a(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout(function(){s(t)},t.controlsFadeDelay))}function l(t){var n,i,r,o;if(t.controlsShouldFade){for(n=e.now(),i=n-t.controlsFadeBeginTime,r=1-i/t.controlsFadeLength,r=Math.min(1,r),r=Math.max(0,r),o=t.controls.length-1;o>=0;o--)t.controls[o].autoFade&&t.controls[o].setOpacity(r);r>0&&s(t)}}function u(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function c(){u(this)}function h(){a(this)}function d(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints(),!1;case 40:return t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints(),!1;case 37:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints(),!1;case 39:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function f(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints(),!1;case 115:case 83:return t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints(),!1;case 97:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints(),!1;case 100:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function p(e){var t,n=document.activeElement==this.canvas;n||this.canvas.focus(),!e.preventDefaultAction&&this.viewport&&e.quick&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-click",{tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent})}function g(e){var t;!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-double-click",{tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent})}function m(e){var t;!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled),this.constrainDuringPan&&this.viewport.applyConstraints()),this.raiseEvent("canvas-drag",{tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent})}function v(t){var n;if(!t.preventDefaultAction&&this.viewport){if(n=this.gestureSettingsByDeviceType(t.pointerType),n.flickEnabled&&t.speed>=n.flickMinSpeed){var i=n.flickMomentum*(t.speed*Math.cos(t.direction-Math.PI/180*this.viewport.degrees)),r=n.flickMomentum*(t.speed*Math.sin(t.direction-Math.PI/180*this.viewport.degrees)),o=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),s=this.viewport.pointFromPixel(new e.Point(o.x-i,o.y-r));this.panHorizontal||(s.x=o.x),this.panVertical||(s.y=o.y),this.viewport.panTo(s,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function y(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function w(e){this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function S(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function x(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function T(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function b(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function E(e){var t,n,i,r;if(!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType),t.pinchToZoom&&(n=this.viewport.pointFromPixel(e.center,!0),i=this.viewport.pointFromPixel(e.lastCenter,!0),r=i.minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),this.viewport.panBy(r,!0),this.viewport.applyConstraints()),t.pinchRotate)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),s=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);
this.viewport.setRotation(this.viewport.getRotation()+(o-s)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function P(t){var n,i,r,o;return r=e.now(),o=r-this._lastScrollTime,o>this.minScrollDeltaTime?(this._lastScrollTime=r,!t.preventDefaultAction&&this.viewport&&(n=this.gestureSettingsByDeviceType(t.pointerType),n.scrollToZoom&&(i=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(i,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),n&&n.scrollToZoom?!1:void 0):!1}function _(e){q[this.hash].mouseInside=!0,u(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function O(e){e.pointers<1&&(q[this.hash].mouseInside=!1,q[this.hash].animating||a(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function C(e){R(e),e.isOpen()?e._updateRequestId=o(e,C):e._updateRequestId=!1}function R(e){if(!e._opening){var n;if(e.autoResize&&(n=t(e.container),!n.equals(q[e.hash].prevContainerSize))){if(e.preserveImageSizeOnResize){var i=q[e.hash].prevContainerSize,r=e.viewport.getBounds(!0),o=n.x-i.x,s=n.y-i.y,l=e.viewport.deltaPointsFromPixels(new OpenSeadragon.Point(o,s),!0);e.viewport.resize(new OpenSeadragon.Point(n.x,n.y),!1),r.width+=l.x,r.height+=l.y,r.x-=l.x/2,r.y-=l.y/2,e.viewport.fitBoundsWithConstraints(r,!0)}else{var c=e.viewport.getBounds(),h=e.viewport.getCenter();k(e,n,c,h)}q[e.hash].prevContainerSize=n,q[e.hash].forceRedraw=!0}var d=e.viewport.update(),f=e.world.update()||d;d&&e.raiseEvent("viewport-change"),e.referenceStrip&&(f=e.referenceStrip.update(e.viewport)||f),!q[e.hash].animating&&f&&(e.raiseEvent("animation-start"),u(e)),(f||q[e.hash].forceRedraw||e.world.needsDraw())&&(I(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),q[e.hash].forceRedraw=!1,f&&e.raiseEvent("animation")),q[e.hash].animating&&!f&&(e.raiseEvent("animation-finish"),q[e.hash].mouseInside||a(e)),q[e.hash].animating=f}}function k(t,n,i,r){var o=t.viewport;o.resize(n,!0);var s=new e.Rect(r.x-i.width/2,r.y-i.height/2,i.width,i.height);o.fitBoundsWithConstraints(s,!0)}function I(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}function F(e,t){return e?e+t:t}function M(){q[this.hash].lastZoomTime=e.now(),q[this.hash].zoomFactor=this.zoomPerSecond,q[this.hash].zooming=!0,L(this)}function D(){q[this.hash].lastZoomTime=e.now(),q[this.hash].zoomFactor=1/this.zoomPerSecond,q[this.hash].zooming=!0,L(this)}function A(){q[this.hash].zooming=!1}function L(t){e.requestAnimationFrame(e.delegate(t,z))}function z(){var t,n,i;q[this.hash].zooming&&this.viewport&&(t=e.now(),n=t-q[this.hash].lastZoomTime,i=Math.pow(q[this.hash].zoomFactor,n/1e3),this.viewport.zoomBy(i),this.viewport.applyConstraints(),q[this.hash].lastZoomTime=t,L(this))}function H(){this.viewport&&(q[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function N(){this.viewport&&(q[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function B(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function j(){this.viewport&&this.viewport.goHome()}function V(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function W(){if(this.viewport){var e=this.viewport.getRotation();0===e?e=270:e-=90,this.viewport.setRotation(e)}}function U(){if(this.viewport){var e=this.viewport.getRotation();270===e?e=0:e+=90,this.viewport.setRotation(e)}}function $(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&0>e&&(e+=this.tileSources.length),this.goToPage(e)}function G(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}var q={},Z=1;e.Viewer=function(n){var i,r=arguments,s=this;if(e.isPlainObject(n)||(n={id:r[0],xmlPath:r.length>1?r[1]:void 0,prefixUrl:r.length>2?r[2]:void 0,controls:r.length>3?r[3]:void 0,overlays:r.length>4?r[4]:void 0}),n.config&&(e.extend(!0,n,n.config),delete n.config),e.extend(!0,this,{id:n.id,hash:n.hash||Z++,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,n),"undefined"==typeof this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for("undefined"!=typeof q[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),q[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(t){var n=e.getString("Errors.OpenFailed",t.eventSource,t.message);s._showMessage(n)}),e.ControlDock.call(this,n),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(e){e.width="100%",e.height="100%",e.overflow="hidden",e.position="absolute",e.top="0px",e.left="0px"}(this.canvas.style),e.setElementTouchActionNone(this.canvas),this.canvas.tabIndex=n.tabIndex||0,this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:e.delegate(this,d),keyHandler:e.delegate(this,f),clickHandler:e.delegate(this,p),dblClickHandler:e.delegate(this,g),dragHandler:e.delegate(this,m),dragEndHandler:e.delegate(this,v),enterHandler:e.delegate(this,y),exitHandler:e.delegate(this,w),pressHandler:e.delegate(this,S),releaseHandler:e.delegate(this,x),nonPrimaryPressHandler:e.delegate(this,T),nonPrimaryReleaseHandler:e.delegate(this,b),scrollHandler:e.delegate(this,P),pinchHandler:e.delegate(this,E)}),this.outerTracker=new e.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,_),exitHandler:e.delegate(this,O)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),q[this.hash].prevContainerSize=t(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(e){s.source=s.world.getItemAt(0).source,q[s.hash].forceRedraw=!0,s._updateRequestId||(s._updateRequestId=o(s,C))}),this.world.addHandler("remove-item",function(e){s.world.getItemCount()?s.source=s.world.getItemAt(0).source:s.source=null,q[s.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(e){s.viewport&&s.viewport.setHomeBounds(s.world.getHomeBounds(),s.world.getContentFactor())}),this.world.addHandler("item-index-change",function(e){s.source=s.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:q[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport.setHomeBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(i=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(i,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(i=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(i,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),i=0;i<this.customControls.length;i++)this.addControl(this.customControls[i].id,{anchor:this.customControls[i].anchor});e.requestAnimationFrame(function(){a(s)})},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},open:function(t){var n=this;if(this.close(),t){if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}))),void this._updateSequenceButtons(this._sequenceIndex);if(e.isArray(t)||(t=[t]),t.length){this._opening=!0;for(var r,o=t.length,s=0,a=0,l=function(){if(s+a===o)if(s){!n._firstOpen&&n.preserveViewport||(n.viewport.goHome(!0),n.viewport.update()),n._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),n.overlays&&!n.preserveOverlays)for(var l=0;l<n.overlays.length;l++)n.currentOverlays[l]=i(n,n.overlays[l]);n._drawOverlays(),n._opening=!1,n.raiseEvent("open",{source:e})}else n._opening=!1,n.raiseEvent("open-failed",r)},u=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var i=t.success;t.success=function(e){if(s++,t.tileSource.overlays)for(var r=0;r<t.tileSource.overlays.length;r++)n.addOverlay(t.tileSource.overlays[r]);i&&i(e),l()};var o=t.error;t.error=function(e){a++,r||(r=e),o&&o(e),l()},n.addTiledImage(t)},c=0;c<t.length;c++)u(t[c]);return this}}},close:function(){return q[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),q[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(q[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),q[this.hash]=null,delete q[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisibile();return t},setControlsEnabled:function(e){return e?u(this):a(this),this.raiseEvent("controls-enabled",{enabled:e}),this},isFullPage:function(){return q[this.hash].fullPage},setFullPage:function(t){var n,i,r=document.body,o=r.style,s=document.documentElement.style,a=this;if(t==this.isFullPage())return this;var l={fullPage:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",l),l.preventDefaultAction)return this;if(t){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=o.margin,this.docMargin=s.margin,o.margin="0",s.margin="0",this.bodyPadding=o.padding,this.docPadding=s.padding,o.padding="0",s.padding="0",this.bodyWidth=o.width,this.bodyHeight=o.height,o.width="100%",o.height="100%",this.previousBody=[],q[this.hash].prevElementParent=this.element.parentNode,q[this.hash].prevNextSibling=this.element.nextSibling,q[this.hash].prevElementWidth=this.element.style.width,q[this.hash].prevElementHeight=this.element.style.height,n=r.childNodes.length,i=0;n>i;i++)this.previousBody.push(r.childNodes[0]),r.removeChild(r.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,r.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),r.appendChild(this.element),this.element.style.height=e.getWindowSize().y+"px",this.element.style.width=e.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),q[this.hash].fullPage=!0,e.delegate(this,_)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,o.margin=this.bodyMargin,s.margin=this.docMargin,o.padding=this.bodyPadding,s.padding=this.docPadding,o.width=this.bodyWidth,o.height=this.bodyHeight,r.removeChild(this.element),n=this.previousBody.length,i=0;n>i;i++)r.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),q[this.hash].prevElementParent.insertBefore(this.element,q[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(r.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=q[this.hash].prevElementWidth,this.element.style.height=q[this.hash].prevElementHeight;var u=0,c=function(){e.setPageScroll(a.pageScroll);var t=e.getPageScroll();u++,(10>u&&t.x!==a.pageScroll.x||t.y!==a.pageScroll.y)&&e.requestAnimationFrame(c)};e.requestAnimationFrame(c),q[this.hash].fullPage=!1,e.delegate(this,O)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:t}),this},setFullScreen:function(t){var n=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var i={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",i),i.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var r=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,r),e.removeEvent(document,e.fullScreenErrorEventName,r),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&n.navigator.update(n.viewport),n.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,r),e.addEvent(document,e.fullScreenErrorEventName,r),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){function i(e){for(var n=0;n<o._loadQueue.length;n++)if(o._loadQueue[n]===s){o._loadQueue.splice(n,1);break}0===o._loadQueue.length&&r(s),o.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function r(e){o.collectionMode&&(o.world.arrange({immediately:e.options.collectionImmediately,rows:o.collectionRows,columns:o.collectionColumns,layout:o.collectionLayout,tileSize:o.collectionTileSize,tileMargin:o.collectionTileMargin}),o.world.setAutoRefigureSizes(!0))}e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var o=this;t.replace&&(t.replaceItem=o.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity);var s={options:t};return e.isArray(t.tileSource)?void setTimeout(function(){i({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})}):(this._loadQueue.push(s),void n(this,t.tileSource,function(t){s.tileSource=t;for(var n,i,a;o._loadQueue.length&&(n=o._loadQueue[0],n.tileSource);){if(o._loadQueue.splice(0,1),n.options.replace){var l=o.world.getIndexOfItem(n.options.replaceItem);-1!=l&&(n.options.index=l),o.world.removeItem(n.options.replaceItem)}i=new e.TiledImage({viewer:o,source:n.tileSource,viewport:o.viewport,drawer:o.drawer,tileCache:o.tileCache,imageLoader:o.imageLoader,x:n.options.x,y:n.options.y,width:n.options.width,height:n.options.height,clip:n.options.clip,placeholderFillStyle:n.options.placeholderFillStyle,opacity:n.options.opacity,springStiffness:o.springStiffness,animationTime:o.animationTime,minZoomImageRatio:o.minZoomImageRatio,wrapHorizontal:o.wrapHorizontal,wrapVertical:o.wrapVertical,immediateRender:o.immediateRender,blendTime:o.blendTime,alwaysBlend:o.alwaysBlend,minPixelRatio:o.minPixelRatio,crossOriginPolicy:o.crossOriginPolicy,debugMode:o.debugMode}),o.collectionMode&&o.world.setAutoRefigureSizes(!1),o.world.addItem(i,{index:n.options.index}),0===o._loadQueue.length&&r(n),1!==o.world.getItemCount()||o.preserveViewport||o.viewport.goHome(!0),o.navigator&&(a=e.extend({},n.options,{originalTiledImage:i,tileSource:n.tileSource}),o.navigator.addTiledImage(a)),n.options.success&&n.options.success({item:i})}},function(e){e.options=t,i(e)}))},addLayer:function(t){var n=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var i=e.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(i),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,n){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,n)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return q[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=e.delegate(this,c),n=e.delegate(this,h),i=e.delegate(this,G),r=e.delegate(this,$),o=this.navImages,s=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(s=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:F(this.prefixUrl,o.previous.REST),srcGroup:F(this.prefixUrl,o.previous.GROUP),srcHover:F(this.prefixUrl,o.previous.HOVER),srcDown:F(this.prefixUrl,o.previous.DOWN),onRelease:r,onFocus:t,onBlur:n}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:F(this.prefixUrl,o.next.REST),srcGroup:F(this.prefixUrl,o.next.GROUP),srcHover:F(this.prefixUrl,o.next.HOVER),srcDown:F(this.prefixUrl,o.next.DOWN),onRelease:i,onFocus:t,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),s&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,M),n=e.delegate(this,A),i=e.delegate(this,H),r=e.delegate(this,D),o=e.delegate(this,N),s=e.delegate(this,j),a=e.delegate(this,V),l=e.delegate(this,W),u=e.delegate(this,U),d=e.delegate(this,c),f=e.delegate(this,h),p=this.navImages,g=[],m=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton)&&(m=!1),this.showZoomControl&&(g.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:F(this.prefixUrl,p.zoomIn.REST),srcGroup:F(this.prefixUrl,p.zoomIn.GROUP),srcHover:F(this.prefixUrl,p.zoomIn.HOVER),srcDown:F(this.prefixUrl,p.zoomIn.DOWN),onPress:t,onRelease:n,onClick:i,onEnter:t,onExit:n,onFocus:d,onBlur:f})),g.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:F(this.prefixUrl,p.zoomOut.REST),srcGroup:F(this.prefixUrl,p.zoomOut.GROUP),srcHover:F(this.prefixUrl,p.zoomOut.HOVER),srcDown:F(this.prefixUrl,p.zoomOut.DOWN),onPress:r,onRelease:n,onClick:o,onEnter:r,onExit:n,onFocus:d,onBlur:f}))),this.showHomeControl&&g.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:F(this.prefixUrl,p.home.REST),srcGroup:F(this.prefixUrl,p.home.GROUP),srcHover:F(this.prefixUrl,p.home.HOVER),srcDown:F(this.prefixUrl,p.home.DOWN),onRelease:s,onFocus:d,onBlur:f})),this.showFullPageControl&&g.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:F(this.prefixUrl,p.fullpage.REST),srcGroup:F(this.prefixUrl,p.fullpage.GROUP),srcHover:F(this.prefixUrl,p.fullpage.HOVER),srcDown:F(this.prefixUrl,p.fullpage.DOWN),onRelease:a,onFocus:d,onBlur:f})),this.showRotationControl&&(g.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:F(this.prefixUrl,p.rotateleft.REST),srcGroup:F(this.prefixUrl,p.rotateleft.GROUP),srcHover:F(this.prefixUrl,p.rotateleft.HOVER),srcDown:F(this.prefixUrl,p.rotateleft.DOWN),onRelease:l,onFocus:d,onBlur:f})),g.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:F(this.prefixUrl,p.rotateright.REST),srcGroup:F(this.prefixUrl,p.rotateright.GROUP),srcHover:F(this.prefixUrl,p.rotateright.HOVER),srcDown:F(this.prefixUrl,p.rotateright.DOWN),onRelease:u,onFocus:d,onBlur:f}))),m&&(this.buttons=new e.ButtonGroup({buttons:g,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",e.delegate(this,B)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this.raiseEvent("page",{page:e}),this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e)),this},addOverlay:function(t,n,o,s){var a;if(a=e.isPlainObject(t)?t:{element:t,location:n,placement:o,onDraw:s},t=e.getElement(a.element),r(this.currentOverlays,t)>=0)return this;var l=i(this,a);return this.currentOverlays.push(l),l.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:a.location,placement:a.placement}),this},updateOverlay:function(t,n,i){var o;return t=e.getElement(t),o=r(this.currentOverlays,t),o>=0&&(this.currentOverlays[o].update(n,i),q[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:t,location:n,placement:i})),this},removeOverlay:function(t){var n;return t=e.getElement(t),n=r(this.currentOverlays,t),n>=0&&(this.currentOverlays[n].destroy(),this.currentOverlays.splice(n,1),q[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:t})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return q[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var n=e.makeNeutralElement("div");n.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(n),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;t>e;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]}})}(OpenSeadragon),function(e){function t(e){e.quick&&this.viewer.viewport&&(this.viewer.viewport.panTo(this.viewport.pointFromPixel(e.position).rotate(-this.viewer.viewport.degrees,this.viewer.viewport.getHomeBounds().getCenter())),this.viewer.viewport.applyConstraints())}function n(e){this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)))}function i(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function o(e,t){e.style.webkitTransform="rotate("+t+"deg)",e.style.mozTransform="rotate("+t+"deg)",e.style.msTransform="rotate("+t+"deg)",e.style.oTransform="rotate("+t+"deg)",e.style.transform="rotate("+t+"deg)"}e.Navigator=function(s){var a,l,u=s.viewer,c=this;s.id?(this.element=document.getElementById(s.id),s.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),s.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:!0},s.position&&("BOTTOM_RIGHT"==s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"==s.position&&(s.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",s=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:s.autoResize,minZoomImageRatio:1}),s.minPixelRatio=this.minPixelRatio=u.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),
this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!=e.ControlAnchor.NONE&&!function(e,t){e.margin="0px",e.border=t+"px solid #555",e.padding="0px",e.background="#000",e.opacity=.8,e.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid #900",e.margin="0px",e.padding="0px",e.background="transparent",e["float"]="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",u.addControl(this.element,s.controlOptions),this._resizeWithViewer=s.controlOptions.anchor!=e.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!=e.ControlAnchor.NONE,this._resizeWithViewer&&(s.width&&s.height?(this.element.style.height="number"==typeof s.height?s.height+"px":s.height,this.element.style.width="number"==typeof s.width?s.width+"px":s.width):(a=e.getElementSize(u.element),this.element.style.height=Math.round(a.y*s.sizeRatio)+"px",this.element.style.width=Math.round(a.x*s.sizeRatio)+"px",this.oldViewerSize=a),l=e.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),s.navigatorRotate&&s.viewer.addHandler("rotate",function(e){o(c.displayRegionContainer,e.degrees),o(c.displayRegion,-e.degrees),c.viewport.setRotation(e.degrees)}),this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,i),scrollHandler:e.delegate(this,r)}),this.addHandler("reset-size",function(){c.viewport&&c.viewport.goHome(!0)}),this.addHandler("reset-size",function(){c.viewport&&c.viewport.goHome(!0)}),u.world.addHandler("item-index-change",function(e){var t=c.world.getItemAt(e.previousIndex);c.world.setItemIndex(t,e.newIndex)}),u.world.addHandler("remove-item",function(e){var t=e.item,n=c._getMatchingItem(t);n&&c.world.removeItem(n)}),this.update(u.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},update:function(t){var n,i,r,o,s,a;if(n=e.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(i=n.x*this.sizeRatio,r=n.y*this.sizeRatio):(i=Math.sqrt(this.elementArea*(n.x/n.y)),r=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=i*r),this.updateSize()),t&&this.viewport){o=t.getBounds(!0),s=this.viewport.pixelFromPoint(o.getTopLeft(),!1),a=this.viewport.pixelFromPoint(o.getBottomRight(),!1).minus(this.totalBorderWidths);var l=this.displayRegion.style;l.display=this.world.getItemCount()?"block":"none",l.top=Math.round(s.y)+"px",l.left=Math.round(s.x)+"px";var u=Math.abs(s.x-a.x),c=Math.abs(s.y-a.y);l.width=Math.round(Math.max(u,0))+"px",l.height=Math.round(Math.max(c,0))+"px"}},addTiledImage:function(t){var n=this,i=t.originalTiledImage;delete t.original;var r=e.extend({},t,{success:function(e){var t=e.item;t._originalForNavigator=i,n._matchBounds(t,i,!0),i.addHandler("bounds-change",function(){n._matchBounds(t,i)})}});return e.Viewer.prototype.addTiledImage.apply(this,[r])},_getMatchingItem:function(e){for(var t,n=this.world.getItemCount(),i=0;n>i;i++)if(t=this.world.getItemAt(i),t._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var i=t.getBounds();e.setPosition(i.getTopLeft(),n),e.setWidth(i.width,n)}})}(OpenSeadragon),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};e.extend(e,{getString:function(n){var i,r=n.split("."),o=null,s=arguments,a=t;for(i=0;i<r.length-1;i++)a=a[r[i]]||{};return o=a[r[i]],"string"!=typeof o&&(e.console.debug("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<s.length?s[t]:""})},setString:function(e,n){var i,r=e.split("."),o=t;for(i=0;i<r.length-1;i++)o[r[i]]||(o[r[i]]={}),o=o[r[i]];o[r[i]]=n}})}(OpenSeadragon),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,n){var i=t*Math.PI/180,r=Math.cos(i)*(this.x-n.x)-Math.sin(i)*(this.y-n.y)+n.x,o=Math.sin(i)*(this.x-n.x)+Math.cos(i)*(this.y-n.y)+n.y;return new e.Point(r,o)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){function t(t){var n,i,r=t.responseText,o=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw o=t.status,n=404==o?"Not Found":t.statusText,new Error(e.getString("Errors.Status",o,n));if(r.match(/\s*<.*/))try{i=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(r)}catch(s){i=t.responseText}else i=r.match(/\s*[\{\[].*/)?e.parseJSON(r):r;return i}e.TileSource=function(t,n,i,r,o,s){var a,l,u=this,c=arguments;if(a=e.isPlainObject(t)?t:{width:c[0],height:c[1],tileSize:c[2],tileOverlap:c[3],minLevel:c[4],maxLevel:c[5]},e.EventSource.call(this),e.extend(!0,this,a),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",function(e){u.success(e)}),"string"==e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new e.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated.Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,n={};for(t=0;t<=this.maxLevel;t++)n[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return n[e]},this.getLevelScale(e)},getNumTiles:function(t){var n=this.getLevelScale(t),i=Math.ceil(n*this.dimensions.x/this.getTileWidth(t)),r=Math.ceil(n*this.dimensions.y/this.getTileHeight(t));return new e.Point(i,r)},getPixelRatio:function(t){var n=this.dimensions.times(this.getLevelScale(t)),i=1/n.x,r=1/n.y;return new e.Point(i,r)},getClosestLevel:function(t){var n,i,r;for(n=this.minLevel;n<this.maxLevel&&(r=this.getNumTiles(n),i=new e.Point(Math.floor(t.x/this.getTileWidth(n)),Math.floor(t.y/this.getTileHeight(n))),!(r.x+1>=i.x&&r.y+1>=i.y));n++);return Math.max(0,n-1)},getTileAtPoint:function(t,n){var i=n.times(this.dimensions.x).times(this.getLevelScale(t)),r=Math.floor(i.x/this.getTileWidth(t)),o=Math.floor(i.y/this.getTileHeight(t));return new e.Point(r,o)},getTileBounds:function(t,n,i){var r=this.dimensions.times(this.getLevelScale(t)),o=this.getTileWidth(t),s=this.getTileHeight(t),a=0===n?0:o*n-this.tileOverlap,l=0===i?0:s*i-this.tileOverlap,u=o+(0===n?1:2)*this.tileOverlap,c=s+(0===i?1:2)*this.tileOverlap,h=1/r.x;return u=Math.min(u,r.x-a),c=Math.min(c,r.y-l),new e.Rect(a*h,l*h,u*h,c*h)},getImageInfo:function(n){var i,r,o,s,a,l,u,c=this;n&&(a=n.split("/"),l=a[a.length-1],u=l.lastIndexOf("."),u>-1&&(a[a.length-1]=l.slice(0,u))),r=function(t){"string"==typeof t&&(t=e.parseXml(t));var i=e.TileSource.determineType(c,t,n);return i?(s=i.prototype.configure.apply(c,[t,n]),void 0===s.ajaxWithCredentials&&(s.ajaxWithCredentials=c.ajaxWithCredentials),o=new i(s),c.ready=!0,void c.raiseEvent("ready",{tileSource:o})):void c.raiseEvent("open-failed",{message:"Unable to load TileSource",source:n})},n.match(/\.js$/)?(i=n.split("/").pop().replace(".js",""),e.jsonp({url:n,async:!1,callbackName:i,callback:r})):e.makeAjaxRequest({url:n,withCredentials:this.ajaxWithCredentials,success:function(e){var n=t(e);r(n)},error:function(e,t){var i;try{i="HTTP "+e.status+" attempting to load TileSource"}catch(r){var o;o="undefined"!=typeof t&&t.toString?t.toString():"Unknown error",i=o+" attempting to load TileSource"}c.raiseEvent("open-failed",{message:i,source:n})}})},supports:function(e,t){return!1},configure:function(e,t){throw new Error("Method not implemented.")},getTileUrl:function(e,t,n){throw new Error("Method not implemented.")},tileExists:function(e,t,n){var i=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&n>=0&&t<i.x&&n<i.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,n,i){var r;for(r in OpenSeadragon)if(r.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[r])&&e.isFunction(OpenSeadragon[r].prototype.supports)&&OpenSeadragon[r].prototype.supports.call(t,n,i))return OpenSeadragon[r];e.console.error("No TileSource was able to open %s %s",i,n)}}(OpenSeadragon),function(e){function t(t,i){if(!i||!i.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s,a,l,u=i.documentElement,c=u.localName||u.tagName,h=i.documentElement.namespaceURI,d=null,f=[];if("Image"==c)try{if(a=u.getElementsByTagName("Size")[0],void 0===a&&(a=u.getElementsByTagNameNS(h,"Size")[0]),d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:u.getAttribute("Url"),Format:u.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(u.getAttribute("Overlap"),10),TileSize:parseInt(u.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!e.imageFormatSupported(d.Image.Format))throw new Error(e.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(r=u.getElementsByTagName("DisplayRect"),void 0===r&&(r=u.getElementsByTagNameNS(h,"DisplayRect")[0]),l=0;l<r.length;l++)o=r[l],s=o.getElementsByTagName("Rect")[0],void 0===s&&(s=o.getElementsByTagNameNS(h,"Rect")[0]),f.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return f.length&&(d.Image.DisplayRect=f),n(t,d)}catch(p){throw p instanceof Error?p:new Error(e.getString("Errors.Dzi"))}else{if("Collection"==c)throw new Error(e.getString("Errors.Dzc"));if("Error"==c)return e._processDZIError(u)}throw new Error(e.getString("Errors.Dzi"))}function n(t,n){var i,r,o=n.Image,s=o.Url,a=o.Format,l=o.Size,u=o.DisplayRect||[],c=parseInt(l.Width,10),h=parseInt(l.Height,10),d=parseInt(o.TileSize,10),f=parseInt(o.Overlap,10),p=[];for(r=0;r<u.length;r++)i=u[r].Rect,p.push(new e.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return e.extend(!0,{width:c,height:h,tileSize:d,tileOverlap:f,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:p},n)}e.DziTileSource=function(t,n,i,r,o,s,a,l,u){var c,h,d,f;if(f=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=f.tilesUrl,this.fileFormat=f.fileFormat,this.displayRects=f.displayRects,this.displayRects)for(c=this.displayRects.length-1;c>=0;c--)for(h=this.displayRects[c],d=h.minLevel;d<=h.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(h);e.TileSource.apply(this,[f])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var n;return e.Image?n=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(n=e.documentElement.namespaceURI)),"http://schemas.microsoft.com/deepzoom/2008"==n||"http://schemas.microsoft.com/deepzoom/2009"==n},configure:function(i,r){var o;return o=e.isPlainObject(i)?n(this,i):t(this,i),r&&!o.tilesUrl&&(o.tilesUrl=r.replace(/([^\/]+)\.(dzi|xml|js)(\?.*|$)/,"$1_files/"),-1!=r.search(/\.(dzi|xml|js)\?/)?o.queryParams=r.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var i,r,o,s,a,l,u,c=this._levelRects[e];if(!c||!c.length)return!0;for(u=c.length-1;u>=0;u--)if(i=c[u],!(e<i.minLevel||e>i.maxLevel)&&(r=this.getLevelScale(e),o=i.x*r,s=i.y*r,a=o+i.width*r,l=s+i.height*r,o=Math.floor(o/this.tileSize),s=Math.floor(s/this.tileSize),a=Math.ceil(a/this.tileSize),l=Math.ceil(l/this.tileSize),t>=o&&a>t&&n>=s&&l>n))return!0;return!1}})}(OpenSeadragon),function(e){function t(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var i=t.documentElement,r=i.tagName,o=null;if("info"==r)try{return o={},n(i,o),o}catch(s){throw s instanceof Error?s:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}function n(t,i,r){var o,s;if(3==t.nodeType&&r)s=t.nodeValue.trim(),s.match(/^\d*$/)&&(s=Number(s)),i[r]?(e.isArray(i[r])||(i[r]=[i[r]]),i[r].push(s)):i[r]=s;else if(1==t.nodeType)for(o=0;o<t.childNodes.length;o++)n(t.childNodes[o],i,t.nodeName)}e.IIIFTileSource=function(t){if(e.extend(!0,this,t),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(t.tileSizePerScaleFactor={},this.tile_width&&this.tile_height)t.tileWidth=this.tile_width,t.tileHeight=this.tile_height;else if(this.tile_width)t.tileSize=this.tile_width;else if(this.tile_height)t.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)t.tileWidth=this.tiles[0].width,t.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var n=0;n<this.tiles.length;n++)for(var i=0;i<this.tiles[n].scaleFactors.length;i++){var r=this.tiles[n].scaleFactors[i];this.scale_factors.push(r),t.tileSizePerScaleFactor[r]={width:this.tiles[n].width,height:this.tiles[n].height||this.tiles[n].width}}}else{for(var o=Math.min(this.height,this.width),s=[256,512,1024],a=[],l=0;l<s.length;l++)s[l]<=o&&a.push(s[l]);a.length>0?t.tileSize=Math.max.apply(null,a):t.tileSize=o}t.maxLevel||(this.scale_factors?t.maxLevel=Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):t.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)))),e.TileSource.apply(this,[t])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.protocol&&"http://iiif.io/api/image"==e.protocol?!0:!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=e["@context"]&&"http://iiif.io/api/image/1/context.json"!=e["@context"]?e.profile&&0===e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")?!0:e.identifier&&e.width&&e.height?!0:!(!e.documentElement||"info"!=e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=e.documentElement.namespaceURI):!0},configure:function(n,i){if(e.isPlainObject(n))return n["@context"]?n:(n["@context"]="http://iiif.io/api/image/1.0/context.json",n["@id"]=i.replace("/info.json",""),n);var r=t(n);return r["@context"]="http://iiif.io/api/image/1.0/context.json",r["@id"]=i.replace("/info.xml",""),r},getTileWidth:function(e){var t=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[t]?this.tileSizePerScaleFactor[t].width:this._tileWidth},getTileHeight:function(e){var t=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[t]?this.tileSizePerScaleFactor[t].height:this._tileHeight},getTileUrl:function(e,t,n){var i,r,o,s,a,l,u,c,h,d,f,p,g="0",m=Math.pow(.5,this.maxLevel-e),v=Math.ceil(this.width*m),y=Math.ceil(this.height*m);return i=this.getTileWidth(e),r=this.getTileHeight(e),o=Math.ceil(i/m),s=Math.ceil(r/m),f=this["@context"].indexOf("/1.0/context.json")>-1||this["@context"].indexOf("/1.1/context.json")>-1||this["@context"].indexOf("/1/context.json")>-1?"native.jpg":"default.jpg",i>v&&r>y?(d=v+",",a="full"):(l=t*o,u=n*s,c=Math.min(o,this.width-l),h=Math.min(s,this.height-u),d=Math.ceil(c*m)+",",a=[l,u,c,h].join(",")),p=[this["@id"],a,d,g,f].join("/")}})}(OpenSeadragon),function(e){e.OsmTileSource=function(t,n,i,r,o){var s;s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},s.width&&s.height||(s.width=65572864,s.height=65572864),s.tileSize||(s.tileSize=256,s.tileOverlap=0),s.tilesUrl||(s.tilesUrl="http://tile.openstreetmap.org/"),s.minLevel=8,e.TileSource.apply(this,[s])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(t,n,i,r,o){var s;s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,l=256*Math.ceil(s.width/256),u=256*Math.ceil(s.height/256);a=l>u?l/256:u/256,s.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,s.tileSize=256,s.width=l,s.height=u,e.TileSource.apply(this,[s])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,n){var i=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(i-n)+".png"}})}(OpenSeadragon),function(e){function t(t){var n,i,r=[];for(i=0;i<t.length;i++)n=t[i],n.height&&n.width&&n.url&&(n.url.toLowerCase().match(/^.*\.(png|jpg|jpeg|gif)$/)||n.mimetype&&n.mimetype.toLowerCase().match(/^.*\/(png|jpg|jpeg|gif)$/))?r.push({url:n.url,width:Number(n.width),height:Number(n.height)}):e.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return r.sort(function(e,t){return e.height-t.height})}function n(t,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s=n.documentElement,a=s.tagName,l=null,u=[];if("image"==a)try{for(l={type:s.getAttribute("type"),levels:[]},u=s.getElementsByTagName("level"),o=0;o<u.length;o++)r=u[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return i(t,l)}catch(c){throw c instanceof Error?c:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw new Error("Error: "+n)}throw new Error("Unknown element "+a)}function i(e,t){return t.levels}e.LegacyTileSource=function(n){var i,r,o;e.isArray(n)&&(i={type:"legacy-image-pyramid",levels:n}),i.levels=t(i.levels),i.levels.length>0?(r=i.levels[i.levels.length-1].width,o=i.levels[i.levels.length-1].height):(r=0,o=0,e.console.error("No supported image formats found")),e.extend(!0,i,{width:r,height:o,tileSize:Math.max(o,r),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),e.TileSource.apply(this,[i]),this.levels=i.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(t,r){var o;return o=e.isPlainObject(t)?i(this,t):n(this,t)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)},getTileAtPoint:function(t,n){return new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i}})}(OpenSeadragon),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t){return e},getImageInfo:function(t){var n=this._image=new Image,i=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",function(){i.width=n.naturalWidth,i.height=n.naturalHeight,i.aspectRatio=i.width/i.height,i.dimensions=new e.Point(i.width,i.height),i._tileWidth=i.width,i._tileHeight=i.height,i.tileOverlap=0,i.minLevel=0,i.levels=i._buildLevels(),i.maxLevel=i.levels.length-1,i.ready=!0,i.raiseEvent("ready",{tileSource:i})}),e.addEvent(n,"error",function(){i.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})}),n.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){var n=this.getLevelScale(t);return n?new e.Point(1,1):new e.Point(0,0)},getTileAtPoint:function(t,n){return new e.Point(0,0)},getTileUrl:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].url),i},getContext2D:function(e,t,n){var i=null;return e>=this.minLevel&&e<=this.maxLevel&&(i=this.levels[e].context2D),i},_buildLevels:function(){var t=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var n=this._image.naturalWidth,i=this._image.naturalHeight,r=document.createElement("canvas"),o=r.getContext("2d");if(r.width=n,r.height=i,o.drawImage(this._image,0,0,n,i),t[0].context2D=o,delete this._image,e.isCanvasTainted(r))return t;for(;n>=2&&i>=2;){n=Math.floor(n/2),i=Math.floor(i/2);var s=document.createElement("canvas"),a=s.getContext("2d");s.width=n,s.height=i,a.drawImage(r,0,0,n,i),t.splice(0,0,{context2D:a,width:n,height:i}),r=s,o=a}return t}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(t,n,i,r){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function t(t){e.requestAnimationFrame(function(){n(t)})}function n(n){var i,r,o;n.shouldFade&&(i=e.now(),r=i-n.fadeBeginTime,o=1-r/n.fadeLength,o=Math.min(1,o),o=Math.max(0,o),n.imgGroup&&e.setElementOpacity(n.imgGroup,o,!0),o>0&&t(n))}function i(n){n.shouldFade=!0,n.fadeBeginTime=e.now()+n.fadeDelay,window.setTimeout(function(){t(n)},n.fadeDelay)}function r(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}function o(t,n){t.element.disabled||(n>=e.ButtonState.GROUP&&t.currentState==e.ButtonState.REST&&(r(t),t.currentState=e.ButtonState.GROUP),n>=e.ButtonState.HOVER&&t.currentState==e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),n>=e.ButtonState.DOWN&&t.currentState==e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function s(t,n){t.element.disabled||(n<=e.ButtonState.HOVER&&t.currentState==e.ButtonState.DOWN&&(t.imgDown&&(t.imgDown.style.visibility="hidden"),t.currentState=e.ButtonState.HOVER),n<=e.ButtonState.GROUP&&t.currentState==e.ButtonState.HOVER&&(t.imgHover&&(t.imgHover.style.visibility="hidden"),t.currentState=e.ButtonState.GROUP),n<=e.ButtonState.REST&&t.currentState==e.ButtonState.GROUP&&(i(t),t.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var n=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor==e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(o(n,e.ButtonState.DOWN),n.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||o(n,e.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),n.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(t){s(n,e.ButtonState.GROUP),t.insideElementPressed&&n.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){this.exitHandler(e),n.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){o(n,e.ButtonState.DOWN),n.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(s(n,e.ButtonState.HOVER),n.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?s(n,e.ButtonState.GROUP):o(n,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&n.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13===e.keyCode?(n.raiseEvent("click",{originalEvent:e.originalEvent}),n.raiseEvent("release",{originalEvent:e.originalEvent}),!1):!0}}),s(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){o(this,e.ButtonState.GROUP)},notifyGroupExit:function(){s(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var n,i=this.buttons.concat([]),r=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.label=e.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),n=0;n<i.length;n++)this.element.appendChild(i[n].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(e){e.Rect=function(e,t,n,i){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.width="number"==typeof n?n:0,this.height="number"==typeof i?i:0},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height)},getTopRight:function(){return new e.Point(this.x+this.width,this.y)},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height)},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2)},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},times:function(e){return new OpenSeadragon.Rect(this.x*e,this.y*e,this.width*e,this.height*e)},union:function(e){var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);return new OpenSeadragon.Rect(t,n,i-t,r-n);
},rotate:function(t,n){var i,r=this.width,o=this.height;if(t=(t+360)%360,t%90!==0)throw new Error("Currently only 0, 90, 180, and 270 degrees are supported.");if(0===t)return new e.Rect(this.x,this.y,this.width,this.height);switch(n=n||this.getCenter(),t){case 90:i=this.getBottomLeft(),r=this.height,o=this.width;break;case 180:i=this.getBottomRight();break;case 270:i=this.getTopRight(),r=this.height,o=this.width;break;default:i=this.getTopLeft()}return i=i.rotate(t,n),new e.Rect(i.x,i.y,r,o)},toString:function(){return"["+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+","+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+"]"}}}(OpenSeadragon),function(e){function t(t){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-t.delta.x>0?n>-(o-a.x)&&(this.element.style.marginLeft=n+2*t.delta.x+"px",i(this,a.x,n+2*t.delta.x)):-t.delta.x<0&&0>n&&(this.element.style.marginLeft=n+2*t.delta.x+"px",i(this,a.x,n+2*t.delta.x)):-t.delta.y>0?r>-(s-a.y)&&(this.element.style.marginTop=r+2*t.delta.y+"px",i(this,a.y,r+2*t.delta.y)):-t.delta.y<0&&0>r&&(this.element.style.marginTop=r+2*t.delta.y+"px",i(this,a.y,r+2*t.delta.y))),!1}function n(t){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?t.scroll>0?n>-(o-a.x)&&(this.element.style.marginLeft=n-60*t.scroll+"px",i(this,a.x,n-60*t.scroll)):t.scroll<0&&0>n&&(this.element.style.marginLeft=n-60*t.scroll+"px",i(this,a.x,n-60*t.scroll)):t.scroll<0?r>a.y-s&&(this.element.style.marginTop=r+60*t.scroll+"px",i(this,a.y,r+60*t.scroll)):t.scroll>0&&0>r&&(this.element.style.marginTop=r+60*t.scroll+"px",i(this,a.y,r+60*t.scroll))),!1}function i(t,n,i){var r,o,s,a,l,u,c;for(r="horizontal"==t.scroll?t.panelWidth:t.panelHeight,o=Math.ceil(n/r)+5,s=Math.ceil((Math.abs(i)+n)/r)+1,o=s-o,o=0>o?0:o,u=o;s>u&&u<t.panels.length;u++)c=t.panels[u],c.activePanel||(a=new e.Viewer({id:c.id,tileSources:[t.viewer.tileSources[u]],element:c,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),a.displayRegion=e.makeNeutralElement("textarea"),a.displayRegion.id=c.id+"-displayregion",a.displayRegion.className="displayregion",l=a.displayRegion.style,l.position="relative",l.top="0px",l.left="0px",l.fontSize="0px",l.overflow="hidden",l["float"]="left",l.cssFloat="left",l.styleFloat="left",l.zIndex=999999999,l.cursor="default",l.width=t.panelWidth-4+"px",l.height=t.panelHeight-4+"px",a.displayRegion.innerTracker=new e.MouseTracker({element:a.displayRegion,startDisabled:!0}),c.getElementsByTagName("div")[0].appendChild(a.displayRegion),c.activePanel=!0)}function r(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function o(t){var n=t.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+e.getElementSize(n).y/2+"px":n.style.marginLeft="-"+e.getElementSize(n).x/2+"px",!1}function s(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function a(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}var l={};e.ReferenceStrip=function(u){var c,h,d,f=this,p=u.viewer,g=e.getElementSize(p.element);for(u.id||(u.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=u.id,this.element.className="referencestrip"),u=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},u,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),e.extend(this,u),l[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,h=this.element.style,h.marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=p,this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,t),scrollHandler:e.delegate(this,n),enterHandler:e.delegate(this,r),exitHandler:e.delegate(this,o),keyDownHandler:e.delegate(this,s),keyHandler:e.delegate(this,a)}),u.width&&u.height?(this.element.style.width=u.width+"px",this.element.style.height=u.height+"px",p.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"==u.scroll?(this.element.style.width=g.x*u.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.height=g.y*u.sizeRatio+"px",p.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=g.y*u.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.width=g.x*u.sizeRatio+"px",p.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=g.x*this.sizeRatio+8,this.panelHeight=g.y*this.sizeRatio+8,this.panels=[],d=0;d<p.tileSources.length;d++)c=e.makeNeutralElement("div"),c.id=this.element.id+"-"+d,c.style.width=f.panelWidth+"px",c.style.height=f.panelHeight+"px",c.style.display="inline",c.style["float"]="left",c.style.cssFloat="left",c.style.styleFloat="left",c.style.padding="2px",e.setElementTouchActionNone(c),c.innerTracker=new e.MouseTracker({element:c,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(t){t.eventSource.dragging=e.now()},releaseHandler:function(t){var n=t.eventSource,i=n.element.id,r=Number(i.split("-")[2]),o=e.now();t.insideElementPressed&&t.insideElementReleased&&n.dragging&&o-n.dragging<n.clickTimeThreshold&&(n.dragging=null,p.goToPage(r))}}),this.element.appendChild(c),c.activePanel=!1,this.panels.push(c);i(this,"vertical"==this.scroll?g.y:g.x,0),this.setFocus(0)},e.extend(e.ReferenceStrip.prototype,e.EventSource.prototype,e.Viewer.prototype,{setFocus:function(t){var n,o=e.getElement(this.element.id+"-"+t),s=e.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==o&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=o,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(t)*(this.panelWidth+3),n>u+s.x-this.panelWidth?(n=Math.min(n,a-s.x),this.element.style.marginLeft=-n+"px",i(this,s.x,-n)):u>n&&(n=Math.max(0,n-s.x/2),this.element.style.marginLeft=-n+"px",i(this,s.x,-n))):(n=Number(t)*(this.panelHeight+3),n>c+s.y-this.panelHeight?(n=Math.min(n,l-s.y),this.element.style.marginTop=-n+"px",i(this,s.y,-n)):c>n&&(n=Math.max(0,n-s.y/2),this.element.style.marginTop=-n+"px",i(this,s.y,-n))),this.currentPage=t,e.getElement(o.id+"-displayregion").focus(),r.call(this,{eventSource:this.innerTracker}))},update:function(){return l[this.id].animating?(e.console.log("image reference strip update"),!0):!1},destroy:function(){this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(e){e.DisplayRect=function(t,n,i,r,o,s){e.Rect.apply(this,[t,n,i,r]),this.minLevel=o,this.maxLevel=s},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){function t(e,t){return(1-Math.exp(e*-t))/(1-Math.exp(-e))}e.Spring=function(t){var n=arguments;"object"!=typeof t&&(t={initial:n.length&&"number"==typeof n[0]?n[0]:void 0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.animationTime must be a non-zero number"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=e.now();var n,i;this._exponential?(n=this.start._logValue,i=this.target._logValue):(n=this.start.value,i=this.target.value);var r=this.current.time>=this.target.time?i:n+(i-n)*t(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time));this._exponential?this.current.value=Math.exp(r):this.current.value=r}}}(OpenSeadragon),function(e){function t(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},t),this.image=null}function n(e,t,n){var i;e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(i=e.jobQueue.shift(),i.start(),e.jobsInProgress++),n(t.image,t.errorMsg)}t.prototype={errorMsg:null,start:function(){var e=this;this.image=new Image,this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.onload=function(){e.finish(!0)},this.image.onabort=this.image.onerror=function(){e.errorMsg="Image load aborted",e.finish(!1)},this.jobId=window.setTimeout(function(){e.errorMsg="Image load exceeded timeout",e.finish(!1)},this.timeout),this.image.src=this.src},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,jobQueue:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(e){var i=this,r=function(t){n(i,t,e.callback)},o={src:e.src,crossOriginPolicy:e.crossOriginPolicy,callback:r,abort:e.abort},s=new t(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(s.start(),this.jobsInProgress++):this.jobQueue.push(s)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(e,t,n,i,r,o,s){this.level=e,this.x=t,this.y=n,this.bounds=i,this.exists=r,this.url=o,this.context2D=s,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.distance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},drawHTML:function(t){return this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=t&&t.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",void e.setElementOpacity(this.element,this.opacity)):void e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):void e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(t,n){var i,r=this.position,o=this.size;return this.context2D||this.cacheImageRecord?(i=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&i?(t.save(),t.globalAlpha=this.opacity,1===t.globalAlpha&&(this.context2D||this.url.match(".png"))&&t.clearRect(r.x*e.pixelDensityRatio+1,r.y*e.pixelDensityRatio+1,o.x*e.pixelDensityRatio-2,o.y*e.pixelDensityRatio-2),n({context:t,tile:this,rendered:i}),t.drawImage(i.canvas,0,0,i.canvas.width,i.canvas.height,r.x*e.pixelDensityRatio,r.y*e.pixelDensityRatio,o.x*e.pixelDensityRatio,o.y*e.pixelDensityRatio),void t.restore()):void e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):void e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8},e.Overlay=function(t,n,i){var r;r=e.isPlainObject(t)?t:{element:t,location:n,placement:i},this.element=r.element,this.scales=r.location instanceof e.Rect,this.bounds=new e.Rect(r.location.x,r.location.y,r.location.width,r.location.height),this.position=new e.Point(r.location.x,r.location.y),this.size=new e.Point(r.location.width,r.location.height),this.style=r.element.style,this.placement=r.location instanceof e.Point?r.placement:e.OverlayPlacement.TOP_LEFT,this.onDraw=r.onDraw,this.checkResize=void 0===r.checkResize?!0:r.checkResize},e.Overlay.prototype={adjust:function(t,n){switch(this.placement){case e.OverlayPlacement.TOP_LEFT:break;case e.OverlayPlacement.TOP:t.x-=n.x/2;break;case e.OverlayPlacement.TOP_RIGHT:t.x-=n.x;break;case e.OverlayPlacement.RIGHT:t.x-=n.x,t.y-=n.y/2;break;case e.OverlayPlacement.BOTTOM_RIGHT:t.x-=n.x,t.y-=n.y;break;case e.OverlayPlacement.BOTTOM:t.x-=n.x/2,t.y-=n.y;break;case e.OverlayPlacement.BOTTOM_LEFT:t.y-=n.y;break;case e.OverlayPlacement.LEFT:t.y-=n.y/2;break;default:case e.OverlayPlacement.CENTER:t.x-=n.x/2,t.y-=n.y/2}},destroy:function(){var e=this.element,t=this.style;e.parentNode&&(e.parentNode.removeChild(e),e.prevElementParent&&(t.display="none",document.body.appendChild(e))),this.onDraw=null,t.top="",t.left="",t.position="",this.scales&&(t.width="",t.height="")},drawHTML:function(t,n){var i,r,o=this.element,s=this.style,a=this.scales,l=n.degrees,u=n.pixelFromPoint(this.bounds.getTopLeft(),!0);if(o.parentNode!=t&&(o.prevElementParent=o.parentNode,o.prevNextSibling=o.nextSibling,t.appendChild(o),this.size=e.getElementSize(o)),i=a?n.deltaPixelsFromPoints(this.bounds.getSize(),!0):this.checkResize?e.getElementSize(o):this.size,this.position=u,this.size=i,this.adjust(u,i),u=u.apply(Math.round),i=i.apply(Math.round),0!==l&&this.scales){r=new e.Point(i.x/2,i.y/2);var c=new e.Point(n.viewer.drawer.canvas.width/2,n.viewer.drawer.canvas.height/2);u=u.plus(r).rotate(l,c).minus(r),i=i.rotate(l,new e.Point(0,0)),i=new e.Point(Math.abs(i.x),Math.abs(i.y))}this.onDraw?this.onDraw(u,i,o):(s.left=u.x+"px",s.top=u.y+"px",s.position="absolute","none"!=s.display&&(s.display="block"),a&&(s.width=i.x+"px",s.height=i.y+"px"))},update:function(t,n){this.scales=t instanceof e.Rect,this.bounds=new e.Rect(t.x,t.y,t.width,t.height),this.placement=t instanceof e.Point?n:e.OverlayPlacement.TOP_LEFT}}}(OpenSeadragon),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(t)||(t={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor=t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var i=this._calculateCanvasSize();this.canvas.width=i.x,this.canvas.height=i.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas)},e.Drawer.prototype={addOverlay:function(t,n,i,r){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,n,i,r),this},updateOverlay:function(t,n,i){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,n,i),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,i=0;i<n.getItemCount();i++)n.getItemAt(i).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,n=0,i=0;i<t.getItemCount();i++){var r=t.getItemAt(i).getOpacity();r>n&&(n=r)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();this.canvas.width==e.x&&this.canvas.height==e.y||(this.canvas.width=e.x,this.canvas.height=e.y,null!==this.sketchCanvas&&(this.sketchCanvas.width=this.canvas.width,this.sketchCanvas.height=this.canvas.height)),this._clear()}},_clear:function(e){if(this.useCanvas){var t=this._getContext(e),n=t.canvas;t.clearRect(0,0,n.width,n.height)}},viewportToDrawerRectangle:function(t){var n=this.viewport.pixelFromPoint(t.getTopLeft(),!0),i=this.viewport.deltaPixelsFromPoints(t.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)},drawTile:function(t,n,i){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var r=this._getContext(i);0!==this.viewport.degrees?(this._offsetForRotation(t,this.viewport.degrees,i),t.drawCanvas(r,n),this._restoreRotationChanges(t,i)):t.drawCanvas(r,n)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;return e&&(null===this.sketchCanvas&&(this.sketchCanvas=document.createElement("canvas"),this.sketchCanvas.width=this.canvas.width,this.sketchCanvas.height=this.canvas.height,this.sketchContext=this.sketchCanvas.getContext("2d")),t=this.sketchContext),t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}},drawRectangle:function(e,t,n){if(this.useCanvas){var i=this._getContext(n);i.save(),i.fillStyle=t,i.fillRect(e.x,e.y,e.width,e.height),i.restore()}},blendSketch:function(e){this.useCanvas&&this.sketchCanvas&&(this.context.save(),this.context.globalAlpha=e,this.context.drawImage(this.sketchCanvas,0,0),this.context.restore())},drawDebugInfo:function(t,n,i){if(this.useCanvas){var r=this.context;r.save(),r.lineWidth=2*e.pixelDensityRatio,r.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",r.strokeStyle=this.debugGridColor,r.fillStyle=this.debugGridColor,0!==this.viewport.degrees&&this._offsetForRotation(t,this.viewport.degrees),r.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var o=(t.position.x+t.size.x/2)*e.pixelDensityRatio,s=(t.position.y+t.size.y/2)*e.pixelDensityRatio;r.translate(o,s),r.rotate(Math.PI/180*-this.viewport.degrees),r.translate(-o,-s),0===t.x&&0===t.y&&(r.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),r.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),r.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),r.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),r.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),r.fillText("Order: "+i+" of "+n,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),r.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),r.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(t),r.restore()}},debugRect:function(t){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor,n.fillStyle=this.debugGridColor,n.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),n.restore()}},_offsetForRotation:function(e,t,n){var i=this.canvas.width/2,r=this.canvas.height/2,o=this._getContext(n);o.save(),o.translate(i,r),o.rotate(Math.PI/180*t),o.translate(-i,-r)},_restoreRotationChanges:function(e,t){var n=this._getContext(t);n.restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:n.x*t,y:n.y*t}}}}(OpenSeadragon),function(e){e.Viewport=function(t){var n=arguments;n.length&&n[0]instanceof e.Point&&(t={containerSize:n[0],contentSize:n[1],config:n[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this.contentSize?this.resetContentSize(this.contentSize):this.setHomeBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this.setHomeBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,n){e.console.assert(t,"[Viewport.setHomeBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport.setHomeBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport.setHomeBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport.setHomeBounds] bounds.height must be greater than 0"),this.homeBounds=t.clone(),this.contentSize=this.homeBounds.getSize().times(n),this.contentAspectX=this.contentSize.x/this.contentSize.y,this.contentAspectY=this.contentSize.y/this.contentSize.x,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this.contentSize.clone(),contentFactor:n,homeBounds:this.homeBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e,t=this.contentAspectX/this.getAspectRatio();return e=this.homeFillsViewer?t>=1?t:1:t>=1?1:t,e/this.homeBounds.width},getHomeBounds:function(){var t=this.homeBounds.getCenter(),n=1/this.getHomeZoom(),i=n/this.getAspectRatio();return new e.Rect(t.x-n/2,t.y-i/2,n,i)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom(),t=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e;return t},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this.contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this.homeBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer.forceRedraw()},getBounds:function(t){var n=this.getCenter(t),i=1/this.getZoom(t),r=i/this.getAspectRatio();return new e.Rect(n.x-i/2,n.y-r/2,i,r)},getBoundsWithMargins:function(e){var t=this.getBounds(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(t){var n,i,r,o,s,a,l,u,c=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),h=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?c:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),i=this.getZoom(),r=1/i,o=r/this.getAspectRatio(),s=new e.Rect(c.x-r/2,c.y-o/2,r,o),a=this._pixelFromPoint(this.zoomPoint,s),l=a.minus(n),u=l.divide(this._containerInnerSize.x*i),h.plus(u)):h},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyBoundaryConstraints:function(t,n){var i=0,r=0,o=new e.Rect(t.x,t.y,t.width,t.height),s=this.visibilityRatio*o.width,a=this.visibilityRatio*o.height;if(this.wrapHorizontal);else{var l=o.x+(o.width-s);this.homeBounds.x>l&&(i=this.homeBounds.x-l);var u=this.homeBounds.x+this.homeBounds.width,c=o.x+s;if(c>u){var h=u-c;i=i?(i+h)/2:h}}if(this.wrapVertical);else{var d=o.y+(o.height-a);this.homeBounds.y>d&&(r=this.homeBounds.y-d);var f=this.homeBounds.y+this.homeBounds.height,p=o.y+a;if(p>f){var g=f-p;r=r?(r+g)/2:g}}return(i||r)&&(o.x+=i,o.y+=r),this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n}),o},applyConstraints:function(e){var t,n,i=this.getZoom(),r=Math.max(Math.min(i,this.getMaxZoom()),this.getMinZoom());return i!=r&&this.zoomTo(r,this.zoomPoint,e),t=this.getBounds(),n=this._applyBoundaryConstraints(t,e),(t.x!==n.x||t.y!==n.y||e)&&this.fitBounds(n,e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,n){n=n||{};var i,r,o,s,a,l,u=n.immediately||!1,c=n.constraints||!1,h=this.getAspectRatio(),d=t.getCenter(),f=new e.Rect(t.x,t.y,t.width,t.height);
return f.getAspectRatio()>=h?(f.height=t.width/h,f.y=d.y-f.height/2):(f.width=t.height*h,f.x=d.x-f.width/2),c&&(a=f.getAspectRatio()),this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0),i=this.getBounds(),r=this.getZoom(),o=1/f.width,c&&(l=Math.max(Math.min(o,this.getMaxZoom()),this.getMinZoom()),o!==l&&(o=l,f.width=1/o,f.x=d.x-f.width/2,f.height=f.width/a,f.y=d.y-f.height/2),f=this._applyBoundaryConstraints(f,u),d=f.getCenter()),u?(this.panTo(d,!0),this.zoomTo(o,null,!0)):Math.abs(o-r)<1e-8||Math.abs(f.width-i.width)<1e-8?this.panTo(d,u):(s=i.getTopLeft().times(this._containerInnerSize.x/i.width).minus(f.getTopLeft().times(this._containerInnerSize.x/f.width)).divide(this._containerInnerSize.x/i.width-this._containerInnerSize.x/f.width),this.zoomTo(o,s,u))},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var n=new e.Rect(this.homeBounds.x+this.homeBounds.width/2,this.homeBounds.y,0,this.homeBounds.height);return this.fitBounds(n,t)},fitHorizontally:function(t){var n=new e.Rect(this.homeBounds.x,this.homeBounds.y+this.homeBounds.height/2,this.homeBounds.width,0);return this.fitBounds(n,t)},panBy:function(t,n){var i=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t=t.rotate(-this.degrees,new e.Point(0,0)),this.panTo(i.plus(t),n)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(t,n,i){return n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)&&(n=n.rotate(-this.degrees,new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value))),this.zoomTo(this.zoomSpring.target.value*t,n,i)},zoomTo:function(t,n,i){return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,i?this.zoomSpring.resetTo(t):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:n,immediately:i}),this},setRotation:function(e){return this.viewer&&this.viewer.drawer.canRotate()?(e=(e+360)%360,this.degrees=e,this.viewer.forceRedraw(),null!==this.viewer&&this.viewer.raiseEvent("rotate",{degrees:e}),this):this},getRotation:function(){return this.degrees},resize:function(e,t){var n,i=this.getBounds(),r=i;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(n=e.x/this.containerSize.x,r.width=i.width*n,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(r,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e,t,n,i;this.zoomPoint&&(e=this.pixelFromPoint(this.zoomPoint,!0)),this.zoomSpring.update(),this.zoomPoint&&this.zoomSpring.current.value!=this._oldZoom?(t=this.pixelFromPoint(this.zoomPoint,!0),n=t.minus(e),i=this.deltaPointsFromPixels(n,!0),this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y)):this.zoomPoint=null,this.centerSpringX.update(),this.centerSpringY.update();var r=this.centerSpringX.current.value!=this._oldCenterX||this.centerSpringY.current.value!=this._oldCenterY||this.zoomSpring.current.value!=this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,r},deltaPixelsFromPoints:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBounds(t))},_pixelFromPoint:function(t,n){return t.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},pointFromPixel:function(t,n){var i=this.getBounds(n);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/i.width).plus(i.getTopLeft())},_viewportToImageDelta:function(t,n){var i=this.homeBounds.width;return new e.Point(t*(this.contentSize.x/i),n*(this.contentSize.y*this.contentAspectX/i))},viewportToImageCoordinates:function(t,n){return 1==arguments.length?this.viewportToImageCoordinates(t.x,t.y):(this.viewer&&this.viewer.world.getItemCount()>1&&e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead."),this._viewportToImageDelta(t-this.homeBounds.x,n-this.homeBounds.y))},_imageToViewportDelta:function(t,n){var i=this.homeBounds.width;return new e.Point(t/this.contentSize.x*i,n/this.contentSize.y/this.contentAspectX*i)},imageToViewportCoordinates:function(t,n){if(1==arguments.length)return this.imageToViewportCoordinates(t.x,t.y);this.viewer&&this.viewer.world.getItemCount()>1&&e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");var i=this._imageToViewportDelta(t,n);return i.x+=this.homeBounds.x,i.y+=this.homeBounds.y,i},imageToViewportRectangle:function(t,n,i,r){var o,s,a;return 1==arguments.length?(a=t,this.imageToViewportRectangle(a.x,a.y,a.width,a.height)):(o=this.imageToViewportCoordinates(t,n),s=this._imageToViewportDelta(i,r),new e.Rect(o.x,o.y,s.x,s.y))},viewportToImageRectangle:function(t,n,i,r){var o,s,a;return 1==arguments.length?(a=t,this.viewportToImageRectangle(a.x,a.y,a.width,a.height)):(o=this.viewportToImageCoordinates(t,n),s=this._viewportToImageDelta(i,r),new e.Rect(o.x,o.y,s.x,s.y))},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){var t=this.imageToViewerElementCoordinates(e);return t.plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},windowToViewportCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(t)},viewportToWindowCoordinates:function(e){var t=this.viewportToViewerElementCoordinates(e);return t.plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){this.viewer&&this.viewer.world.getItemCount()>1&&e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");var n=this.contentSize.x,i=this._containerInnerSize.x,r=this.homeBounds.width,o=i/n*r;return t*o},imageToViewportZoom:function(t){this.viewer&&this.viewer.world.getItemCount()>1&&e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");var n=this.contentSize.x,i=this._containerInnerSize.x,r=this.homeBounds.width,o=n/i/r;return t*o}}}(OpenSeadragon),function(e){function t(t){t._needsDraw=!1;var i,r,s,a,l,u,h,d,f=null,p=!1,m=e.now(),v=t.viewport.getBoundsWithMargins(!0),y=t.viewport.deltaPixelsFromPoints(t.source.getPixelRatio(0),!0).x*t._scaleSpring.current.value,w=Math.max(t.source.minLevel,Math.floor(Math.log(t.minZoomImageRatio)/Math.log(2))),S=Math.min(Math.abs(t.source.maxLevel),Math.abs(Math.floor(Math.log(y/t.minPixelRatio)/Math.log(2)))),x=t.viewport.degrees;for(v.x-=t._xSpring.current.value,v.y-=t._ySpring.current.value;t.lastDrawn.length>0;)i=t.lastDrawn.pop(),i.beingDrawn=!1;if(90===x||270===x)v=v.rotate(x);else if(0!==x&&180!==x){var T=v.rotate(90);v.x-=T.width/2,v.y-=T.height/2,v.width+=T.width,v.height+=T.height}var b=v.getTopLeft(),E=v.getBottomRight();if((t.wrapHorizontal||!(E.x<0||b.x>t._worldWidthCurrent))&&(t.wrapVertical||!(E.y<0||b.y>t._worldHeightCurrent))){t.wrapHorizontal||(b.x=Math.max(b.x,0),E.x=Math.min(E.x,t._worldWidthCurrent)),t.wrapVertical||(b.y=Math.max(b.y,0),E.y=Math.min(E.y,t._worldHeightCurrent)),w=Math.min(w,S);var P;for(r=S;r>=w;r--){if(P=!1,s=t.viewport.deltaPixelsFromPoints(t.source.getPixelRatio(r),!0).x*t._scaleSpring.current.value,!p&&s>=t.minPixelRatio||r==w)P=!0,p=!0;else if(!p)continue;if(a=t.viewport.deltaPixelsFromPoints(t.source.getPixelRatio(r),!1).x*t._scaleSpring.current.value,l=t.viewport.deltaPixelsFromPoints(t.source.getPixelRatio(Math.max(t.source.getClosestLevel(t.viewport.containerSize)-1,0)),!1).x*t._scaleSpring.current.value,u=t.immediateRender?1:l,h=Math.min(1,(s-.5)/.5),d=u/Math.abs(u-a),f=n(t,p,P,r,h,d,b,E,m,f),c(t.coverage,r))break}g(t,t.lastDrawn),f&&!f.context2D&&o(t,f,m)}}function n(e,t,n,r,o,s,a,l,u,c){var h,d,p,g,m,v=e.viewport.pixelFromPoint(e.viewport.getCenter());for(e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:r,opacity:o,visibility:s,topleft:a,bottomright:l,currenttime:u,best:c}),p=e.source.getTileAtPoint(r,a.divide(e._scaleSpring.current.value)),g=e.source.getTileAtPoint(r,l.divide(e._scaleSpring.current.value)),m=e.source.getNumTiles(r),f(e.coverage,r),e.wrapHorizontal||(g.x=Math.min(g.x,m.x-1)),e.wrapVertical||(g.y=Math.min(g.y,m.y-1)),h=p.x;h<=g.x;h++)for(d=p.y;d<=g.y;d++)c=i(e,n,t,h,d,r,o,s,v,m,u,c);return c}function i(e,t,n,i,o,s,c,f,g,m,v,y){var w=r(i,o,s,e.source,e.tilesMatrix,v,m,e._worldWidthCurrent,e._worldHeightCurrent),S=t;if(e.viewer&&e.viewer.raiseEvent("update-tile",{tiledImage:e,tile:w}),d(e.coverage,s,i,o,!1),!w.exists)return y;if(n&&!S&&(h(e.coverage,s,i,o)?d(e.coverage,s,i,o,!0):S=!0),!S)return y;if(l(w,e.source.tileOverlap,e.viewport,g,f,e),!w.loaded)if(w.context2D)a(e,w);else{var x=e._tileCache.getImageRecord(w.url);if(x){var T=x.getImage();a(e,w,T)}}if(w.loaded){var b=u(e,w,i,o,s,c,v);b&&(e._needsDraw=!0)}else w.loading||(y=p(y,w));return y}function r(t,n,i,r,o,s,a,l,u){var c,h,d,f,p,g,m;return o[i]||(o[i]={}),o[i][t]||(o[i][t]={}),o[i][t][n]||(c=(a.x+t%a.x)%a.x,h=(a.y+n%a.y)%a.y,d=r.getTileBounds(i,c,h),f=r.tileExists(i,c,h),p=r.getTileUrl(i,c,h),g=r.getContext2D?r.getContext2D(i,c,h):void 0,d.x+=(t-c)/a.x,d.y+=u/l*((n-h)/a.y),o[i][t][n]=new e.Tile(i,t,n,d,f,p,g)),m=o[i][t][n],m.lastTouchTime=s,m}function o(e,t,n){t.loading=!0,e._imageLoader.addJob({src:t.url,crossOriginPolicy:e.crossOriginPolicy,callback:function(i,r){s(e,t,n,i,r)},abort:function(){t.loading=!1}})}function s(t,n,i,r,o){if(r){if(i<t.lastResetTime)return e.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void(n.loading=!1)}else if(e.console.log("Tile %s failed to load: %s - error: %s",n,n.url,o),t.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:t,time:i,message:o}),!t.debugMode)return n.loading=!1,void(n.exists=!1);var s=function(){var e=Math.ceil(Math.log(t.source.getTileWidth(n.level))/Math.log(2));a(t,n,r,e)};t._midDraw?window.setTimeout(s,1):s()}function a(e,t,n,i){function r(){return s++,o}function o(){s--,0===s&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:n,tile:t,cutoff:i,tiledImage:e}),e._needsDraw=!0)}var s=0;e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,image:n,getCompletionCallback:r}),r()()}function l(t,n,i,r,o,s){var a=t.bounds.getTopLeft();a.x*=s._scaleSpring.current.value,a.y*=s._scaleSpring.current.value,a.x+=s._xSpring.current.value,a.y+=s._ySpring.current.value;var l=t.bounds.getSize();l.x*=s._scaleSpring.current.value,l.y*=s._scaleSpring.current.value;var u=i.pixelFromPoint(a,!0),c=i.pixelFromPoint(a,!1),h=i.deltaPixelsFromPoints(l,!0),d=i.deltaPixelsFromPoints(l,!1),f=c.plus(d.divide(2)),p=r.distanceTo(f);n||(h=h.plus(new e.Point(1,1))),t.position=u,t.size=h,t.distance=p,t.visibility=o}function u(e,t,n,i,r,o,s){var a,l,u=1e3*e.blendTime;if(t.blendStart||(t.blendStart=s),a=s-t.blendStart,l=u?Math.min(1,a/u):1,e.alwaysBlend&&(l*=o),t.opacity=l,e.lastDrawn.push(t),1==l)d(e.coverage,r,n,i,!0),e._hasOpaqueTile=!0;else if(u>a)return!0;return!1}function c(e,t,n,i){var r,o,s,a;if(!e[t])return!1;if(void 0===n||void 0===i){r=e[t];for(s in r)if(r.hasOwnProperty(s)){o=r[s];for(a in o)if(o.hasOwnProperty(a)&&!o[a])return!1}return!0}return void 0===e[t][n]||void 0===e[t][n][i]||e[t][n][i]===!0}function h(e,t,n,i){return void 0===n||void 0===i?c(e,t+1):c(e,t+1,2*n,2*i)&&c(e,t+1,2*n,2*i+1)&&c(e,t+1,2*n+1,2*i)&&c(e,t+1,2*n+1,2*i+1)}function d(t,n,i,r,o){return t[n]?(t[n][i]||(t[n][i]={}),void(t[n][i][r]=o)):void e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function f(e,t){e[t]={}}function p(e,t){return e?t.visibility>e.visibility?t:t.visibility==e.visibility&&t.distance<e.distance?t:e:t}function g(e,t){var n,i;if(e.opacity<=0)return void m(e,t);var r=e.opacity<1;r&&e._drawer._clear(!0);var o=!1;if(e._clip){e._drawer.saveContext(r);var s=e.imageToViewportRectangle(e._clip,!0),a=e._drawer.viewportToDrawerRectangle(s);e._drawer.setClip(a,r),o=!0}if(e.placeholderFillStyle&&e._hasOpaqueTile===!1){var l=e._drawer.viewportToDrawerRectangle(e.getBounds(!0)),u=null;u="function"==typeof e.placeholderFillStyle?e.placeholderFillStyle(e,e._drawer.context):e.placeholderFillStyle,e._drawer.drawRectangle(l,u,r)}for(n=t.length-1;n>=0;n--)i=t[n],e._drawer.drawTile(i,e._drawingHandler,r),i.beingDrawn=!0,e.viewer&&e.viewer.raiseEvent("tile-drawn",{tiledImage:e,tile:i});o&&e._drawer.restoreContext(r),r&&e._drawer.blendSketch(e.opacity),m(e,t)}function m(t,n){if(t.debugMode)for(var i=n.length-1;i>=0;i--){var r=n[i];try{t._drawer.drawDebugInfo(r,n.length,i)}catch(o){e.console.error(o)}}}e.TiledImage=function(t){var n=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var i=t.x||0;delete t.x;var r=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var o=1;t.width?(o=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(o=t.height/this.normHeight,delete t.height),e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity},t),this._xSpring=new e.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),this._drawingHandler=function(t){n.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:n},t))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.current.value,t=this._ySpring.current.value,n=this._scaleSpring.current.value;return this._xSpring.update(),this._ySpring.update(),this._scaleSpring.update(),this._xSpring.current.value!==e||this._ySpring.current.value!==t||this._scaleSpring.current.value!==n?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this._midDraw=!0,t(this),this._midDraw=!1},destroy:function(){this.reset()},getBounds:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(t,n,i){var r=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/r),n*(this.source.dimensions.y*this.contentAspectX/r))},viewportToImageCoordinates:function(t,n,i){return t instanceof e.Point&&(i=n,n=t.y,t=t.x),i?this._viewportToImageDelta(t-this._xSpring.current.value,n-this._ySpring.current.value):this._viewportToImageDelta(t-this._xSpring.target.value,n-this._ySpring.target.value)},_imageToViewportDelta:function(t,n,i){var r=i?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*r,n/this.source.dimensions.y/this.contentAspectX*r)},imageToViewportCoordinates:function(t,n,i){t instanceof e.Point&&(i=n,n=t.y,t=t.x);var r=this._imageToViewportDelta(t,n);return i?(r.x+=this._xSpring.current.value,r.y+=this._ySpring.current.value):(r.x+=this._xSpring.target.value,r.y+=this._ySpring.target.value),r},imageToViewportRectangle:function(t,n,i,r,o){t instanceof e.Rect&&(o=n,i=t.width,r=t.height,n=t.y,t=t.x);var s=this.imageToViewportCoordinates(t,n,o),a=this._imageToViewportDelta(i,r,o);return new e.Rect(s.x,s.y,a.x,a.y)},viewportToImageRectangle:function(t,n,i,r,o){t instanceof e.Rect&&(o=n,i=t.width,r=t.height,n=t.y,t=t.x);var s=this.viewportToImageCoordinates(t,n,o),a=this._viewportToImageDelta(i,r,o);return new e.Rect(s.x,s.y,a.x,a.y)},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){var t=this.imageToViewerElementCoordinates(e);return t.plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewportToImageZoom:function(e){var t=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return t*e},imageToViewportZoom:function(e){var t=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return e/t},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(e){this.opacity=e,this._needsDraw=!0},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")}})}(OpenSeadragon),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},n=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.image,"[ImageRecord] options.image is required"),this._image=t.image,this._tiles=[]};n.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(t){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=t},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===t)return void this._tiles.splice(n,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(i){e.console.assert(i,"[TileCache.cacheTile] options is required"),e.console.assert(i.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(i.tile.url,"[TileCache.cacheTile] options.tile.url is required"),e.console.assert(i.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var r=i.cutoff||0,o=this._tilesLoaded.length,s=this._imagesLoaded[i.tile.url];if(s||(e.console.assert(i.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),s=this._imagesLoaded[i.tile.url]=new n({image:i.image}),this._imagesLoadedCount++),s.addTile(i.tile),i.tile.cacheImageRecord=s,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,l,u,c,h,d,f=null,p=-1,g=null,m=this._tilesLoaded.length-1;m>=0;m--)d=this._tilesLoaded[m],a=d.tile,a.level<=r||a.beingDrawn||(f?(c=a.lastTouchTime,l=f.lastTouchTime,h=a.level,u=f.level,(l>c||c==l&&h>u)&&(f=a,p=m,g=d)):(f=a,p=m,g=d));f&&p>=0&&(this._unloadTile(g),o=p)}this._tilesLoaded[o]=new t({tile:i.tile,tiledImage:i.tiledImage})},clearTilesFor:function(t){e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var n,i=0;i<this._tilesLoaded.length;++i)n=this._tilesLoaded[i],n.tiledImage===t&&(this._unloadTile(n),this._tilesLoaded.splice(i,1),i--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] url is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var n=t.tile,i=t.tiledImage;n.unload(),n.cacheImageRecord=null;var r=this._imagesLoaded[n.url];r.removeTile(n),r.getTileCount()||(r.destroy(),delete this._imagesLoaded[n.url],this._imagesLoadedCount--),i.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:i})}}}(OpenSeadragon),function(e){e.World=function(t){var n=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,n){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),n=n||{},void 0!==n.index){var i=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(i,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,n){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==n,"[World.setItemIndex] index is required");var i=this.getIndexOfItem(t);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n!==i&&-1!==i&&(this._items.splice(i,1),this._items.splice(n,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:i,newIndex:n}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var n=e.indexOf(this._items,t);-1!==n&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){this.viewer._cancelPendingImages();for(var e,t=0;t<this._items.length;t++)e=this._items[t],e.removeHandler("bounds-change",this._delegatedFigureSizes),e.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<n.length;t++)e=n[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){t=t||{};var n,i=t.immediately||!1,r=t.layout||e.DEFAULT_SETTINGS.collectionLayout,o=t.rows||e.DEFAULT_SETTINGS.collectionRows,s=t.columns||e.DEFAULT_SETTINGS.collectionColumns,a=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,l=t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin,u=a+l;n=!t.rows&&s?s:Math.ceil(this._items.length/o);var c,h,d,f,p,g=0,m=0;this.setAutoRefigureSizes(!1);for(var v=0;v<this._items.length;v++)v&&v%n===0&&("horizontal"===r?(m+=u,g=0):(g+=u,m=0)),c=this._items[v],h=c.getBounds(),d=h.width>h.height?a:a*(h.width/h.height),f=d*(h.height/h.width),p=new e.Point(g+(a-d)/2,m+(a-f)/2),c.setPosition(p,i),c.setWidth(d,i),"horizontal"===r?g+=u:m+=u;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,i=this._contentFactor||0;if(this._items.length){var r=this._items[0].getBounds();this._contentFactor=this._items[0].getContentSize().x/r.width;for(var o,s=r.x,a=r.y,l=r.x+r.width,u=r.y+r.height,c=1;c<this._items.length;c++)o=this._items[c].getBounds(),this._contentFactor=Math.max(this._contentFactor,this._items[c].getContentSize().x/o.width),s=Math.min(s,o.x),a=Math.min(a,o.y),l=Math.max(l,o.x+o.width),u=Math.max(u,o.y+o.height);this._homeBounds=new e.Rect(s,a,l-s,u-a),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===i&&this._homeBounds.equals(t)&&this._contentSize.equals(n)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(OpenSeadragon)},function(e,t,n){function i(e,t){return f.isUndefined(t)?""+t:f.isNumber(t)&&!isFinite(t)?t.toString():f.isFunction(t)||f.isRegExp(t)?t.toString():t}function r(e,t){return f.isString(e)?e.length<t?e:e.slice(0,t):e}function o(e){return r(JSON.stringify(e.actual,i),128)+" "+e.operator+" "+r(JSON.stringify(e.expected,i),128)}function s(e,t,n,i,r){throw new m.AssertionError({message:n,actual:e,expected:t,operator:i,stackStartFunction:r})}function a(e,t){e||s(e,!0,t,"==",m.ok)}function l(e,t){if(e===t)return!0;if(f.isBuffer(e)&&f.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return f.isDate(e)&&f.isDate(t)?e.getTime()===t.getTime():f.isRegExp(e)&&f.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:f.isObject(e)||f.isObject(t)?c(e,t):e==t}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(f.isNullOrUndefined(e)||f.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(f.isPrimitive(e)||f.isPrimitive(t))return e===t;var n=u(e),i=u(t);if(n&&!i||!n&&i)return!1;if(n)return e=p.call(e),t=p.call(t),l(e,t);var r,o,s=v(e),a=v(t);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(r=s[o],!l(e[r],t[r]))return!1;return!0}function h(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0:!1}function d(e,t,n,i){var r;f.isString(n)&&(i=n,n=null);try{t()}catch(o){r=o}if(i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!r&&s(r,n,"Missing expected exception"+i),!e&&h(r,n)&&s(r,n,"Got unwanted exception"+i),e&&r&&n&&!h(r,n)||!e&&r)throw r}var f=n(295),p=Array.prototype.slice,g=Object.prototype.hasOwnProperty,m=e.exports=a;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var t=e.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var i=n.stack,r=t.name,a=i.indexOf("\n"+r);if(a>=0){var l=i.indexOf("\n",a+1);i=i.substring(l+1)}this.stack=i}}},f.inherits(m.AssertionError,Error),m.fail=s,m.ok=a,m.equal=function(e,t,n){e!=t&&s(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&s(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){l(e,t)||s(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){l(e,t)&&s(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&s(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){
e===t&&s(e,t,n,"!==",m.notStrictEqual)},m["throws"]=function(e,t,n){d.apply(this,[!0].concat(p.call(arguments)))},m.doesNotThrow=function(e,t){d.apply(this,[!1].concat(p.call(arguments)))},m.ifError=function(e){if(e)throw e};var v=Object.keys||function(e){var t=[];for(var n in e)g.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(e,i){function r(e,n){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(n)?i.showHidden=n:n&&t._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,n,i){if(e.customInspect&&n&&_(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return w(r)||(r=l(e,r,i)),r}var o=u(e,n);if(o)return o;var s=Object.keys(n),g=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),P(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(n);if(0===s.length){if(_(n)){var m=n.name?": "+n.name:"";return e.stylize("[Function"+m+"]","special")}if(T(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(P(n))return c(n)}var v="",y=!1,S=["{","}"];if(p(n)&&(y=!0,S=["[","]"]),_(n)){var x=n.name?": "+n.name:"";v=" [Function"+x+"]"}if(T(n)&&(v=" "+RegExp.prototype.toString.call(n)),E(n)&&(v=" "+Date.prototype.toUTCString.call(n)),P(n)&&(v=" "+c(n)),0===s.length&&(!y||0==n.length))return S[0]+v+S[1];if(0>i)return T(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var b;return b=y?h(e,n,i,g,s):s.map(function(t){return d(e,n,i,g,t,y)}),e.seen.pop(),f(b,v,S)}function u(e,t){if(x(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,i,r){for(var o=[],s=0,a=t.length;a>s;++s)I(t,String(s))?o.push(d(e,t,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(d(e,t,n,i,r,!0))}),o}function d(e,t,n,i,r,o){var s,a,u;if(u=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),I(i,r)||(s="["+r+"]"),a||(e.seen.indexOf(u.value)<0?(a=m(n)?l(e,u.value,null):l(e,u.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function x(e){return void 0===e}function T(e){return b(e)&&"[object RegExp]"===C(e)}function b(e){return"object"==typeof e&&null!==e}function E(e){return b(e)&&"[object Date]"===C(e)}function P(e){return b(e)&&("[object Error]"===C(e)||e instanceof Error)}function _(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function C(e){return Object.prototype.toString.call(e)}function R(e){return 10>e?"0"+e.toString(10):e.toString(10)}function k(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var F=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(e).replace(F,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}}),a=i[n];o>n;a=i[++n])s+=m(a)||!b(a)?" "+a:" "+r(a);return s},t.deprecate=function(n,r){function o(){if(!s){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),s=!0}return n.apply(this,arguments)}if(x(e.process))return function(){return t.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var s=!1;return o};var M,D={};t.debuglog=function(e){if(x(M)&&(M=i.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(M)){var n=i.pid;D[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else D[e]=function(){};return D[e]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=g,t.isNull=m,t.isNullOrUndefined=v,t.isNumber=y,t.isString=w,t.isSymbol=S,t.isUndefined=x,t.isRegExp=T,t.isObject=b,t.isDate=E,t.isError=P,t.isFunction=_,t.isPrimitive=O,t.isBuffer=n(296);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",k(),t.format.apply(t,arguments))},t.inherits=n(297),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(t,function(){return this}(),n(288))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return(0,f.fetch)(e).then(function(e){return new c["default"](e)}).then(function(e){return Promise.all(e.manifests.map(function(t,n){var i=t.getImageSource();return(0,f.fetch)(i).then(function(r){return{type:"image",payload:{image:i,collection:e,key:n,label:t.label,height:r.height,width:r.width,source:r}}})}))})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.IIIFCollectionResolver=a;var u=n(299),c=i(u),h=n(293),d=i(h),f=n(300),p=n(304),g=i(p),m=n(305),v=i(m),y=function(e){function t(e){r(this,t),e.visibilityRatio=e.visibilityRatio?e.visibilityRatio:1,e.homeFillsViewer=e.homeFillsViewer?e.homeFillsViewer:!0,e.constrainDuringPan=e.constrainDuringPan?e.constrainDuringPan:!0,e.prefixUrl=e.prefixUrl?e.prefixUrl:"images/",e.animationTime=e.animationTime?e.animationTime:.3,e.minZoomLevel=e.minZoomLevel?e.minZoomLevel:7e-4,e.show3DFloor=e.show3DFloor?e.show3DFloor:!0,e.springStiffness=e.springStiffness?e.springStiffness:100;var n=o(this,Object.getPrototypeOf(t).call(this,e));n.wallImageWidth=e.wallImageWidth||300,n.wallImageSpacing=e.wallImageSpacing||150,n.wallOffsetTop=e.wallOffsetTop||120,n.wallOffsetLeft=e.wallOffsetLeft||n.wallImageWidth/2,n.resolveVideo=e.resolveVideo||n.resolveVideo,n.resolveCollectionImages=e.resolveCollectionImages||n.resolveCollectionImages,n.backgroundWallImage=e.backgroundWallImage||"http://dlcs.io/iiif-img/4/4/7ade194e-2bed-4b0d-afd0-939bca603cba/info.json",n.backgroundWallWidth=e.backgroundWallWidth||1500,n.show3DFloor=e.show3DFloor||!1,n._3dfloor=[];var i=e.collection||null;return n.configureImageQueue(),n.mediaTypes={image:n.appendWallImage,html:n.appendWallHtml},n.blurGallery(),i&&n.resolve(i),n.recalculateWall([]),n}return s(t,e),l(t,[{key:"push",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];e=d["default"].isArray(e)?e:[e],this.queue.pushAll(e),t&&this.queue.flush()}},{key:"resolve",value:function(e){var t=this;return"string"==typeof e&&(e=a(e)),e.then(function(e){t.push(e)})}},{key:"addMediaType",value:function(e,t){this.mediaTypes[e]=t.bind(this)}},{key:"configureImageQueue",value:function(){var e=this;this.queue=new g["default"](function(t,n){if(!e.mediaTypes[t.type])throw Error("Unsupported media type");e.mediaTypes[t.type].apply(e,[t.payload,n,n+100])}),this.queue.beforeFlushStart=function(){e.clearOverlays(),e.blurGallery(),e.overlaysContainer.innerHTML=""},this.queue.onFlushEnd=function(t){e.recalculateWall(t).then(function(){return e.focusGallery()})}}},{key:"appendWallHtml",value:function(e,t,n){return Promise.resolve(this.addOverlay({element:e.element,location:new OpenSeadragon.Rect(this.wallOffsetLeft+t*(this.wallImageWidth+this.wallImageSpacing),this.wallOffsetTop,this.wallImageWidth,this.wallImageWidth)}))}},{key:"appendWallImage",value:function(e,t,n){var i=e.image,r=e.height,o=e.width,s=e.label,a=this,l=(arguments.length<=3||void 0===arguments[3]?!0:arguments[3],{tileSource:i,width:this.wallImageWidth,index:n,y:this.wallOffsetTop,x:this.wallOffsetLeft+t*(this.wallImageWidth+this.wallImageSpacing)});if(r&&o){var u=r/o,c=this.wallImageWidth*u;c>this.wallImageWidth&&(l.width=this.wallImageWidth*(this.wallImageWidth/c)),l.width-this.wallImageWidth!==0&&(l.x+=(this.wallImageWidth-l.width)/2),c-this.wallImageWidth<0&&(l.y+=(this.wallImageWidth-c)/2),s&&!function(){var e=45,t=30,n=l.x-e-10,i=l.y+l.width*u-t;a.createLabelElement(s,t,e).then(function(r){a.asyncAddOverlay({element:r,location:new OpenSeadragon.Rect(n,i,e,t)})})}()}return this.asyncAddTiledImage(l)}},{key:"asyncCreateImage",value:function(e){return new Promise(function(t,n){try{!function(){var n=new Image;n.src=e,n.onload=function(){t(n)}}()}catch(i){n(i)}})}},{key:"createLabelElement",value:function(e,t,n){var i=document.createElement("canvas");i.setAttribute("height",""+12*t),i.setAttribute("width",""+12*n);var r=i.getContext("2d");return this.asyncCreateImage("./images/label.png").then(function(o){(0,f.withContext)(r,function(){r.rect(n,t,10*n,10*t),r.fillStyle="",r.shadowColor="#000",r.shadowBlur=40,r.globalAlpha="0.05",r.shadowOffsetX=0,r.shadowOffsetY=15,r.fill()}),(0,f.withContext)(r,function(){r.rect(n,t,10*n,10*t),r.fillStyle="",r.shadowColor="#000",r.shadowBlur=15,r.globalAlpha="0.05",r.shadowOffsetX=0,r.shadowOffsetY=10,r.fill()}),(0,f.withContext)(r,function(){r.rect(n,t,10*n,10*t),r.fillStyle="",r.shadowColor="#000",r.shadowBlur=15,r.globalAlpha="0.1",r.shadowOffsetX=0,r.shadowOffsetY=15,r.fill()}),(0,f.withContext)(r,function(){r.rect(n,t,10*n,10*t),r.fillStyle="",r.shadowColor="#FFF",r.shadowBlur=1,r.globalAlpha="0.7",r.shadowOffsetX=0,r.shadowOffsetY=-2,r.fill()}),(0,f.withContext)(r,function(){r.rect(n,t,10*n,10*t),r.fillStyle="",r.shadowColor="#FFF",r.shadowBlur=4,r.globalAlpha="0.1",r.shadowOffsetX=0,r.shadowOffsetY=-5,r.fill()}),(0,f.withContext)(r,function(){r.rect(n,t,10*n,10*t),r.fillStyle="",r.shadowColor="#000",r.shadowBlur=4,r.globalAlpha="0.2",r.shadowOffsetX=0,r.shadowOffsetY=5,r.fill()}),(0,f.withContext)(r,function(){o.src="./images/label.png",r.drawImage(o,n,t,10*n,10*t)}),(0,f.withContext)(r,function(){r.fillStyle="#333",r.globalAlpha="0.9",r.font="bold 20px Helvetica";for(var i=(0,f.getCanvasLines)(r,e,9*n),o=0;o<i.length;o++)r.fillText(i[o],1.5*n,28*o+2.25*t)}),(0,f.withContext)(r,function(){var e=r.createRadialGradient(6*n,6*t,0,6*n,6*t,6*t);e.addColorStop(0,"rgba(255,255,255,0.9)"),e.addColorStop(1,"rgba(255,255,255,0)"),r.globalCompositeOperation="soft-light",r.fillStyle=e,r.fillRect(n,t,10*n,10*t)});var s=i.toDataURL(),a=document.createElement("div");a.className="imageContainer";var l=document.createElement("img");return l.src=s,a.appendChild(l),a})}},{key:"asyncAddTiledImage",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];return new Promise(function(t,i){n[0]&&(n[0].success=t);try{e.addTiledImage.apply(e,n)}catch(r){i(r)}})}},{key:"asyncAddOverlay",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return Promise.resolve(this.addOverlay.apply(this,t))}},{key:"resetAllTiles",value:function(e){this.blurGallery(),this.world.removeAll(),this.recalculateWall([]),this.queue.reset(),e&&this.resolve(e)}},{key:"blurGallery",value:function(){(0,v["default"])(this.element,{blur:15},{duration:200})}},{key:"focusGallery",value:function(){(0,v["default"])(this.element,{blur:0},{duration:800})}},{key:"create3DFloor",value:function(e){var t=this,n=document.createElement("div");n.setAttribute("id","floor"),n.setAttribute("class","floor");var i=(0,f.throttle)(function(t){n.style.transformOrigin=t/e*100+"% 0%"},1e3/60),r=(0,f.throttle)(function(e){(0,v["default"])(n,{opacity:t.viewport.getZoom(!0)>.0013?0:1},{duration:0}),i(t.viewport.centerSpringX.current.value)},1e3/60);return this.addHandler("pan",function(e){return i(e.center.x)}),this.addHandler("viewport-change",function(e){return i(t.viewport.centerSpringX.current.value)}),this.addHandler("add-overlay",function(r){n.offsetWidth/n.offsetHeight>1&&((0,v["default"])(n,{backgroundSize:30/(e/950)+"%"},{duration:0}),i(t.viewport.centerSpringX.current.value))}),this.addHandler("zoom",r),n}},{key:"add3DFloor",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?300:arguments[1];return this.asyncAddOverlay({element:this.create3DFloor(e),location:new OpenSeadragon.Rect(0,580,e,t)})}},{key:"recalculateWall",value:function(e){var t=e?e.length:0,n=this.wallOffsetLeft+t*(this.wallImageWidth+this.wallImageSpacing),i=Math.ceil(n/this.backgroundWallWidth);return Promise.all([this.makeWall(i,-this.wallOffsetTop),this.show3DFloor?this.add3DFloor(n):function(){}])}},{key:"makeWall",value:function(e){for(var t=(arguments.length<=1||void 0===arguments[1]?0:arguments[1],[]);e-- >0;)t.push(this.asyncAddTiledImage({tileSource:this.backgroundWallImage,width:this.backgroundWallWidth,index:e,x:e*this.backgroundWallWidth,y:0}));return Promise.all(t)}}]),t}(h.Viewer);t["default"]=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(300),l=n(301),u=i(l),c=n(302),h=i(c),d=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.manifests=(0,a.mapArrayOf)(h["default"],n.manifests),n.images=n.manifests.map(function(e){return e.getImageSource()}),n}return s(t,e),t}(u["default"]);t["default"]=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];return new Promise(function(n,i){d["default"].makeAjaxRequest(e,function(e){return n(t?JSON.parse(e.responseText):e)},i)})}function o(e){return function(){for(var t=Array.prototype.slice.call(arguments),n="",i=t.length,r=null;i--;)r=t[i],n+=r===Object(r)?JSON.stringify(r):r,e.memoize||(e.memoize={});return n in e.memoize?e.memoize[n]:e.memoize[n]=e.apply(this,t)}}function s(e,t){return function(){var n=(new Date).getTime();return!e.lastExecuted||e.lastExecuted+t<n?(e.lastExecuted=n,e.apply(e,arguments)):void 0}}function a(e,t){return t=t||100,function(){if(!e.debouncing){var n=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,n),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}function l(e,t){e.save(),t(e),e.restore()}function u(e,t,n){for(var i=t.split(" "),r=[],o=i[0],s=1;s<i.length;s++){var a=i[s],l=e.measureText(o+" "+a).width;n>l?o+=" "+a:(r.push(o),o=a)}return r.push(o),r}function c(e,t){if(!t)return[];var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;n.push(new e(l))}}catch(u){r=!0,o=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=r,t.memoize=o,t.throttle=s,t.debounce=a,t.withContext=l,t.getCanvasLines=u,t.mapArrayOf=c;var h=n(293),d=i(h)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(293),a=i(s),l=function(){function e(t){r(this,e),this.mapFrom(t)}return o(e,[{key:"id",value:function(){return this.getProp("@id")}},{key:"getProp",value:function(e){return this[e]}},{key:"mapFrom",value:function(e){a["default"].extend(this,e)}}]),e}();t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(294),u=i(l),c=n(300),h=n(301),d=i(h),f=n(303),p=i(f),g=function(e){function t(e){r(this,t),u["default"].strictEqual(e["@type"],"sc:Manifest");var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.sequences=(0,c.mapArrayOf)(p["default"],n.sequences),n}return s(t,e),a(t,[{key:"getImageSource",value:function(){return this.thumbnail.service["@id"]+"/info.json"}}]),t}(d["default"]);t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(301),l=i(a),u=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),t}(l["default"]);t["default"]=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];n(this,e),this._flush=t,this._images=i,i&&this.flush()}return i(e,[{key:"reset",value:function(){this._images=[]}},{key:"sizeOf",value:function(){return this._images.length}},{key:"push",value:function(e){return this._images.push(e),this}},{key:"pushAll",value:function(e){return"string"==typeof e&&(e=[e]),this._images=[].concat(this._images,e),this}},{key:"onFlushEnd",value:function(e){}},{key:"beforeFlushStart",value:function(e){}},{key:"flush",value:function(){this.beforeFlushStart(this._images),this._images.forEach(this._flush),this.onFlushEnd(this._images)}},{key:"pop",value:function(){var e=this._images.pop();return this.flush(this._images),e}}]),e}();t["default"]=r},function(e,t,n){var i,r;!function(e){function t(e){var t=e.length,i=n.type(e);return"function"===i||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var n=function(e,t){return new n.fn.init(e,t)};n.isWindow=function(e){return null!=e&&e==e.window},n.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[s.call(e)]||"object":typeof e},n.isArray=Array.isArray||function(e){return"array"===n.type(e)},n.isPlainObject=function(e){var t;if(!e||"object"!==n.type(e)||e.nodeType||n.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}for(t in e);return void 0===t||o.call(e,t)},n.each=function(e,n,i){var r,o=0,s=e.length,a=t(e);if(i){if(a)for(;s>o&&(r=n.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=n.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=n.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=n.call(e[o],o,e[o]),r===!1)break;return e},n.data=function(e,t,r){if(void 0===r){var o=e[n.expando],s=o&&i[o];if(void 0===t)return s;if(s&&t in s)return s[t]}else if(void 0!==t){var o=e[n.expando]||(e[n.expando]=++n.uuid);return i[o]=i[o]||{},i[o][t]=r,r}},n.removeData=function(e,t){var r=e[n.expando],o=r&&i[r];o&&n.each(t,function(e,t){delete o[t]})},n.extend=function(){var e,t,i,r,o,s,a=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[l]||{},l++),"object"!=typeof a&&"function"!==n.type(a)&&(a={}),l===u&&(a=this,l--);u>l;l++)if(null!=(o=arguments[l]))for(r in o)e=a[r],i=o[r],a!==i&&(c&&i&&(n.isPlainObject(i)||(t=n.isArray(i)))?(t?(t=!1,s=e&&n.isArray(e)?e:[]):s=e&&n.isPlainObject(e)?e:{},a[r]=n.extend(c,s,i)):void 0!==i&&(a[r]=i));return a},n.queue=function(e,i,r){function o(e,n){var i=n||[];return null!=e&&(t(Object(e))?!function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e}(i,"string"==typeof e?[e]:e):[].push.call(i,e)),i}if(e){i=(i||"fx")+"queue";var s=n.data(e,i);return r?(!s||n.isArray(r)?s=n.data(e,i,o(r)):s.push(r),s):s||[]}},n.dequeue=function(e,t){n.each(e.nodeType?[e]:e,function(e,i){t=t||"fx";var r=n.queue(i,t),o=r.shift();"inprogress"===o&&(o=r.shift()),o&&("fx"===t&&r.unshift("inprogress"),o.call(i,function(){n.dequeue(i,t)}))})},n.fn=n.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),i=this.offset(),r=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:n(e).offset();return i.top-=parseFloat(t.style.marginTop)||0,i.left-=parseFloat(t.style.marginLeft)||0,e.style&&(r.top+=parseFloat(e.style.borderTopWidth)||0,r.left+=parseFloat(e.style.borderLeftWidth)||0),{top:i.top-r.top,left:i.left-r.left}}};var i={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var r={},o=r.hasOwnProperty,s=r.toString,a="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<a.length;l++)r["[object "+a[l]+"]"]=a[l].toLowerCase();n.fn.init.prototype=n.fn,e.Velocity={Utilities:n}}}(window),function(o){"object"==typeof e&&"object"==typeof e.exports?e.exports=o():(i=o,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r)))}(function(){return function(e,t,n,i){function r(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}function o(e){return g.isWrapped(e)?e=[].slice.call(e):g.isNode(e)&&(e=[e]),e}function s(e){var t=d.data(e,"velocity");return null===t?i:t}function a(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,n,i,r){function o(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function a(e){return 3*e}function l(e,t,n){return((o(t,n)*e+s(t,n))*e+a(t))*e}function u(e,t,n){return 3*o(t,n)*e*e+2*s(t,n)*e+a(t)}function c(t,n){for(var r=0;g>r;++r){var o=u(n,e,i);if(0===o)return n;var s=l(n,e,i)-t;n-=s/o}return n}function h(){for(var t=0;w>t;++t)b[t]=l(t*S,e,i)}function d(t,n,r){var o,s,a=0;do s=n+(r-n)/2,o=l(s,e,i)-t,o>0?r=s:n=s;while(Math.abs(o)>v&&++a<y);return s}function f(t){for(var n=0,r=1,o=w-1;r!=o&&b[r]<=t;++r)n+=S;--r;var s=(t-b[r])/(b[r+1]-b[r]),a=n+s*S,l=u(a,e,i);return l>=m?c(t,a):0==l?a:d(t,n,n+S)}function p(){E=!0,e==n&&i==r||h()}var g=4,m=.001,v=1e-7,y=10,w=11,S=1/(w-1),x="Float32Array"in t;if(4!==arguments.length)return!1;for(var T=0;4>T;++T)if("number"!=typeof arguments[T]||isNaN(arguments[T])||!isFinite(arguments[T]))return!1;e=Math.min(e,1),i=Math.min(i,1),e=Math.max(e,0),i=Math.max(i,0);var b=x?new Float32Array(w):new Array(w),E=!1,P=function(t){return E||p(),e===n&&i===r?t:0===t?0:1===t?1:l(f(t),n,r)};P.getControlPoints=function(){return[{x:e,y:n},{x:i,y:r}]};var _="generateBezier("+[e,n,i,r]+")";return P.toString=function(){return _},P}function u(e,t){var n=e;return g.isString(e)?w.Easings[e]||(n=!1):n=g.isArray(e)&&1===e.length?a.apply(null,e):g.isArray(e)&&2===e.length?S.apply(null,e.concat([t])):g.isArray(e)&&4===e.length?l.apply(null,e):!1,n===!1&&(n=w.Easings[w.defaults.easing]?w.defaults.easing:y),n}function c(e){if(e){var t=(new Date).getTime(),n=w.State.calls.length;n>1e4&&(w.State.calls=r(w.State.calls));for(var o=0;n>o;o++)if(w.State.calls[o]){var a=w.State.calls[o],l=a[0],u=a[2],f=a[3],p=!!f,m=null;f||(f=w.State.calls[o][3]=t-16);for(var v=Math.min((t-f)/u.duration,1),y=0,S=l.length;S>y;y++){var T=l[y],E=T.element;if(s(E)){var P=!1;if(u.display!==i&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var _=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];d.each(_,function(e,t){x.setPropertyValue(E,"display",t)})}x.setPropertyValue(E,"display",u.display)}u.visibility!==i&&"hidden"!==u.visibility&&x.setPropertyValue(E,"visibility",u.visibility);for(var O in T)if("element"!==O){var C,R=T[O],k=g.isString(R.easing)?w.Easings[R.easing]:R.easing;if(1===v)C=R.endValue;else{var I=R.endValue-R.startValue;if(C=R.startValue+I*k(v,u,I),!p&&C===R.currentValue)continue}if(R.currentValue=C,"tween"===O)m=C;else{if(x.Hooks.registered[O]){var F=x.Hooks.getRoot(O),M=s(E).rootPropertyValueCache[F];M&&(R.rootPropertyValue=M)}var D=x.setPropertyValue(E,O,R.currentValue+(0===parseFloat(C)?"":R.unitType),R.rootPropertyValue,R.scrollData);x.Hooks.registered[O]&&(x.Normalizations.registered[F]?s(E).rootPropertyValueCache[F]=x.Normalizations.registered[F]("extract",null,D[1]):s(E).rootPropertyValueCache[F]=D[1]),"transform"===D[0]&&(P=!0)}}u.mobileHA&&s(E).transformCache.translate3d===i&&(s(E).transformCache.translate3d="(0px, 0px, 0px)",P=!0),P&&x.flushTransformCache(E)}}u.display!==i&&"none"!==u.display&&(w.State.calls[o][2].display=!1),u.visibility!==i&&"hidden"!==u.visibility&&(w.State.calls[o][2].visibility=!1),u.progress&&u.progress.call(a[1],a[1],v,Math.max(0,f+u.duration-t),f,m),1===v&&h(o)}}w.State.isTicking&&b(c)}function h(e,t){if(!w.State.calls[e])return!1;for(var n=w.State.calls[e][0],r=w.State.calls[e][1],o=w.State.calls[e][2],a=w.State.calls[e][4],l=!1,u=0,c=n.length;c>u;u++){var h=n[u].element;if(t||o.loop||("none"===o.display&&x.setPropertyValue(h,"display",o.display),"hidden"===o.visibility&&x.setPropertyValue(h,"visibility",o.visibility)),o.loop!==!0&&(d.queue(h)[1]===i||!/\.velocityQueueEntryFlag/i.test(d.queue(h)[1]))&&s(h)){s(h).isAnimating=!1,s(h).rootPropertyValueCache={};var f=!1;d.each(x.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,r=s(h).transformCache[t];s(h).transformCache[t]!==i&&new RegExp("^\\("+n+"[^.]").test(r)&&(f=!0,delete s(h).transformCache[t])}),o.mobileHA&&(f=!0,delete s(h).transformCache.translate3d),f&&x.flushTransformCache(h),x.Values.removeClass(h,"velocity-animating")}if(!t&&o.complete&&!o.loop&&u===c-1)try{o.complete.call(r,r)}catch(p){setTimeout(function(){throw p},1)}a&&o.loop!==!0&&a(r),s(h)&&o.loop===!0&&!t&&(d.each(s(h).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),w(h,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&d.dequeue(h,o.queue)}w.State.calls[e]=!1;for(var g=0,m=w.State.calls.length;m>g;g++)if(w.State.calls[g]!==!1){l=!0;break}l===!1&&(w.State.isTicking=!1,delete w.State.calls,w.State.calls=[])}var d,f=function(){if(n.documentMode)return n.documentMode;for(var e=7;e>4;e--){var t=n.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return i}(),p=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-e)),e=i+n,setTimeout(function(){t(i+n)},n)}}(),g={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==i&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0);
},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},m=!1;if(e.fn&&e.fn.jquery?(d=e,m=!0):d=t.Velocity.Utilities,8>=f&&!m)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=f)return void(jQuery.fn.velocity=jQuery.fn.animate);var v=400,y="swing",w={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:d,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:v,easing:y,begin:i,complete:i,progress:i,display:i,visibility:i,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){d.data(e,"velocity",{isSVG:g.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==i?(w.State.scrollAnchor=t,w.State.scrollPropertyLeft="pageXOffset",w.State.scrollPropertyTop="pageYOffset"):(w.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,w.State.scrollPropertyLeft="scrollLeft",w.State.scrollPropertyTop="scrollTop");var S=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,i){var r={x:t.x+i.dx*n,v:t.v+i.dv*n,tension:t.tension,friction:t.friction};return{dx:r.v,dv:e(r)}}function n(n,i){var r={dx:n.v,dv:e(n)},o=t(n,.5*i,r),s=t(n,.5*i,o),a=t(n,i,s),l=1/6*(r.dx+2*(o.dx+s.dx)+a.dx),u=1/6*(r.dv+2*(o.dv+s.dv)+a.dv);return n.x=n.x+l*i,n.v=n.v+u*i,n}return function i(e,t,r){var o,s,a,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,h=1e-4,d=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,r=r||null,l.tension=e,l.friction=t,o=null!==r,o?(c=i(e,t),s=c/r*d):s=d;;)if(a=n(a||l,s),u.push(1+a.x),c+=16,!(Math.abs(a.x)>h&&Math.abs(a.v)>h))break;return o?function(e){return u[e*(u.length-1)|0]}:c}}();w.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},d.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){w.Easings[t[0]]=l.apply(null,t[1])});var x=w.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<x.Lists.colors.length;e++){var t="color"===x.Lists.colors[e]?"0 0 0 1":"255 255 255 1";x.Hooks.templates[x.Lists.colors[e]]=["Red Green Blue Alpha",t]}var n,i,r;if(f)for(n in x.Hooks.templates){i=x.Hooks.templates[n],r=i[0].split(" ");var o=i[1].match(x.RegEx.valueSplit);"Color"===r[0]&&(r.push(r.shift()),o.push(o.shift()),x.Hooks.templates[n]=[r.join(" "),o.join(" ")])}for(n in x.Hooks.templates){i=x.Hooks.templates[n],r=i[0].split(" ");for(var e in r){var s=n+r[e],a=e;x.Hooks.registered[s]=[n,a]}}},getRoot:function(e){var t=x.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return x.RegEx.valueUnwrap.test(t)&&(t=t.match(x.RegEx.valueUnwrap)[1]),x.Values.isCSSNullValue(t)&&(t=x.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=x.Hooks.registered[e];if(n){var i=n[0],r=n[1];return t=x.Hooks.cleanRootPropertyValue(i,t),t.toString().match(x.RegEx.valueSplit)[r]}return t},injectValue:function(e,t,n){var i=x.Hooks.registered[e];if(i){var r,o,s=i[0],a=i[1];return n=x.Hooks.cleanRootPropertyValue(s,n),r=n.toString().match(x.RegEx.valueSplit),r[a]=t,o=r.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var i;return x.RegEx.wrappedValueAlreadyExtracted.test(n)?i=n:(i=n.toString().match(x.RegEx.valueUnwrap),i=i?i[1].replace(/,(\s+)?/g," "):n),i;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return w.State.isFirefox?"filter":"-webkit-filter";case"extract":var i=parseFloat(n);if(!i&&0!==i){var r=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=r?r[1]:0}return i;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(8>=f)switch(e){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=i?i[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":return n;case"inject":return n}}},register:function(){9>=f||w.State.isGingerbread||(x.Lists.transformsBase=x.Lists.transformsBase.concat(x.Lists.transforms3D));for(var e=0;e<x.Lists.transformsBase.length;e++)!function(){var t=x.Lists.transformsBase[e];x.Normalizations.registered[t]=function(e,n,r){switch(e){case"name":return"transform";case"extract":return s(n)===i||s(n).transformCache[t]===i?/^scale/i.test(t)?1:0:s(n).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(r);break;case"scal":case"scale":w.State.isAndroid&&s(n).transformCache[t]===i&&1>r&&(r=1),o=!/(\d)$/i.test(r);break;case"skew":o=!/(deg|\d)$/i.test(r);break;case"rotate":o=!/(deg|\d)$/i.test(r)}return o||(s(n).transformCache[t]="("+r+")"),s(n).transformCache[t]}}}();for(var e=0;e<x.Lists.colors.length;e++)!function(){var t=x.Lists.colors[e];x.Normalizations.registered[t]=function(e,n,r){switch(e){case"name":return t;case"extract":var o;if(x.RegEx.wrappedValueAlreadyExtracted.test(r))o=r;else{var s,a={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(r)?s=a[r]!==i?a[r]:a.black:x.RegEx.isHex.test(r)?s="rgb("+x.Values.hexToRgb(r).join(" ")+")":/^rgba?\(/i.test(r)||(s=a.black),o=(s||r).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=f?4===r.split(" ").length&&(r=r.split(/\s+/).slice(0,3).join(" ")):3===r.split(" ").length&&(r+=" 1"),(8>=f?"rgb":"rgba")+"("+r.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||w.State.isAndroid&&!w.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(w.State.prefixMatches[e])return[w.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,i=t.length;i>n;n++){var r;if(r=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase()}),g.isString(w.State.prefixElement.style[r]))return w.State.prefixMatches[e]=r,[r,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(n,function(e,t,n,i){return t+t+n+n+i+i}),t=i.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,n,r,o){function a(e,n){function r(){u&&x.setPropertyValue(e,"display","none")}var l=0;if(8>=f)l=d.css(e,n);else{var u=!1;if(/^(width|height)$/.test(n)&&0===x.getPropertyValue(e,"display")&&(u=!0,x.setPropertyValue(e,"display",x.Values.getDisplayType(e))),!o){if("height"===n&&"border-box"!==x.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(x.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(x.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(x.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(x.getPropertyValue(e,"paddingBottom"))||0);return r(),c}if("width"===n&&"border-box"!==x.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var h=e.offsetWidth-(parseFloat(x.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(x.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(x.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(x.getPropertyValue(e,"paddingRight"))||0);return r(),h}}var p;p=s(e)===i?t.getComputedStyle(e,null):s(e).computedStyle?s(e).computedStyle:s(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===n&&(n="borderTopColor"),l=9===f&&"filter"===n?p.getPropertyValue(n):p[n],""!==l&&null!==l||(l=e.style[n]),r()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(n)){var g=a(e,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(l=d(e).position()[n]+"px")}return l}var l;if(x.Hooks.registered[n]){var u=n,c=x.Hooks.getRoot(u);r===i&&(r=x.getPropertyValue(e,x.Names.prefixCheck(c)[0])),x.Normalizations.registered[c]&&(r=x.Normalizations.registered[c]("extract",e,r)),l=x.Hooks.extractValue(u,r)}else if(x.Normalizations.registered[n]){var h,p;h=x.Normalizations.registered[n]("name",e),"transform"!==h&&(p=a(e,x.Names.prefixCheck(h)[0]),x.Values.isCSSNullValue(p)&&x.Hooks.templates[n]&&(p=x.Hooks.templates[n][1])),l=x.Normalizations.registered[n]("extract",e,p)}if(!/^[\d-]/.test(l))if(s(e)&&s(e).isSVG&&x.Names.SVGAttribute(n))if(/^(height|width)$/i.test(n))try{l=e.getBBox()[n]}catch(g){l=0}else l=e.getAttribute(n);else l=a(e,x.Names.prefixCheck(n)[0]);return x.Values.isCSSNullValue(l)&&(l=0),w.debug>=2&&console.log("Get "+n+": "+l),l},setPropertyValue:function(e,n,i,r,o){var a=n;if("scroll"===n)o.container?o.container["scroll"+o.direction]=i:"Left"===o.direction?t.scrollTo(i,o.alternateValue):t.scrollTo(o.alternateValue,i);else if(x.Normalizations.registered[n]&&"transform"===x.Normalizations.registered[n]("name",e))x.Normalizations.registered[n]("inject",e,i),a="transform",i=s(e).transformCache[n];else{if(x.Hooks.registered[n]){var l=n,u=x.Hooks.getRoot(n);r=r||x.getPropertyValue(e,u),i=x.Hooks.injectValue(l,i,r),n=u}if(x.Normalizations.registered[n]&&(i=x.Normalizations.registered[n]("inject",e,i),n=x.Normalizations.registered[n]("name",e)),a=x.Names.prefixCheck(n)[0],8>=f)try{e.style[a]=i}catch(c){w.debug&&console.log("Browser does not support ["+i+"] for ["+a+"]")}else s(e)&&s(e).isSVG&&x.Names.SVGAttribute(n)?e.setAttribute(n,i):e.style[a]=i;w.debug>=2&&console.log("Set "+n+" ("+a+"): "+i)}return[a,i]},flushTransformCache:function(e){function t(t){return parseFloat(x.getPropertyValue(e,t))}var n="";if((f||w.State.isAndroid&&!w.State.isChrome)&&s(e).isSVG){var i={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};d.each(s(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),i[e]&&(n+=e+"("+i[e].join(" ")+") ",delete i[e])})}else{var r,o;d.each(s(e).transformCache,function(t){return r=s(e).transformCache[t],"transformPerspective"===t?(o=r,!0):(9===f&&"rotateZ"===t&&(t="rotate"),void(n+=t+r+" "))}),o&&(n="perspective"+o+" "+n)}x.setPropertyValue(e,"transform",n)}};x.Hooks.register(),x.Normalizations.register(),w.hook=function(e,t,n){var r=i;return e=o(e),d.each(e,function(e,o){if(s(o)===i&&w.init(o),n===i)r===i&&(r=w.CSS.getPropertyValue(o,t));else{var a=w.CSS.setPropertyValue(o,t,n);"transform"===a[0]&&w.CSS.flushTransformCache(o),r=a}}),r};var T=function(){function e(){return a?O.promise||null:l}function r(){function e(e){function h(e,t){var n=i,r=i,s=i;return g.isArray(e)?(n=e[0],!g.isArray(e[1])&&/^[\d-]/.test(e[1])||g.isFunction(e[1])||x.RegEx.isHex.test(e[1])?s=e[1]:(g.isString(e[1])&&!x.RegEx.isHex.test(e[1])||g.isArray(e[1]))&&(r=t?e[1]:u(e[1],a.duration),e[2]!==i&&(s=e[2]))):n=e,t||(r=r||a.easing),g.isFunction(n)&&(n=n.call(o,E,b)),g.isFunction(s)&&(s=s.call(o,E,b)),[n||0,r,s]}function f(e,t){var n,i;return i=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n||(n=x.Values.getUnitType(e)),[i,n]}function v(){var e={myParent:o.parentNode||n.body,position:x.getPropertyValue(o,"position"),fontSize:x.getPropertyValue(o,"fontSize")},i=e.position===D.lastPosition&&e.myParent===D.lastParent,r=e.fontSize===D.lastFontSize;D.lastParent=e.myParent,D.lastPosition=e.position,D.lastFontSize=e.fontSize;var a=100,l={};if(r&&i)l.emToPx=D.lastEmToPx,l.percentToPxWidth=D.lastPercentToPxWidth,l.percentToPxHeight=D.lastPercentToPxHeight;else{var u=s(o).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");w.init(u),e.myParent.appendChild(u),d.each(["overflow","overflowX","overflowY"],function(e,t){w.CSS.setPropertyValue(u,t,"hidden")}),w.CSS.setPropertyValue(u,"position",e.position),w.CSS.setPropertyValue(u,"fontSize",e.fontSize),w.CSS.setPropertyValue(u,"boxSizing","content-box"),d.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){w.CSS.setPropertyValue(u,t,a+"%")}),w.CSS.setPropertyValue(u,"paddingLeft",a+"em"),l.percentToPxWidth=D.lastPercentToPxWidth=(parseFloat(x.getPropertyValue(u,"width",null,!0))||1)/a,l.percentToPxHeight=D.lastPercentToPxHeight=(parseFloat(x.getPropertyValue(u,"height",null,!0))||1)/a,l.emToPx=D.lastEmToPx=(parseFloat(x.getPropertyValue(u,"paddingLeft"))||1)/a,e.myParent.removeChild(u)}return null===D.remToPx&&(D.remToPx=parseFloat(x.getPropertyValue(n.body,"fontSize"))||16),null===D.vwToPx&&(D.vwToPx=parseFloat(t.innerWidth)/100,D.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=D.remToPx,l.vwToPx=D.vwToPx,l.vhToPx=D.vhToPx,w.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),o),l}if(a.begin&&0===E)try{a.begin.call(p,p)}catch(S){setTimeout(function(){throw S},1)}if("scroll"===C){var T,P,_,R=/^x$/i.test(a.axis)?"Left":"Top",k=parseFloat(a.offset)||0;a.container?g.isWrapped(a.container)||g.isNode(a.container)?(a.container=a.container[0]||a.container,T=a.container["scroll"+R],_=T+d(o).position()[R.toLowerCase()]+k):a.container=null:(T=w.State.scrollAnchor[w.State["scrollProperty"+R]],P=w.State.scrollAnchor[w.State["scrollProperty"+("Left"===R?"Top":"Left")]],_=d(o).offset()[R.toLowerCase()]+k),l={scroll:{rootPropertyValue:!1,startValue:T,currentValue:T,endValue:_,unitType:"",easing:a.easing,scrollData:{container:a.container,direction:R,alternateValue:P}},element:o},w.debug&&console.log("tweensContainer (scroll): ",l.scroll,o)}else if("reverse"===C){if(!s(o).tweensContainer)return void d.dequeue(o,a.queue);"none"===s(o).opts.display&&(s(o).opts.display="auto"),"hidden"===s(o).opts.visibility&&(s(o).opts.visibility="visible"),s(o).opts.loop=!1,s(o).opts.begin=null,s(o).opts.complete=null,y.easing||delete a.easing,y.duration||delete a.duration,a=d.extend({},s(o).opts,a);var I=d.extend(!0,{},s(o).tweensContainer);for(var F in I)if("element"!==F){var M=I[F].startValue;I[F].startValue=I[F].currentValue=I[F].endValue,I[F].endValue=M,g.isEmptyObject(y)||(I[F].easing=a.easing),w.debug&&console.log("reverse tweensContainer ("+F+"): "+JSON.stringify(I[F]),o)}l=I}else if("start"===C){var I;s(o).tweensContainer&&s(o).isAnimating===!0&&(I=s(o).tweensContainer),d.each(m,function(e,t){if(RegExp("^"+x.Lists.colors.join("$|^")+"$").test(e)){var n=h(t,!0),r=n[0],o=n[1],s=n[2];if(x.RegEx.isHex.test(r)){for(var a=["Red","Green","Blue"],l=x.Values.hexToRgb(r),u=s?x.Values.hexToRgb(s):i,c=0;c<a.length;c++){var d=[l[c]];o&&d.push(o),u!==i&&d.push(u[c]),m[e+a[c]]=d}delete m[e]}}});for(var L in m){var z=h(m[L]),H=z[0],N=z[1],B=z[2];L=x.Names.camelCase(L);var j=x.Hooks.getRoot(L),V=!1;if(s(o).isSVG||"tween"===j||x.Names.prefixCheck(j)[1]!==!1||x.Normalizations.registered[j]!==i){(a.display!==i&&null!==a.display&&"none"!==a.display||a.visibility!==i&&"hidden"!==a.visibility)&&/opacity|filter/.test(L)&&!B&&0!==H&&(B=0),a._cacheValues&&I&&I[L]?(B===i&&(B=I[L].endValue+I[L].unitType),V=s(o).rootPropertyValueCache[j]):x.Hooks.registered[L]?B===i?(V=x.getPropertyValue(o,j),B=x.getPropertyValue(o,L,V)):V=x.Hooks.templates[j][1]:B===i&&(B=x.getPropertyValue(o,L));var W,U,$,G=!1;if(W=f(L,B),B=W[0],$=W[1],W=f(L,H),H=W[0].replace(/^([+-\/*])=/,function(e,t){return G=t,""}),U=W[1],B=parseFloat(B)||0,H=parseFloat(H)||0,"%"===U&&(/^(fontSize|lineHeight)$/.test(L)?(H/=100,U="em"):/^scale/.test(L)?(H/=100,U=""):/(Red|Green|Blue)$/i.test(L)&&(H=H/100*255,U="")),/[\/*]/.test(G))U=$;else if($!==U&&0!==B)if(0===H)U=$;else{r=r||v();var q=/margin|padding|left|right|width|text|word|letter/i.test(L)||/X$/.test(L)||"x"===L?"x":"y";switch($){case"%":B*="x"===q?r.percentToPxWidth:r.percentToPxHeight;break;case"px":break;default:B*=r[$+"ToPx"]}switch(U){case"%":B*=1/("x"===q?r.percentToPxWidth:r.percentToPxHeight);break;case"px":break;default:B*=1/r[U+"ToPx"]}}switch(G){case"+":H=B+H;break;case"-":H=B-H;break;case"*":H=B*H;break;case"/":H=B/H}l[L]={rootPropertyValue:V,startValue:B,currentValue:B,endValue:H,unitType:U,easing:N},w.debug&&console.log("tweensContainer ("+L+"): "+JSON.stringify(l[L]),o)}else w.debug&&console.log("Skipping ["+j+"] due to a lack of browser support.")}l.element=o}l.element&&(x.Values.addClass(o,"velocity-animating"),A.push(l),""===a.queue&&(s(o).tweensContainer=l,s(o).opts=a),s(o).isAnimating=!0,E===b-1?(w.State.calls.push([A,p,a,null,O.resolver]),w.State.isTicking===!1&&(w.State.isTicking=!0,c())):E++)}var r,o=this,a=d.extend({},w.defaults,y),l={};switch(s(o)===i&&w.init(o),parseFloat(a.delay)&&a.queue!==!1&&d.queue(o,a.queue,function(e){w.velocityQueueEntryFlag=!0,s(o).delayTimer={setTimeout:setTimeout(e,parseFloat(a.delay)),next:e}}),a.duration.toString().toLowerCase()){case"fast":a.duration=200;break;case"normal":a.duration=v;break;case"slow":a.duration=600;break;default:a.duration=parseFloat(a.duration)||1}w.mock!==!1&&(w.mock===!0?a.duration=a.delay=1:(a.duration*=parseFloat(w.mock)||1,a.delay*=parseFloat(w.mock)||1)),a.easing=u(a.easing,a.duration),a.begin&&!g.isFunction(a.begin)&&(a.begin=null),a.progress&&!g.isFunction(a.progress)&&(a.progress=null),a.complete&&!g.isFunction(a.complete)&&(a.complete=null),a.display!==i&&null!==a.display&&(a.display=a.display.toString().toLowerCase(),"auto"===a.display&&(a.display=w.CSS.Values.getDisplayType(o))),a.visibility!==i&&null!==a.visibility&&(a.visibility=a.visibility.toString().toLowerCase()),a.mobileHA=a.mobileHA&&w.State.isMobile&&!w.State.isGingerbread,a.queue===!1?a.delay?setTimeout(e,a.delay):e():d.queue(o,a.queue,function(t,n){return n===!0?(O.promise&&O.resolver(p),!0):(w.velocityQueueEntryFlag=!0,void e(t))}),""!==a.queue&&"fx"!==a.queue||"inprogress"===d.queue(o)[0]||d.dequeue(o)}var a,l,f,p,m,y,S=arguments[0]&&(arguments[0].p||d.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties));if(g.isWrapped(this)?(a=!1,f=0,p=this,l=this):(a=!0,f=1,p=S?arguments[0].elements||arguments[0].e:arguments[0]),p=o(p)){S?(m=arguments[0].properties||arguments[0].p,y=arguments[0].options||arguments[0].o):(m=arguments[f],y=arguments[f+1]);var b=p.length,E=0;if(!/^(stop|finish|finishAll)$/i.test(m)&&!d.isPlainObject(y)){var P=f+1;y={};for(var _=P;_<arguments.length;_++)g.isArray(arguments[_])||!/^(fast|normal|slow)$/i.test(arguments[_])&&!/^\d/.test(arguments[_])?g.isString(arguments[_])||g.isArray(arguments[_])?y.easing=arguments[_]:g.isFunction(arguments[_])&&(y.complete=arguments[_]):y.duration=arguments[_]}var O={promise:null,resolver:null,rejecter:null};a&&w.Promise&&(O.promise=new w.Promise(function(e,t){O.resolver=e,O.rejecter=t}));var C;switch(m){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"finishAll":case"stop":d.each(p,function(e,t){s(t)&&s(t).delayTimer&&(clearTimeout(s(t).delayTimer.setTimeout),s(t).delayTimer.next&&s(t).delayTimer.next(),delete s(t).delayTimer),"finishAll"!==m||y!==!0&&!g.isString(y)||(d.each(d.queue(t,g.isString(y)?y:""),function(e,t){g.isFunction(t)&&t()}),d.queue(t,g.isString(y)?y:"",[]))});var R=[];return d.each(w.State.calls,function(e,t){t&&d.each(t[1],function(n,r){var o=y===i?"":y;return o===!0||t[2].queue===o||y===i&&t[2].queue===!1?void d.each(p,function(n,i){i===r&&((y===!0||g.isString(y))&&(d.each(d.queue(i,g.isString(y)?y:""),function(e,t){g.isFunction(t)&&t(null,!0)}),d.queue(i,g.isString(y)?y:"",[])),"stop"===m?(s(i)&&s(i).tweensContainer&&o!==!1&&d.each(s(i).tweensContainer,function(e,t){t.endValue=t.currentValue}),R.push(e)):"finish"!==m&&"finishAll"!==m||(t[2].duration=1))}):!0})}),"stop"===m&&(d.each(R,function(e,t){h(t,!0)}),O.promise&&O.resolver(p)),e();default:if(!d.isPlainObject(m)||g.isEmptyObject(m)){if(g.isString(m)&&w.Redirects[m]){var k=d.extend({},y),I=k.duration,F=k.delay||0;return k.backwards===!0&&(p=d.extend(!0,[],p).reverse()),d.each(p,function(e,t){parseFloat(k.stagger)?k.delay=F+parseFloat(k.stagger)*e:g.isFunction(k.stagger)&&(k.delay=F+k.stagger.call(t,e,b)),k.drag&&(k.duration=parseFloat(I)||(/^(callout|transition)/.test(m)?1e3:v),k.duration=Math.max(k.duration*(k.backwards?1-e/b:(e+1)/b),.75*k.duration,200)),w.Redirects[m].call(t,t,k||{},e,b,p,O.promise?O:i)}),e()}var M="Velocity: First argument ("+m+") was not a property map, a known action, or a registered redirect. Aborting.";return O.promise?O.rejecter(new Error(M)):console.log(M),e()}C="start"}var D={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},A=[];d.each(p,function(e,t){g.isNode(t)&&r.call(t)});var L,k=d.extend({},w.defaults,y);if(k.loop=parseInt(k.loop),L=2*k.loop-1,k.loop)for(var z=0;L>z;z++){var H={delay:k.delay,progress:k.progress};z===L-1&&(H.display=k.display,H.visibility=k.visibility,H.complete=k.complete),T(p,"reverse",H)}return e()}};w=d.extend(T,w),w.animate=T;var b=t.requestAnimationFrame||p;return w.State.isMobile||n.hidden===i||n.addEventListener("visibilitychange",function(){n.hidden?(b=function(e){return setTimeout(function(){e(!0)},16)},c()):b=t.requestAnimationFrame||p}),e.Velocity=w,e!==t&&(e.fn.velocity=T,e.fn.velocity.defaults=w.defaults),d.each(["Down","Up"],function(e,t){w.Redirects["slide"+t]=function(e,n,r,o,s,a){var l=d.extend({},n),u=l.begin,c=l.complete,h={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},f={};l.display===i&&(l.display="Down"===t?"inline"===w.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(s,s);for(var n in h){f[n]=e.style[n];var i=w.CSS.getPropertyValue(e,n);h[n]="Down"===t?[i,0]:[0,i]}f.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in f)e.style[t]=f[t];c&&c.call(s,s),a&&a.resolver(s)},w(e,h,l)}}),d.each(["In","Out"],function(e,t){w.Redirects["fade"+t]=function(e,n,r,o,s,a){var l=d.extend({},n),u={opacity:"In"===t?1:0},c=l.complete;r!==o-1?l.complete=l.begin=null:l.complete=function(){c&&c.call(s,s),a&&a.resolver(s)},l.display===i&&(l.display="In"===t?"auto":"none"),w(this,u,l)}}),w}(window.jQuery||window.Zepto||window,window,document)})}]);
//# sourceMappingURL=bundle.js.map